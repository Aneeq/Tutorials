(function(){var N,t;(function(b){var e={},h=function(m){var k=e[m];if(k==b)throw"Module not defined or loaded: "+m;if(k.compiled)return k.compiled;var n=[];if(k.dependencies&&0<k.dependencies.length)
for(var d=0;d<k.dependencies.length;d++)n.push(h(k.dependencies[d]));k.compiled=k.factory.apply(this,n.concat(k.extraArguments));if(!k.compiled)throw"Module defined but not loadable: "+m;return k.compiled};N=function(e,k){var n=e,d=k,g=2;n.splice||(d=n,n=b,g--);for(var g=Array.prototype.slice.call(arguments,g),c=[],a=0;a<n.length;a++)c.push(h(n[a]));d.apply(this,c.concat(g))};t=function(h,k,n){var d=k,g=n,c=3;d.splice||(g=d,d=b,c--);c=Array.prototype.slice.call(arguments,c);e[h]={dependencies:d,factory:g,extraArguments:c||[]}}})();t("components","component.bookmark component.collapseexpand component.like component.links component.moderate component.page component.rate component.searchresult component.tag component.theater component.webpreview component.tourtip component.viewhtml component.previewhtml component.masonry component.resizedimage component.tip component.select component.poll component.convertcontent".split(" "),function(){return{}});t("component.bookmark",["module.ui"],function(b,e,h,m){e.telligent.evolution.ui.components.bookmark={setup:function(){},add:function(b,n){b.empty();var d={contentId:n.contentid,contentTypeId:n.contenttypeid,typeId:n.bookmarktypeid,initialState:"true"==n.value,contentTypeName:n.contenttypename,onBookmark:function(d,c,a,b){e.telligent.evolution.post({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/bookmark.json?ContentId={ContentId}&ContentTypeId={ContentTypeId}"+(a?"&TypeId="+a:""),data:{ContentId:d,ContentTypeId:c},dataType:"json",success:function(a){b()}})},onUnbookmark:function(d,c,a,b){e.telligent.evolution.del({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/bookmark.json?ContentId={ContentId}"+(a?"&TypeId="+a:""),data:{ContentId:d},dataType:"json",success:function(a){b()}})}};n.configuration.deleteBookmarkText&&(d.deleteBookmarkText=n.configuration.deleteBookmarkText);n.configuration.addBookmarkText&&(d.addBookmarkText=n.configuration.addBookmarkText);n.configuration.processingText&&(d.processingText=n.configuration.processingText);n.configuration.addBookmarkCssClass&&(d.addBookmarkCssClass=n.configuration.addBookmarkCssClass);n.configuration.deleteBookmarkCssClass&&(d.deleteBookmarkCssClass=n.configuration.deleteBookmarkCssClass);n.configuration.processingCssClass&&(d.processingCssClass=n.configuration.processingCssClass);e(b).evolutionBookmark(d)}};return{}},jQuery,window);t("component.collapseexpand",["module.ui"],function(b,e,h,m){e.telligent.evolution.ui.components.collapseexpand={setup:function(){},add:function(b,n){var d=e("<a></a>").attr({href:"#"}).text(n.collapsetext),g=!1;d.click(function(){g?(b.slideUp(),d.text(n.collapsetext)):(b.slideDown(),d.text(n.expandtext));g=!g;return!1});b.removeClass().before(d).hide()}};return{}},jQuery,window);t("component.convertcontent",["module.ui","lib.util"],function(b,e,h,m,k){function n(a,f){f?h(a).css("visibility","visible"):h(a).show()}
function d(a,f){f?h(a).css("visibility","hidden"):h(a).hide()}
function g(f,c){a(f);n(f.messageFieldItem);f.messageFieldItem.find(".field-item-description").html(c)}
function c(a){a.convertFieldItemButton.removeClass("disabled")}
function a(a){a.convertFieldItemButton.addClass("disabled")}
function r(f,c){a(f);d(f.convertFieldItemProcessing,!0);c===f.targetContentTypeFieldItem?(d(f.targetGroupFieldItem),d(f.targetApplicationFieldItem),d(f.configurableConverterFields),d(f.messageFieldItem),f.selectedContentTypeId=null,f.selectedContainerId=null,f.selectedApplicationId=null,f.configurableConverterValues=null,f.configurableConverterFormId=null):c===f.targetGroupFieldItem?(d(f.targetApplicationFieldItem),d(f.configurableConverterFields),d(f.messageFieldItem),f.selectedContainerId=null,f.selectedApplicationId=null,f.configurableConverterValues=null,f.configurableConverterFormId=null):c===f.targetApplicationFieldItem?(d(f.messageFieldItem),d(f.configurableConverterFields),f.selectedApplicationId=null,f.configurableConverterValues=null,f.configurableConverterFormId=null):c===f.configurableConverterFields&&(d(f.messageFieldItem),f.configurableConverterValues=null)}
function p(a){r(a,a.targetContentTypeFieldItem);n(a.convertFieldItemProcessing,!0);x.listTargetContentTypes({sourceContentId:a.sourceContentId,sourceContentTypeId:a.sourceContentTypeId}).done(function(c){c&&c.ConversionTargetContentTypes&&0<c.ConversionTargetContentTypes.length?(h.glowModal({title:h.telligent.evolution.template.compile(A)({resources:{resourcePromptTitle:a.resourcePromptTitle,sourceContentTypeName:a.sourceContentTypeName}}),html:a.container,width:450,height:"100%"}),d(a.convertFieldItemProcessing,!0),a.targetContentTypeFieldItem.find(".field-item-input").empty(),a.contentTypeSelect=h(a.selectTemplate({label:a.resourceContentTypePlaceholder,items:h.map(c.ConversionTargetContentTypes,function(a){return{value:a.Id,name:a.Name}})})).show().appendTo(a.targetContentTypeFieldItem.find(".field-item-input")).on("change",function(){""==a.contentTypeSelect.val().length?r(a,a.targetContentTypeFieldItem):(a.selectedContentTypeId=a.contentTypeSelect.val(),f(a))}),n(a.targetContentTypeFieldItem)):h.telligent.evolution.notifications.show(a.resourceContentTypeErrorMessage)}).fail(function(){h.telligent.evolution.notifications.show(a.resourceContentTypeErrorMessage)})}
function f(a){r(a,a.targetGroupFieldItem);a.targetGroupFieldItem.find(".field-item-input").empty().css({width:"50%"});var f=h('<input type="text" id="" name="" style="width: 50%;" />').appendTo(a.targetGroupFieldItem.find(".field-item-input"));f.glowLookUpTextBox({emptyHtml:"",maxValues:1,onGetLookUps:function(f,c){window.clearTimeout(a.searchGroupsTimeout);c&&2<=c.length&&(f.glowLookUpTextBox("updateSuggestions",[f.glowLookUpTextBox("createLookUp","",'<div style="text-align: center;"><img src="'+h.telligent.evolution.site.getBaseUrl()+'utility/spinner.gif" alt="\u2026" /></div>','<div style="text-align: center;"><img src="'+h.telligent.evolution.site.getBaseUrl()+'utility/spinner.gif" alt="\u2026" /></div>',!1)]),a.searchGroupsTimeout=window.setTimeout(function(){n(a.convertFieldItemProcessing,!0);x.searchTargetGroups({query:c}).done(function(c){d(a.convertFieldItemProcessing,!0);if(c&&0<c.Groups.length){for(var l=[],p=0;p<c.Groups.length;p++){var u=c.Groups[p];l.push(f.glowLookUpTextBox("createLookUp",u.ContainerId,u.Name,u.Name,!0))}
f.glowLookUpTextBox("updateSuggestions",l)}else f.glowLookUpTextBox("updateSuggestions",[f.glowLookUpTextBox("createLookUp","",a.resourceContainerErrorMessage,a.resourceContainerErrorMessage,!1)])})},750))},selectedLookUpsHtml:[]}).on("glowLookUpTextBoxChange",function(c){(c=f.val())?(a.selectedContainerId=c,s(a)):r(a,a.targetGroupFieldItem)});n(a.targetGroupFieldItem)}
function s(a){r(a,a.targetApplicationFieldItem);n(a.convertFieldItemProcessing,!0);x.listTargetApplications({sourceContentTypeId:a.sourceContentTypeId,sourceContentId:a.sourceContentId,targetContentTypeId:a.selectedContentTypeId,containerId:a.selectedContainerId}).done(function(f){d(a.convertFieldItemProcessing,!0);f&&f.ConversionTargetApplications&&0<f.ConversionTargetApplications.length?(a.targetApplicationFieldItem.find(".field-item-input").empty(),a.appplicationSelect=h(a.selectTemplate({label:a.resourceApplicationPlaceholder,items:h.map(f.ConversionTargetApplications,function(a){return{value:a.ApplicationId,name:a.HtmlName}})})).show().addClass(u).appendTo(a.targetApplicationFieldItem.find(".field-item-input")).on("change",function(){""==a.appplicationSelect.val().length?r(a,a.targetApplicationFieldItem):(a.selectedApplicationId=a.appplicationSelect.val(),l(a))}),n(a.targetApplicationFieldItem)):g(a,a.resourceApplicationErrorMessage)}).fail(function(){d(a.convertFieldItemProcessing,!0);g(a,a.resourceApplicationErrorMessage)})}
function l(a){r(a,a.configurableConverterFields);a.configurableConverterFormId="form_"+e.guid();n(a.convertFieldItemProcessing,!0);x.getConfigurableConverterForm({configurableConverterFormEndpoint:a.configurableConverterFormEndpoint,sourceContentTypeId:a.sourceContentTypeId,sourceContentId:a.sourceContentId,targetContentTypeId:a.selectedContentTypeId,formId:a.configurableConverterFormId}).done(function(f){d(a.convertFieldItemProcessing,!0);f&&f.form&&0<f.form.length?(a.configurableConverterFields.empty(),f=h(f.form),f.find("legend").remove(),a.configurableConverterFields.append(f),n(a.configurableConverterFields)):a.configurableConverterFormId=null;c(a)}).fail(function(){d(a.convertFieldItemProcessing,!0);a.configurableConverterFormId=null;g(a,a.targetApplicationUnavailableMessageResource)})}
function v(f){f.convertFieldItemButton.on("click",function(l){l.preventDefault();var p={sourceContentTypeId:f.sourceContentTypeId,sourceContentId:f.sourceContentId,targetContentTypeId:f.selectedContentTypeId,targetApplicationId:f.selectedApplicationId};f.configurableConverterFormId&&(f.configurableConverterValues="undefined"!==typeof jQuery.fn.dynamicForm&&0<jQuery("#"+f.configurableConverterFormId).length?jQuery("#"+f.configurableConverterFormId).dynamicForm("getValues"):{},f.configurableConverterValues&&(p.options=f.configurableConverterValues));h(l.target).hasClass("disabled")||(a(f),n(f.convertFieldItemProcessing,!0),x.convert(p).done(function(a){d(f.convertFieldItemProcessing,!0);a&&a.ContentConversion&&a.ContentConversion.Url?m.location=a.ContentConversion.Url:(c(f),d(f.convertFieldItemProcessing,!0))}).fail(function(a){c(f);d(f.convertFieldItemProcessing,!0)}));return!1})}
var u="ActiveXObject"in window?"":"ui-select",q=' <fieldset>  \t<ul class="field-list">  \t\t<li class="field-item target-content-type" style="display:none">  \t\t\t<label for="" class="field-item-name"><%= resources.resourceContentTypeLabel %></label>  \t\t\t<span class="field-item-input"></span>  \t\t\t<span class="field-item-validation" style="display:none;"></span>  \t\t</li>  \t\t<li class="field-item target-group" style="display:none">  \t\t\t<label for="" class="field-item-name"><%= resources.resourceContainerLabel %></label>  \t\t\t<span class="field-item-input"></span>  \t\t</li>  \t\t<li class="field-item target-application" style="display:none"  \t\t\t<label for="" class="field-item-name"><%= resources.resourceApplicationLabel %></label>  \t\t\t<span class="field-item-input">  \t\t\t\t<select class="'+u+'"></select>  \t\t\t</span>  \t\t\t<span class="field-item-validation" style="display:none;"></span>  \t\t</li>  \t\t<li class="field-item configurable-converter-fields" style="display:none"  \t\t</li>  \t\t<li class="field-item message error" style="display:none;">  \t\t\t<span class="field-item-description">  \t\t\t</span>  \t\t</li>  \t\t<li class="field-item convert">  \t\t\t<span class="field-item-input">  \t\t\t\t<a href="#" id="" name="" class="button disabled"><%= resources.resourceConvertLabel %></a>  \t\t\t\t<span class="processing" style="visibility: hidden;"></span>  \t\t\t</span>  \t\t</li>  \t</ul>  </fieldset> ',A="<%= resources.resourcePromptTitle %> <%= resources.sourceContentTypeName %>",y=' <select class="'+u+'" style="display:none">    <% if(label) { %>      <option value=""><%= label %></option>    <% } %>    <% foreach(items, function(item) { %>      <option value="<%= item.value %>"><%= item.name %></option>    <% }); %>  </select> ',x={listTargetContentTypes:function(a){return h.telligent.evolution.get({url:h.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/contentconversion/targetcontenttypes.json",data:{SourceContentId:a.sourceContentId,SourceContentTypeId:a.sourceContentTypeId}})},searchTargetGroups:function(a){a=a||{};var f={IncludeAllSubGroups:!0,pageIndex:0,pageSize:10};a.query&&(f.GroupNameFilter=a.query);return h.telligent.evolution.get({url:h.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/groups.json",data:f})},listTargetApplications:function(a){return h.telligent.evolution.get({url:h.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/contentconversion/targetapplications.json",data:{SourceContentTypeId:a.sourceContentTypeId,SourceContentId:a.sourceContentId,TargetContentTypeId:a.targetContentTypeId,ContainerId:a.containerId}})},getConfigurableConverterForm:function(a){return h.telligent.evolution.get({url:a.configurableConverterFormEndpoint,data:{SourceContentTypeId:a.sourceContentTypeId,SourceContentId:a.sourceContentId,TargetContentTypeId:a.targetContentTypeId,FormId:a.formId}})},convert:function(a){return h.telligent.evolution.post({url:h.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/contentconversion/conversion.json",data:{SourceContentTypeId:a.sourceContentTypeId,SourceContentId:a.sourceContentId,TargetContentTypeId:a.targetContentTypeId,TargetApplicationId:a.targetApplicationId,Options:h.telligent.evolution.url.serializeQuery(a.options)}})}},D={setup:function(){},add:function(a,f){var c=h('<a href="#">'+f.label+"</a>");h(a).empty().append(c);c.on("click.convertcontent",function(a){a.preventDefault();a=h.extend({},D.defaults,{sourceContentTypeId:f.sourcecontenttypeid,sourceContentId:f.sourcecontentid,sourceContentTypeName:f.sourcecontenttypename});a.selectTemplate=h.telligent.evolution.template.compile(y);a.promptTemplate=h.telligent.evolution.template.compile(q);a.container=h(a.promptTemplate({resources:{resourceContentTypeLabel:a.resourceContentTypeLabel,resourceContainerLabel:a.resourceContainerLabel,resourceApplicationLabel:a.resourceApplicationLabel,resourceConvertLabel:a.resourceConvertLabel}})).css({minHeight:0.9*h(m).height()});a.targetContentTypeFieldItem=a.container.find(".field-item.target-content-type");a.targetGroupFieldItem=a.container.find(".field-item.target-group");a.targetApplicationFieldItem=a.container.find(".field-item.target-application");a.messageFieldItem=a.container.find(".field-item.message");a.configurableConverterFields=a.container.find(".field-item.configurable-converter-fields");a.convertFieldItemButton=a.container.find(".field-item.convert .button");a.convertFieldItemProcessing=a.container.find(".field-item.convert .processing");v(a);p(a);return!1})},defaults:{sourceContentTypeName:"Source Type Name",sourceContentTypeId:"",sourceContentId:"",resourcePromptTitle:"Convert",resourceContentTypeLabel:"To",resourceContentTypePlaceholder:"Select type\u2026",resourceContentTypeErrorMessage:"This content is not eligible for conversion.",resourceContainerLabel:"In Group",resourceContainerErrorMessage:"No Matching Groups",resourceApplicationLabel:"In Application",resourceApplicationPlaceholder:"Select application\u2026",resourceApplicationErrorMessage:"This group contains no eligible applications.",resourceConvertLabel:"Convert"}};h.telligent=h.telligent||{};h.telligent.evolution=h.telligent.evolution||{};h.telligent.evolution.ui=h.telligent.evolution.ui||{};h.telligent.evolution.ui.components=h.telligent.evolution.ui.components||{};h.telligent.evolution.ui.components.convertcontent=D;return{}},jQuery,window);t("component.like",["module.ui","module.messaging"],function(b,e,h,m,k){var n=function(d,g,c,a){h.telligent.evolution.get({url:h.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:{ContentId:d,ContentTypeId:g,TypeId:c,SortBy:"Date",SortOrder:"Descending",PageSize:1,PageIndex:0},cache:!1,dataType:"json",success:function(c){a.call(this,{count:c.TotalCount,latestLike:0<c.Likes.length?c.Likes[0]:null})}})};h.telligent.evolution.messaging.subscribe("ui.like",function(d){(d.typeId?h('.ui-like[data-contentid="'+d.contentId+'"][data-contenttypeid="'+d.contentTypeId+'"][data-typeid="'+d.typeId+'"]'):h('.ui-like[data-contentid="'+d.contentId+'"][data-contenttypeid="'+d.contentTypeId+'"]')).attr("data-initialstate",d.liked.toString()).attr("data-initialcount",d.count.toString()).attr("data-initialmessage",d.message.toString())});h.telligent.evolution.ui.components.like={setup:function(){h.fn.evolutionLike.delegatePopups({containerSelector:".content-fragment",delegatedSelector:".ui-like",onList:function(d,g,c,a,e,p){h.telligent.evolution.get({url:h.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:{ContentId:d,ContentTypeId:g,TypeId:c,SortBy:"Date",SortOrder:"Descending",PageSize:e||20,PageIndex:p||0},cache:!1,dataType:"json",success:function(f){h.telligent.evolution.batch(function(){h.each(f.Likes,function(a,f){h.telligent.evolution.get({url:h.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ui/image.json",data:{url:f.User.AvatarUrl,maxWidth:32,maxHeight:32,resizeMethod:"ZoomAndCrop"}}).done(function(a){f.userAvatarHtml=a.Html})})}).done(function(){a({likers:h.map(f.Likes,function(a){return{displayName:a.User.DisplayName,profileUrl:a.User.ProfileUrl,avatarHtml:a.userAvatarHtml}}),hasMorePages:(f.PageIndex+1)*f.PageSize<f.TotalCount})})}})},onOptions:function(d){d=h.telligent.evolution.ui.data(d);return{contentId:d.contentid,contentTypeId:d.contenttypeid,typeId:d.configuration.LikeTypeId}}})},add:function(d,g){var c="true"===g.readonly;h(d).evolutionLike({contentId:g.contentid,contentTypeId:g.contenttypeid,initialState:g.initialstate,initialMessage:g.initialmessage,initialCount:g.initialcount,format:c?g.format.replace("{toggle}",""):g.format,typeId:g.configuration.LikeTypeId,onLike:function(a,c,d,f){h.fn.evolutionTip.hide();var g={ContentId:a,ContentTypeId:c};null!==d&&0<d.length&&(g.TypeId=d);h.telligent.evolution.post({url:h.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:g,cache:!1,dataType:"json",success:function(l){n(a,c,d,f)}})},onUnlike:function(a,c,d,f){h.fn.evolutionTip.hide();var g={ContentId:a};null!==d&&0<d.length&&(g.TypeId=d);h.telligent.evolution.del({url:h.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/like.json",data:g,cache:!1,dataType:"json",success:function(l){n(a,c,d,f)}})}})}};return{}},jQuery,window);t("component.links",["module.ui","lib.dynamicLinks","lib.sheetProvider","lib.util"],function(b,e,h,m,k,n,d){function g(f,d,p){!0===f.data("linkshown")?(f.data("linkshown",!1),k.fn.uilinks.hide()):(k.telligent.evolution.messaging.publish("ui.links.show"),k(window).width()<s.minWidth?a(d,p):c(f,d))}
function c(a,c){a.css({position:"relative "});for(var d=k(document.createElement("ul")),p=0;p<c.length;p++){var g=k(document.createElement("li"));g.append(k(c[p].element).css("float","none").get(0));d.append(g)}
d.on("mouseleave",function(){k.fn.uilinks.hide();a.data("linkshown",!1)});f?f.glowPopUpPanel("hide").glowPopUpPanel("empty","").glowPopUpPanel("append",d).glowPopUpPanel("show",a):f=k("<div></div>").glowPopUpPanel({cssClass:"links-popup-panel",zIndex:1500,hideOnDocumentClick:!0}).glowPopUpPanel("append",d).glowPopUpPanel("show",a).on("glowPopUpPanelHidden",function(){a.data("linkshown",!1)});a.data("linkshown",!0)}
function a(a,f){var c=a.slice(0);c.push(f);h.actionSheet.show({links:k.map(c,function(a){return a.element})});h.actionSheet.content().on("click","a",function(a){h.actionSheet.hide()});f.element.on("click",function(a){a.preventDefault();h.actionSheet.hide();k.telligent.evolution.messaging.publish("ui.links.hide");return!1});var d=k.telligent.evolution.messaging.subscribe("sheet.closed",function(){k.each(a,function(a,f){r(k(f.element))});k.telligent.evolution.messaging.unsubscribe(d)})}
function r(a){a.is('[class^="ui-"]')&&!a.hasClass("ui-tourtip")?a.empty().remove():a.detach()}
function p(a,f,c){clearTimeout(a.reflowWaitTimeout);k(n).width()<f.width()?(a.reflowWaitCheckCount++,10>a.reflowWaitCheckCount&&(a.reflowWaitTimeout=setTimeout(function(){p(a,f,c)},250))):c.render()}
var f;k.fn.uilinks=function(){var a=this.data("_dynamic_links"),f=Array.prototype.slice.call(arguments,0),c=f[0];if(!a)return this;if("add"==c)c=f[1],f=k.extend({},{className:null,selected:!1},f[2]||{}),a.addLink({element:c,className:f.className,selected:f.selected});else if("insert"==c){var c=f[1],d=f[2],f=k.extend({},{className:null,selected:!1},f[3]||{});a.addLink({element:c,className:f.className,selected:f.selected},d)}else"remove"==c?a.removeLink(f[1]):"show"==c?(f=f[1]||a.moreLink().element,g(f,a.links(!0),a.cancelLink())):"hide"==c&&k.fn.uilinks.hide();return this};k.fn.uilinks.hide=function(){k.telligent.evolution.messaging.publish("ui.links.hide");h.actionSheet.hide();f&&f.glowPopUpPanel("hide")};var s={setup:function(){},add:function(a,f){a=k(a);var c=a.find("> li, > ul > li"),d=f.maxlinks,s=f.minlinks,b=null;a.removeClass("ui-links");var x={parent:a,links:[],onShowMore:function(a,f){g(b,a,f)}};d&&(x.maxLinks=parseInt(d,10));s&&(x.minLinks=parseInt(s,10));x.direction=f.direction;for(d=0;d<c.length;d++){var s=k(c[d]),h=s.children();r(h);var m=h.is("[data-selected]");h.is("[data-more]")?(b=h,x.moreLink={element:h,selected:m,className:s.get(0).className}):h.is("[data-cancel]")?x.cancelLink={element:h,selected:m,className:s.get(0).className}:x.links.push({element:h,selected:m,className:s.get(0).className})}
a.empty();var z=new e(x);a.show();f.reflowWaitCheckCount=0;f.reflowWaitTimeout=null;p(f,a,z);a.data("_dynamic_links",z);k(window).on("resized",function(a,f){f.oldWidth!=f.newWidth&&z.render()});k.telligent.evolution.messaging.subscribe("mobile.orientationchange",function(){n.setTimeout(function(){z.render()},300)})},minWidth:570};k.telligent=k.telligent||{};k.telligent.evolution=k.telligent.evolution||{};k.telligent.evolution.ui=k.telligent.evolution.ui||{};k.telligent.evolution.ui.components=k.telligent.evolution.ui.components||{};return k.telligent.evolution.ui.components.links=s},jQuery,window);t("component.masonry",["module.ui","plugin.evolutionMasonry"],function(b,e,h,m,k){b={setup:function(){},add:function(e,d){h(e).evolutionMasonry({columnClass:d.columnclass||h.fn.evolutionMasonry.defaults.columnClass}).css({visibility:"visible"})}};h.telligent=h.telligent||{};h.telligent.evolution=h.telligent.evolution||{};h.telligent.evolution.ui=h.telligent.evolution.ui||{};h.telligent.evolution.ui.components=h.telligent.evolution.ui.components||{};return h.telligent.evolution.ui.components.masonry=b},jQuery,window);t("component.moderate",["module.ui"],function(b,e,h,m){var k=function(b,d,g){e.telligent.evolution.post({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/abusereports.json",data:{ContentId:b,ContentTypeId:d},cache:!1,dataType:"json",success:function(c){g(c)}})};e.telligent.evolution.ui.components.moderate={setup:function(){},add:function(b,d){b=e(b);var g={contentId:d.contentid,contentTypeId:d.contenttypeid,supportsAbuse:"true"===d.supportsabuse,initialState:"true"===d.initialstate,onReport:k};if(d.configuration&&d.configuration.AdditionalLinks){var c=e.parseJSON(d.configuration.AdditionalLinks);if(!g.supportsAbuse&&0===c.length)return;g.onGetAdditionalLinks=function(a){a(c)}}else if(d.configuration&&d.configuration.AdditionalLinksUrl){if(!g.supportsAbuse&&0===d.configuration.AdditionalLinksUrl.length)return;g.onGetAdditionalLinks=function(a){e.telligent.evolution.get({url:d.configuration.AdditionalLinksUrl,cache:!1,dataType:"json",success:function(c){a(c.links||[])}})}}
if(g.supportsAbuse||g.onGetAdditionalLinks)d.configuration&&d.configuration.LinkClassName&&(g.linkClassName=d.configuration.LinkClassName),b.evolutionModerate(g)}};return{}},jQuery,window);t("component.page",["module.ui"],function(b,e,h,m){var k={};e.telligent.evolution.ui.components.page={setup:function(){},add:function(b,d){var g={currentPage:parseInt(d.currentpage,10),pageSize:parseInt(d.pagesize,10),totalItems:parseInt(d.totalitems,10),showPrevious:"undefined"===typeof d.configuration.ShowPrevious?!1:"true"===d.configuration.ShowPrevious,showNext:"undefined"===typeof d.configuration.ShowNext?!1:"true"===d.configuration.ShowNext,showFirst:"undefined"===typeof d.configuration.ShowFirst?!0:"true"===d.configuration.ShowFirst,showLast:"undefined"===typeof d.configuration.ShowLast?!0:"true"===d.configuration.ShowLast,showIndividualPages:"undefined"===typeof d.configuration.ShowIndividualPages?!0:"true"===d.configuration.ShowIndividualPages,numberOfPagesToDisplay:"undefined"===typeof d.configuration.NumberOfPagesToDisplay?5:parseInt(d.configuration.NumberOfPagesToDisplay,10),pageKey:d.pagekey,hash:d.configuration.Target,baseUrl:d.configuration.BaseUrl||window.location.href,template:"undefined"!==typeof d.configuration.Template?d.configuration.Template:' <% foreach(links, function(link, i) { %>      <% if(link.type === "first") { %>          <a href="<%: link.url %>" class="first" data-type="first" data-page="<%= link.page %>" data-selected="false"><span>&#171;</span></a>      <% } else if(link.type === "previous") { %>          <a href="<%: link.url %>" class="previous" data-type="previous" data-page="<%= link.page %>" data-selected="false"><span>&#60;</span></a>      <% } else if(link.type === "page") { %>          <a href="<%: link.url %>" class="page<%= link.selected ? " selected" : "" %>" data-type="page" data-page="<%= link.page %>" data-selected="<%= link.selected ? "true" : "false" %>"><span><%= link.page %></span></a>      <% } else if(link.type === "next") { %>          <a href="<%: link.url %>" class="next" data-type="next" data-page="<%= link.page %>" data-selected="false"><span>&#62;</span></a>      <% } else if(link.type === "last") { %>          <a href="<%: link.url %>" class="last" data-type="last" data-page="<%= link.page %>" data-selected="false"><span>&#187;</span></a>      <% } %>      <% if(i < (links.length - 1)) { %>          <span class="separator"></span>      <% } %>  <% }); %> '};d.pagedcontenturl&&(k[d.pagedcontentpagingevent]={onPage:function(a,c,f){f=f||{};f[d.pagekey]=a;a=e.telligent.evolution.url.modify({url:d.pagedcontenturl,query:f});e.telligent.evolution.get({url:a,cache:!1,success:function(a){c(a)}})}},e.extend(g,{onPage:function(a,c,f){k[d.pagedcontentpagingevent].onPage(a,c,f)},refreshOnAnyHashChange:"true"===d.loadonanyhashchange,pagedContentContainer:"#"+d.pagedcontentwrapperid,pagedContentPagingEvent:d.pagedcontentpagingevent,pagedContentPagedEvent:d.pagedcontentpagedevent,transition:d.configuration.Transition,transitionDuration:"undefined"===typeof d.configuration.TransitionDuration?200:parseInt(d.configuration.TransitionDuration,10)}));e(b).evolutionPager(g);if("true"===d.loadingindicator){var c=e("#"+d.pagedcontentwrapperid),a=e("<div></div>").css({backgroundColor:"#fff",position:"absolute",opacity:0.75,zIndex:1});e.telligent.evolution.messaging.subscribe(d.pagedcontentpagingevent,function(){var d=c.offset();a.hide().appendTo("body").css({width:c.width(),height:c.height(),top:d.top,left:d.left}).show()});e.telligent.evolution.messaging.subscribe(d.pagedcontentpagedevent,function(){a.hide()})}}};return{}},jQuery,window);t("component.poll",["module.ui"],function(b,e,h,m){var k="Vote",n="Voting Ends: {0}",d="View Results",g="Voting Ended: {0}",c="Your vote was received, check back when the poll expires to view the result.",a="Total Votes : {0}",r="You voted for '{0}'.",p="You have already voted for '{0}'.",f="Please login to vote",s=function(a,f,c){var d=e.telligent.evolution.parseDate(f.ExpiredDate);null==f.ExpiredDate||new Date<d?(d=v(a,f,c),a.append(d)):e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+f.Id+"/summary.json",cache:!1,success:function(d){d=l(a,f,d.VoteSummary,c);a.html(d)}})},l=function(f,c,d,p){f=e("<div></div>").addClass("polling-results");var l=0,q=e("<div></div>").addClass("CommonPollArea"),u=e('<div class="CommonPollContent"></div>'),v=e('<div class="PollResultsArea"></div>'),s=e('<ul class="CommonPollAnswerList"><ul>');q.append(e("<h4></h4>").addClass("CommonPollQuestion").html(c.Question));c.Description&&u.append(e("<div></div>").addClass("CommonPollDescription").html(c.Description));e.each(d.VoteCount,function(a,f){l+=d.VoteCount[a]});e.each(c.Options,function(a,f){if(0==d.VoteCount[a])s.append(e('<li><div class="CommonPollAnswer0">'+f.Option+' (0%)</div><div class="CommonPollResultGraph"><img src="/Themes/generic/images/poll_a_start.gif" class="poll-graph-start" height="19"><img src="/Themes/generic/images/poll_none_mid.gif" class="poll-graph-none" height="19" width="257"><img src="/Themes/generic/images/poll_none_end.gif" class="poll-graph-none-end" height="19"></div><li>'));else{var c=Math.round(d.VoteCount[a]*(100/l)),p=Math.round(2.5*c),g=250-p;100==c?s.append(e('<li><div class="CommonPollAnswer100">'+f.Option+" ("+c+'%)</div><div class="CommonPollResultGraph"><img src="/Themes/generic/images/poll_a_start.gif" class="poll-graph-start" height="19"><img src="/Themes/generic/images/poll_a_mid.gif" class="poll-graph" height="19" width="257"><img src="/Themes/generic/images/poll_a_end.gif" class="poll-graph-end" height="19"></div></li>')):s.append(e('<li><div class="CommonPollAnswerOther">'+f.Option+" ("+c+'%)</div><div class="CommonPollResultGraph"><img src="/Themes/generic/images/poll_a_start.gif" class="poll-graph-start" height="19"><img src="/Themes/generic/images/poll_a_mid.gif" class="poll-graph" height="19" width="'+p+'"><img src="/Themes/generic/images/poll_a_end.gif" class="poll-graph-end" height="19"><img src="/Themes/generic/images/poll_none_mid.gif" class="poll-graph-none" height="19" width="'+g+'"><img src="/Themes/generic/images/poll_none_end.gif" class="poll-graph-none-end" height="19"></div></li>'))}});v.append(s);e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+c.Id+"/vote.json",cache:!1,success:function(a){if(null==a.Errors){if(a.OptionId){var f=null;e.each(c.Options,function(c,d){d.OptionId==a.OptionId&&(f=d.Option)});f&&v.append(e("<div></div>").addClass("votedOn").html(r.replace("{0}",f)))}}else alert(a.Errors)}});u.append(v);var b=e('<div class="CommonPollFooter"></div>'),A=e('<ul class="CommonPollFooterList"></ul>');A.append(e("<li></li>").addClass("voteCount").html(a.replace("{0}",l)));b.append(A);q.append(u);q.append(b);f.append(q);if(null!=c.ExpiredDate){var q=e.telligent.evolution.parseDate(c.ExpiredDate),h=new Date>q?g:n,k=e("<li></li>").addClass("expiresDate");A.append(k);e.telligent.evolution.language.formatDateAndTime(q,function(a){k.html(h.replace("{0}",a))})}
p.reporturl&&(p=e("<li></li>").html(e("<a></a>").attr("target","_blank").attr("href",p.reporturl).html("User Vote Report")),A.append(p));return f},v=function(c,l,g){var q=e("<div></div>").addClass("pollWrapper").css("visibility","none"),v=e.telligent.evolution.user.accessing.isSystemAccount,s=e("<div></div>").addClass("CommonPollArea"),b=e('<div class="CommonPollContent"></div>'),A=e('<div class="PollVoteArea"></div>'),r=e('<ul class="CommonPollAnswerList"><ul>');s.append(e("<h4></h4>").addClass("CommonPollQuestion").html(l.Question));l.Description&&b.append(e("<div></div>").addClass("CommonPollDescription").html(l.Description));e.each(l.Options,function(a,f){var c=e("<div></div>").addClass("content-scrollable-wrapper").attr("style","max-width: 100%;overflow: auto;max-height: none"),d=e("<table></table>").attr("border","0").attr("cellpadding","0").attr("cellspacing","0"),p=e("<tbody></tbody>"),q=e("<tr></tr>"),u=e("<td></td>").addClass("CommonPollRadio").html(e('<input type="radio" />').val(f.OptionId).attr("name",l.Id).addClass("options-"+l.Id).attr("id",l.Id+"-"+f.OptionId)),v=e("<td></td>").addClass("CommonPollAnswer").html(f.Option);r.append(e("<li></li>").after().html(c.append(d.append(p.append(q)))));g.readOnly||q.append(u);q.append(v)});A.append(r);b.append(A);var h=e('<div class="CommonPollFooter"></div>'),m=e('<ul class="CommonPollFooterList"></ul>');g.readOnly||A.append(e('<input type="button"></input>').addClass("internal-link voteButton").val(k));v&&(v=e("<li></li>").html(e("<a></a>").attr("href",g.loginurl).html(f)),m.append(v));e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+l.Id+"/vote.json",cache:!1,success:function(f){if(f.OptionId){var q=null;e.each(l.Options,function(a,c){c.OptionId==f.OptionId&&(q=c.Option)});r.append(e("<div></div>").addClass("alreadyVotedOn").html(p.replace("{0}",q)))}
null==f.Errors?e("#"+l.Id+"-"+f.OptionId).attr("checked","checked"):alert(f.Errors);if(l.ShowResultsBeforeVote||l.ShowResultsBeforeExpiration&&f.OptionId){m.append(e("<li></li>").after().html('<a href="javascript:void(0)" class="internal-link viewResults">'+d+"</a>"));u(c,l,g);var v=e("<li></li>").addClass("voteCount");m.append(v);e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+l.Id+"/summary.json",cache:!1,success:function(f){if(null==f.Errors){var c=0;e.each(f.VoteSummary.VoteCount,function(a,d){c+=f.VoteSummary.VoteCount[a]});v.html(a.replace("{0}",c))}else alert(f.Errors)}})}
if(null!=l.ExpiredDate){var s=e.telligent.evolution.parseDate(l.ExpiredDate),b=e("<li></li>").addClass("expiresDate");m.append(b);e.telligent.evolution.language.formatDateAndTime(s,function(a){b.html(n.replace("{0}",a))})}
g.reporturl&&(s=e("<li></li>").html(e("<a></a>").attr("target","_blank").attr("href",g.reporturl).html("User Vote Report")),m.append(s))}});h.append(m);s.append(b);s.append(h);q.append(s);return q},u=function(a,f,c){e(".viewResults",a).on("click",function(){e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+f.Id+"/summary.json",success:function(d){null==d.Errors?(d=l(a,f,d.VoteSummary,c),a.html(d)):alert(d.Errors)}})})},q=function(a,f,d){e(".voteButton",a).on("click",function(){var p=e(".options-"+f.Id+":checked").val();e.telligent.evolution.post({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+f.Id+"/vote.json",data:{OptionId:p},success:function(p){e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+f.Id+"/summary.json",cache:!1,success:function(c){null==c.Errors?(c=l(a,f,c.VoteSummary,d),a.html(c)):alert(c.Errors)},error:function(a){e.telligent.evolution.notifications.show(c,{type:"success",duration:5E3})}})}})})},A=function(l){l&&(null!=l.voteButton&&(k=l.voteButton),null!=l.expiredText&&(n=l.expiredText),null!=l.viewResults&&(d=l.viewResults),null!=l.alreadyExpiredText&&(g=l.alreadyExpiredText),null!=l.voteMessage&&(c=l.voteMessage),null!=l.voteCountText&&(a=l.voteCountText),null!=l.votedOnText&&(r=l.votedOnText),null!=l.alreadyVotedOnText&&(p=l.alreadyVotedOnText),null!=l.anonymousUserLoginText&&(f=l.anonymousUserLoginText))};e.telligent.evolution.ui.components.poll={setup:function(){},add:function(a,f){A(f.resources);var c=f.pollid,d={reporturl:f.reporturl,loginurl:f.loginurl,readOnly:"True"===f.readonly};e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+c+".json",success:function(f){null==f.Errors?(s(a,f.Poll,d),q(a,f.Poll,d)):alert(f.Errors)}})}};return{}},jQuery,window);t("component.previewhtml",["module.ui"],function(b,e,h,m){function k(d,g,c,a){d={url:d,width:0,height:0,outputIsPersisted:!1};g&&(d.width=g);c&&(d.height=c);a&&(d.outputIsPersisted=a);return e.telligent.evolution.get({url:jQuery.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ui/preview.json",data:d})}
function n(d,g){var c=d.parent().width();c>g.width&&(c=g.width);k(g.url,c,g.height,g.persist).done(function(a){d.html(a.Html)})}
e.telligent.evolution.ui.components.previewhtml={setup:function(){},add:function(d,g){n(d,g);e(window).on("resized",function(){n(d,g)})}};return{}},jQuery,window);t("component.rate",["module.ui"],function(b,e,h,m){e.telligent.evolution.ui.components.rate={setup:function(){},add:function(b,n){var d=e.extend({},{isReadOnly:"true"===n.readonly,value:parseFloat(n.initialvalue),ratingCount:parseFloat(n.initialcount)});d.value*=e.fn.evolutionStarRating.defaults.maxRating;d.onRate=function(d){n.contentid&&n.contenttypeid&&(d/=e.fn.evolutionStarRating.defaults.maxRating,d={ContentId:n.contentid,ContentTypeId:n.contenttypeid,Value:d},n.ratingtypeid&&(d.TypeId=n.ratingtypeid),e.telligent.evolution.post({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ratings.json",data:d,success:function(c){c={ContentId:n.contentid};n.ratingtypeid&&(c.TypeId=n.ratingtypeid);e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/rateditem.json",data:c,success:function(a){a&&a.RatedItem&&a.RatedItem.AverageValue?e(b).evolutionStarRating("option",{value:a.RatedItem.AverageValue*e.fn.evolutionStarRating.defaults.maxRating,ratingCount:a.RatedItem.Count}):e(b).evolutionStarRating("option",{value:0,ratingCount:0})}})}}))};0==d.ratingCount&&d.isReadOnly||e(b).evolutionStarRating(d)}};return{}},jQuery,window);t("component.resizedimage",["module.ui"],function(b,e,h,m){e.telligent.evolution.ui.components.resizedimage={setup:function(){},add:function(b,n){b.removeClass("ui-resizedimage");e.telligent.evolution.media.previewHtml(n.src,{width:n.width||0,height:n.height||0,resizeMethod:n.resizemethod||"ZoomAndCrop",success:function(d){d=e(d.html);d.attr("style")&&b.attr("style",d.attr("style"));b.attr("src",d.attr("src"))}})}};return{}},jQuery,window);t("component.searchresult",["module.ui","module.template"],function(b,e,h,m,k){var n=h.telligent.evolution.template.compile('<% foreach(properties, function(property) { %> <li class="property-item"><%= property %></li> <% }); %> '),d=function(d,c){h.telligent.evolution.get({url:d,dataType:"json",success:function(a){a&&c(n(a))}})};h.telligent.evolution.ui.components.searchresult={setup:function(){},add:function(g,c){if(c.detailsurl){var a=null,b=g.find("ul.details"),p=b.html();g.bind("mouseenter",function(f){null!==a?b.html(a):d(c.detailsurl,function(f){a=f;b.html(a)})}).bind("mouseleave",function(a){b.html(p)})}}};return{}},jQuery,window);t("component.select",["module.ui"],function(b,e,h,m){var k=null,n=null;e.telligent.evolution.ui.components.select={setup:function(){},add:function(d,g){d.removeClass("ui-select");if(!k){var c=e('<span class="uiselect"><span>measure</span></span>').css({display:"none"}).appendTo(d.parent());k=c.height();n=parseInt(c.css("border-top-width")||"0")+parseInt(c.css("border-bottom-width")||"0");c.remove()}
if(d.is("select")&&570<e(window).width()){var c=d.find("option").length*k,a=d.width();150>a&&(a=150);d.show().glowDropDownList({selectedItemWidth:a+20,selectedItemHeight:k,itemsWidth:a+20,itemsHeight:c+n+4,buttonImageUrl:null,className:"uiselect"})}}};return{}},jQuery,window);t("component.tag",["module.ui"],function(b,e,h,m){var k=function(b,d,g){var c=e(g);c.html("");if(b){var a=!0;e.each(b.split(/,/),function(g,p){var f=e.trim(p);f&&(a?a=!1:c.append(", "),d?c.append(e("<a>").attr("rel","nofollow tag").attr("href",d.replace(/{tag}/g,e.telligent.evolution.url.encodePathComponent(e.telligent.evolution.html.decode(f)))).text(f)):c.append(f))})}};e.telligent.evolution.ui.components.tag={setup:function(){},add:function(b,d){var g=jQuery("<span></span>");e(b).append(g);k(d.tags,d.urlformat,g);var c=null;"true"!==d.readonly&&(c=e('<a href="javascript:void(0);" class="internal-link edit-tags"></a>'),e(b).append(c),c.evolutionInlineTagEditor({allTags:e.grep(d.selectabletags.split(","),function(a){return a}),currentTags:e.grep(d.tags.split(","),function(a){return a}),onSave:function(a,c){var p={Tags:a&&0<a.length?a.join(","):"",ContentId:d.contentid,ContentTypeId:d.contenttypeid};d.tagtypeid&&(p.TypeId=d.tagtypeid);e.telligent.evolution.put({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/contenttags.json",data:p,success:function(a){k(p.Tags,d.urlformat,g);c()}})}}))}};return{}},jQuery,window);t("component.theater",["module.ui"],function(b,e,h,m){var k=function(){return{add:function(a,f,c,d,g,u){a={ContentId:a,ContentTypeId:f,Body:d};"undefined"!==typeof c&&null!==c&&(a.CommentTypeId=c);e.telligent.evolution.post({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/comments.json",data:a,cache:!1,success:g,error:u})},del:function(a,f,c){e.telligent.evolution.del({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/comments/{CommentId}.json",data:{CommentId:a},cache:!1,success:f,error:c})}}}(),n=function(a,f){e.telligent.evolution.get({url:a,cache:!1,success:function(a){f(a)}})},d=function(a){var f=a.content.find(".content-item.action.likes");e.telligent.evolution.messaging.subscribe("ui.like",function(c){if(c.contentId!==a.contentId||"undefined"!==typeof a.typeId&&(""!==a.typeId&&"00000000-0000-0000-0000-000000000000"!==a.typeId)&&c.typeId!==a.typeId){var d=a.content.find('li.comment[data-commentid="'+c.contentId+'"][data-contenttypeid="'+c.contentTypeId+'"]');0<c.count?d.addClass("with-likes"):d.removeClass("with-likes")}else 0<c.count?f.removeClass("without-likes").addClass("with-likes"):f.removeClass("with-likes").addClass("without-likes")})},g=function(c){c.content.find(".internal-link.comment").bind("click",function(a){a.preventDefault();c.content.find(".comment-form").show().find("textarea").focus()});c.content.off("focus",".comment-form textarea").on("focus",".comment-form textarea",function(f){c.content.find(".comment-form").addClass("with-avatar");f=e(f.target);f.data("theater_composer_inited")||(f.data("theater_composer_inited",!0),f.evolutionComposer({plugins:["mentions","hashtags"]}),f.evolutionComposer("onkeydown",function(f){13===f.which&&(f=e(f.target).evolutionComposer("val"),0<e.trim(f).length&&(c.content.find(".comment-form textarea").attr("disabled",!0).blur(),k.add(c.contentId,c.contentTypeId,c.typeId,f,function(f){e.evolutionTheater.refresh(a);e.telligent.evolution.messaging.publish("activity.commentadded",f)},function(a){c.content.find(".comment-form textarea").evolutionComposer("val","").trigger("keydown").trigger("keyup").removeAttr("disabled").closest(".comment-form").removeClass("with-avatar")})));return!0}))});c.content.delegate(".comment-form textarea","blur",function(a){c.content.find(".comment-form").removeClass("with-avatar")})},c=function(a){a.content.find(".internal-link.start-conversation").bind("click",function(a){a.preventDefault();a=e(a.target).data("conversationurl");e.glowModal(a,{width:550,height:360})})},a=function(a,f){var c=e("<div></div>").html(f).find("ul.content-list.comments");a.find("ul.content-list.comments").replaceWith(c)},r=function(c){c.content.find(".content-item.comment").bind("evolutionModerateLinkClicked",function(f,c){var d=e(this).data("commentid");k.del(d,function(f){e.evolutionTheater.refresh(a);e.telligent.evolution.messaging.publish("activity.commentremoved",f)},function(a){})})};e.telligent.evolution.ui.components.theater={setup:function(){},add:function(a,f){a=e(a);a.bind("click",function(b){!0!==a.data("disabletheater")&&(b.preventDefault(),e(window).width()<(f.minwidth||600)||e.evolutionTheater.show({content:function(a){n(f.theaterurl,a)},nextContent:function(a){var f=a.find("a[data-nexttheaterurl]").data("nexttheaterurl");if(f&&0<f.length)return function(a){n(f,a)}},previousContent:function(a){var f=a.find("a[data-previoustheaterurl]").data("previoustheaterurl");if(f&&0<f.length)return function(a){n(f,a)}},loaded:function(a){var f;f=e(a);a=f.find(".activity-story");f={content:f,story:a};null!==a&&e.extend(f,{contentId:a.data("contentid"),contentTypeId:a.data("contenttypeid"),typeId:a.data("typeid")});d(f);g(f);c(f);r(f)}}))})}};return{}},jQuery,window);t("component.tip",["module.ui"],function(b,e,h,m){e.telligent.evolution.ui.components.tip={setup:function(){},add:function(b,n){e(b).evolutionTip({attribute:n.tipcontent||e.fn.evolutionTip.defaults.attribute})}};return{}},jQuery,window);t("component.tourtip",["module.ui","module.tourtips"],function(b,e,h,m,k){h.telligent.evolution.ui.components.tourtip={setup:function(){},add:function(b,d){h.telligent.evolution.tourTips.register({key:d.tourtipkey,message:d.tourtipmessage,index:d.tourtipindex,element:b.get(0)})}};return{}},jQuery,window);t("component.viewhtml",["module.ui","module.messaging"],function(b,e,h,m,k){function n(a,c,d,f){a={url:a,width:0,height:0,outputIsPersisted:!1};c&&(a.width=c);d&&(a.height=d);f&&(a.outputIsPersisted=f);return h.telligent.evolution.get({url:jQuery.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ui/view.json",data:a})}
function d(a,c,p){m.clearTimeout(c.reflowWaitTimeout);if("none"==a.css("display")||"none"==a.parent().css("display")||document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.fullscreenElement)m.setTimeout(function(){d(a,c,p)},499);else if(!p||"viewable"==c.resizedBy){var f=h(m).width(),b=a.parent().width(),l=a.parent().height(),v="parent",u=l;if(f<b)c.reflowWaitCheckCount++,10>c.reflowWaitCheckCount&&(c.reflowWaitTimeout=setTimeout(function(){d(a,c,p)},250));else{0==b&&(b=a.parents(".layout-region-inner").width());b>c.width&&(b=c.width);if(0==l||"parent"!=c.resizedBy||l>g)u=g,l=Math.round(0.8*g),v="viewable";l>c.height&&0<c.height&&(u=l=c.height,v="configured");c.resizedBy=v;if(u!=c.lastHeight||b!=c.lastHeight)
if(f=a.width(),v=a.height(),!(b==c.lastWidth&&u<=c.lastHeight&&(v<=u||0==u)||u==c.lastHeight&&b<=c.lastWidth&&(f<=b||0==b))){var q=[],e=!0;a.children().each(function(){h(this);var a=(this.nodeName||"").toLowerCase();"video"==a||"audio"==a||"embed"==a||"object"==a?q.push(this):"script"!=a&&("style"!=a&&"meta"!=a)&&(e=!1)});e&&0<a.children().length?(h.each(q,function(){var a=h(this),f=a.width()||1,c=a.height()||1;f/b>c/l?a.attr({width:b+"px !important",height:c*b/f+"px !important"}):a.attr({width:f*l/c+"px !important",height:l+"px !important"})}),a.trigger("rendered")):n(c.url,b,l,c.persist).done(function(f){c.lastHtml!=f.Html&&(a.html(f.Html),c.lastHtml=f.Html,a.trigger("rendered"))});c.lastHeight=u;c.lastWidth=b}}}}
var g,c=!1;h.telligent.evolution.ui.components.viewhtml={setup:function(){g=h(window).height();h(window).on("resized",function(){c||(g=h(window).height())});h.telligent.evolution.messaging.subscribe("window.scrollableheight",function(a){g=a.height;c=!0})},add:function(a,c){c.resizedBy="parent";c.lastWidth=-1;c.lastHeight=-1;c.lastHtml="";c.reflowWaitCheckCount=0;c.reflowWaitTimeout=null;d(a,c,!1);h(window).on("resized",function(){d(a,c,!1)});h.telligent.evolution.messaging.subscribe("window.scrollableheight",function(g){d(a,c,!0)})}};return{}},jQuery,window);t("component.webpreview",["module.ui"],function(b,e,h,m){e.telligent.evolution.ui.components.webpreview={setup:function(){},add:function(b,n){var d=n.configuration.url,g,c;"undefined"!==typeof n.configuration.maximagewidth&&(g=n.configuration.maximagewidth);"undefined"!==typeof n.configuration.maximageheight&&(c=n.configuration.maximageheight);b.hasClass("preview")||(b.parents(".ui-theater").data("disabletheater",!0),0>n.configuration.url.indexOf(e.telligent.evolution.site.getBaseUrl(!0))&&b.parents(".ui-theater").attr("target","_blank"));e.telligent.evolution.preview.load(d,{maxImageWidth:g,maxImageHeight:c,success:function(a){a&&(a=e.telligent.evolution.preview.render(a,{template:e.telligent.evolution.preview.defaults.template}),"undefined"!==typeof a&&(null!==a&&0<a.length)&&b.html(a))}})}};return{}},jQuery,window);t("composers",["composer.hashtags","composer.mentions","composer.urlhighlight","composer.autocomplete"],function(){return{}});t("composer.autocomplete",["plugin.evolutionComposer"],function(b,e,h,m){var k={},n=null,d=function(){};b=function(){return{init:function(c){d=c.settings.onSuggestionList||e.fn.evolutionComposer.plugins.autocomplete.defaults.onSuggestionList;selectSuggestion=c.settings.onSuggestionSelect||e.fn.evolutionComposer.plugins.autocomplete.defaults.onSuggestionSelect;c.input.bind(g.selectedEventName,function(){selectSuggestion(g.selection());c.release()})},onTransform:function(c){},shouldActivate:function(c){return(c=c.currentWord())&&c.value&&3<=c.value.length?!0:!1},onActivate:function(c){c.data("_autocomplete_composer_active",!0);e(document).bind("click.autocomplete",function(a){c.release();e(document).unbind(".autocomplete")})},onDeactivate:function(c){c.data("_autocomplete_composer_active",!1);g.hide();c.input.focus()},val:function(c,a){return c},onkeydown:function(c,a){if(27===a.which)return c.release(),!1;if(13===a.which||9===a.which){var d=g.selection();d&&selectSuggestion(d);c.release();return!1}
return 38===a.which?(g.moveHighlightUp(),!1):40===a.which?(g.moveHighlightDown(),!1):!0},onkeypress:function(c,a){return!0},oninput:function(c,a){clearTimeout(n);g.loading(c.input);n=setTimeout(function(){var a=c.val();if(1<a.length){var b=function(a){null!==a&&0<a.length?g.show(c.input,a,c.settings.suggestionHeader):c.release()};"undefined"!==typeof k[a]?c.data("_autocomplete_composer_active")&&b(k[a]):d(a,function(f){c.data("_autocomplete_composer_active")&&(k[a]=f,c.val()==a&&b(f))})}else c.release()},500);return!0},defaults:{}}}();var g=function(){var c=null,a=null,d=null,g=null,f=null,b=function(l){g=l;if(null===c){c=e('<div class="composer-suggestion-selector popup-list content"></div>').hide().appendTo(e("body"));d=e('<span class="heading"></span>').appendTo(c);a=e('<ul class="content-list content suggestions"></ul>').appendTo(c);f=e('<li class="loading">...</li>');var q=0,b=["<strong>&bull;</strong>&bull;&bull;","&bull;<strong>&bull;</strong>&bull;","&bull;&bull;<strong>&bull;</strong>"];setInterval(function(){q+=1;3===q&&(q=0);f.get(0).innerHTML=b[q]},175);c.delegate("li","click",function(a){null!==g&&(c.find("li.highlight").removeClass("highlight"),e(this).addClass("highlight"),g.trigger(v.selectedEventName))})}},l=function(){if(null!==g){var a=g.offset(),f=e(g);c.css({width:f.outerWidth()-2,top:a.top+f.outerHeight()-1,left:a.left})}},v={selectedEventName:"SUGGESTION_SELECTED",show:function(f,g,p){d.html(p);b(f);l();c.hide();a.empty();e.each(g,function(f,c){var d=e('<li class="content-item suggestion">'+c.viewHtml+"</li>");d.data("suggestionData",c);a.append(d)});c.show()},hide:function(){null!==c&&(c.hide(),a.empty())},loading:function(d){b(d);l();c.hide();a.empty().append(f);c.show()},moveHighlightUp:function(){var a=c.find("li.suggestion");if(0!==a.length){var f=a.length;e.each(a,function(a,c){e(c).hasClass("highlight")&&(f=a,e(c).removeClass("highlight"))});0>f-1&&(f=a.length);e(a.get(f-1)).addClass("highlight")}},moveHighlightDown:function(){var a=c.find("li.suggestion");if(0!==a.length){var f=-1;e.each(a,function(a,c){e(c).hasClass("highlight")&&(f=a,e(c).removeClass("highlight"))});f+1>=a.length&&(f=-1);e(a.get(f+1)).addClass("highlight")}},selection:function(){var a=c.find("li.suggestion");if(0===a.length)return null;var f=a.filter("li.suggestion.highlight");return null!==f&&0<f.length?f.data("suggestionData"):e(a.get(0)).data("suggestionData")}};return v}();e.fn.evolutionComposer.plugins.autocomplete=b;e.fn.evolutionComposer.plugins.autocomplete.defaults={onSuggestionList:function(c,a){a(null)},onSuggestionSelect:function(c){}};return{}},jQuery,window);t("composer.hashtags",["plugin.evolutionComposer"],function(b,e,h,m){b=function(){for(var b=null,d={},g=function(a){var f=a.data("_tagged_tags");if("undefined"===typeof f||null===f)f=[],a.data("_tagged_tags",f);return f},c=function(a){return a.currentWord({additionalWhiteSpaceSymbols:"()\"'<>.,".split("")})},a=function(a,f,d,l,b){var q=g(a)||[];q[q.length]=f;d&&(d=c(a),a.replace(d.start,d.stop+1,f.decodedName+(l?" ":"")),f=d.start+(f.decodedName+(l?" ":"")).length,l=a.input.get(0),l.setSelectionRange?l.setSelectionRange(f,f):l.createTextRange&&(l=l.createTextRange(),l.collapse(!0),l.moveEnd("character",f),l.moveStart("character",f),l.select()));r(a);a.data("_hashtag_composer_active",!1);k.hide();a.input.focus();b&&a.release()},r=function(a){var c=g(a).reverse(),d=a.val();a.clearHighlights(a.settings.highlightClass||f);var l={};e.each(c,function(g,b){if(b&&null!==b.decodedName&&0<b.decodedName.length){var q=d.indexOf(b.decodedName);if(0>q||l[q])c.splice(g,1);else
for(;0<=q;)a.addHighlight({start:q,stop:b.decodedName.length+q,className:a.settings.highlightClass||f}),l[q]=!0,q=d.indexOf(b.decodedName,q+1)}});a.renderHighlights()},p=function(a){return 2<a.length&&0===a.indexOf("#")&&!b.test(a.substr(1))&&isNaN(parseInt(a[1],10))},f="composer-hashtag-highlight",s=function(){},l=null,v=null,u=/\[tag:([^\]]+)\]/gi,b=RegExp("["+"-_~`!@#$%^&*()=+{[}]\\|;:'\",<.>/? ".replace("]","\\]")+"]","i"),q=0;33>q;q++)d["-_~`!@#$%^&*()=+{[}]\\|;:'\",<.>/? ".charCodeAt(q)]=!0;return{init:function(f){s=f.settings.onTagList||e.fn.evolutionComposer.plugins.hashtags.defaults.onTagList;f.input.bind(k.selectedEventName,function(){a(f,k.selection(),!0,!0,!0)});f.input.bind("blur",function(){setTimeout(function(){f.data("_hashtag_composer_active")&&f.release()},500)})},onTransform:function(f,c){if(c)
for(var d=f.val(),l=u.exec(d);null!==l&&0<=l.index&&null!==l&&1<l.length;){var g={token:"[tag:"+l[1]+"]",name:"#"+l[1],decodedName:"#"+e.telligent.evolution.html.decode(l[1])};f.val(f.val().replace(l[0],g.name));a(f,g,!1);l=u.exec(d)}
r(f)},shouldActivate:function(a){return p(c(a).value)},onActivate:function(a){a.data("_hashtag_composer_active",!0);e(document).bind("click.ui-composer-hashtags",function(){a.release();e(document).unbind(".ui-composer-hashtags")})},onDeactivate:function(f){var d=c(f);p(d.value)&&a(f,{decodedName:d.value,name:d.value,token:"[tag:"+d.value.substr(1)+"]"},!0,!1,!1);f.data("_hashtag_composer_active",!1);k.hide();f.input.focus()},val:function(a,f){var c=g(f);e.each(c,function(f,c){a=a.replace(RegExp(e.telligent.evolution.regex.encode(c.decodedName),"g"),c.token)});return a},onkeydown:function(f,c){if(27===c.which||32===c.which)f.release();else if(13===c.which||9===c.which){var d=k.selection();if(d)return a(f,d,!0,!0,!0),!1;f.release()}else{if(38===c.which)return k.moveHighlightUp(),!1;if(40===c.which)return k.moveHighlightDown(),!1}
return!0},onkeypress:function(a,f){"undefined"!==typeof d[f.which]&&a.release();return!0},oninput:function(a,f){if(!p(c(a).value))return a.release(),!0;if(a.currentWord().value==v&&a.data("_hashtag_composer_active"))return!0;clearTimeout(l);k.loading(a.input);l=setTimeout(function(){var f=v=a.currentWord().value;p(f)?2<=f.length&&s(f.substr(1),function(d){if(a.data("_hashtag_composer_active")){d&&(d=e.map(d,function(a){return{name:a.name,token:a.token,decodedName:e.telligent.evolution.html.decode(a.name)}}));var l=c(a).value;l==f&&p(l)&&null!==d&&0<d.length?k.show(a.input,d,f):k.hide()}}):a.release()},500);return!0}}}();var k=function(){var b=null,d=null,g=null,c=function(a){d=a;if(null===b){b=e('<ul class="composer-hashtag-selector"></ul>').hide().appendTo(e("body"));g=e('<li class="loading">...</li>');var f=0,c=["<strong>&bull;</strong>&bull;&bull;","&bull;<strong>&bull;</strong>&bull;","&bull;&bull;<strong>&bull;</strong>"];setInterval(function(){f+=1;3===f&&(f=0);g.get(0).innerHTML=c[f]},175);b.delegate("li","click",function(a){null!==d&&(b.find("li.highlight").removeClass("highlight"),e(this).addClass("highlight"),d.trigger(r.selectedEventName))})}},a=function(){if(null!==d){var a=d.offset(),f=e(d);b.css({width:f.outerWidth()-2,top:a.top+f.outerHeight()-1,left:a.left})}},r={selectedEventName:"HASHTAG_SELECTED",show:function(d,f,g){c(d);a();b.hide().empty();var l=RegExp(e.telligent.evolution.regex.encode(e.telligent.evolution.html.encode(g)),"i");e.each(f,function(a,f){var c=f.name.match(l),c=null!==c?e("<li>"+f.name.replace(l,"<strong>"+c[0]+"</strong>")+"</li>"):e("<li>"+f.name+"</li>");c.data("tagData",f);b.append(c)});b.show()},hide:function(){null!==b&&b.hide().empty()},loading:function(d){c(d);a();b.hide().empty().append(g).show()},moveHighlightUp:function(){var a=b.find("li");if(0!==a.length){var f=a.length;e.each(a,function(a,c){e(c).hasClass("highlight")&&(f=a,e(c).removeClass("highlight"))});0>f-1&&(f=a.length);e(a.get(f-1)).addClass("highlight")}},moveHighlightDown:function(){var a=b.find("li");if(0!==a.length){var f=-1;e.each(a,function(a,c){e(c).hasClass("highlight")&&(f=a,e(c).removeClass("highlight"))});f+1>=a.length&&(f=-1);e(a.get(f+1)).addClass("highlight")}},selection:function(){var a=b.find("li");if(0===a.length)return null;var f=a.filter("li.highlight");return null!==f&&0<f.length?f.data("tagData"):e(a.get(0)).data("tagData")}};return r}();e.fn.evolutionComposer.plugins.hashtags=b;e.fn.evolutionComposer.plugins.hashtags.defaults={onTagList:function(b,d){e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/hashtags.json?IncludeFields=Token,PreviewHtml",data:{QueryText:b,PageSize:5},cache:!1,dataType:"json",success:function(b){b.HashTags&&0<b.HashTags.length?(b=e.map(b.HashTags,function(c){return{name:c.PreviewHtml,token:c.Token}}),d(b)):d(null)}})}};return{}},jQuery,window);t("composer.mentions",["plugin.evolutionComposer"],function(b,e,h,m){b=function(){var b={};allowedSpacesKey="_allowed_spaces";isActiveKey="_hashtag_composer_active";caretPosition=0;getMentions=function(d){var b=d.data("_mentioned_mentionables");if("undefined"===typeof b||null===b)b=[],d.data("_mentioned_mentionables",b);return b};setCursorPosition=function(d,b){var c=d.input.get(0);c.setSelectionRange?c.setSelectionRange(b,b):c.createTextRange&&(c=c.createTextRange(),c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select())};mentionMentionable=function(d,b,c){var a=getMentions(d)||[];a[a.length]=b;c&&(c=effectiveCurrentWord(d),d.replace(c.start,c.stop+1,b.decodedName+" "),allowedSpaces(d,0),setCursorPosition(d,c.start+(b.decodedName+" ").length));d.release();updateHighlights(d)};updateHighlights=function(d){var b=getMentions(d),c=d.val();d.clearHighlights(d.settings.highlightClass||mentionHighlightClass);e.each(b,function(a,e){if(e&&null!==e.decodedName&&0<e.decodedName.length){var p=c.indexOf(e.decodedName);if(0>p)b.splice(a,1);else
for(;0<=p;)d.addHighlight({start:p,stop:e.decodedName.length+p,className:d.settings.highlightClass||mentionHighlightClass}),p=c.indexOf(e.decodedName,p+1)}});d.renderHighlights()};mentionHighlightClass="composer-mentionable-mention-highlight";getMentionables=function(){};getContent=getMentionablesTimeout=null;allowedSpaces=function(d,b){return"undefined"!==typeof b?(d.data("_allowed_spaces",b),b):d.data("_allowed_spaces")||0};effectiveCurrentWord=function(d){var g=d.val().substring(0,caretPosition),c=null;e.each(b,function(a,d){if(null!==d&&0<d.length&&g.match("@"+e.telligent.evolution.regex.encode(a)+"$"))return c="@"+a,!1});if(null!==c){var a=g.length-c.length;allowedSpaces(d,c.split(" ").length-1);return{value:c,start:a,stop:a+c.length}}
return d.currentWord({caretPosition:caretPosition,allowedWhiteSpaceBeforeCaret:allowedSpaces(d),additionalWhiteSpaceSymbols:"()\"'<>.,".split("")})};collectRawTokens=function(d){for(var b=d.val(),c=[];null!==(tokens=rToken.exec(b));)c.push({match:tokens,contentTypeId:tokens[2],contentId:tokens[1]});0<c.length&&getContent&&getContent(c,function(a){e.each(a,function(a,c){var f={token:c.match[0],name:c.name,decodedName:c.name};d.val(d.val().replace(f.token,f.name));mentionMentionable(d,f,!1)});d.input.trigger("input")})};rToken=/\[mention:([^:]+):([^\]]+)\]/gi;return{init:function(d){getMentionables=d.settings.onMentionableList||e.fn.evolutionComposer.plugins.mentions.defaults.onMentionableList;getContent=d.settings.onListContent||e.fn.evolutionComposer.plugins.mentions.defaults.onListContent;d.input.bind(k.selectedEventName,function(){mentionMentionable(d,k.selection(),!0)});d.input.bind({blur:function(){setTimeout(function(){d.data(isActiveKey)&&d.release()},500)},keydown:function(){caretPosition=d.caretPosition()+1}})},onTransform:function(d,b){b&&collectRawTokens(d);updateHighlights(d)},shouldActivate:function(d){return 0===effectiveCurrentWord(d).value.indexOf("@")},onActivate:function(d){d.data(isActiveKey,!0);e(document).bind("click.mentions",function(){d.release();e(document).unbind(".mentions")})},onDeactivate:function(d){d.data(isActiveKey,!1);k.hide();d.input.focus();allowedSpaces(d,0)},val:function(d,b){var c=getMentions(b);e.each(c,function(a,c){d=d.replace(c.decodedName,c.token)});return d},onkeydown:function(d,b){if(32===b.which)allowedSpaces(d,allowedSpaces(d)+1);else{if(27===b.which)return d.release(),!1;if(13===b.which||9===b.which){var c=k.selection();c?mentionMentionable(d,c,!0):d.release();return!1}
if(38===b.which)return k.moveHighlightUp(),!1;if(40===b.which)return k.moveHighlightDown(),!1}
return!0},onkeypress:function(d,b){return!0},oninput:function(d,g){clearTimeout(getMentionablesTimeout);k.loading(d.input);getMentionablesTimeout=setTimeout(function(){var c=effectiveCurrentWord(d).value.substring(1);if(1<c.length){var a=function(a){null!==a&&0<a.length?k.show(d.input,a,c):d.release()};"undefined"!==typeof b[c]?d.data(isActiveKey)&&a(b[c]):getMentionables(c,function(g){d.data(isActiveKey)&&(g&&(g=e.map(g,function(a){return{name:a.name,token:a.token,decodedName:e.telligent.evolution.html.decode(a.name)}})),b[c]=g,effectiveCurrentWord(d).value.substring(1)==c&&a(g))})}else d.release()},500);return!0}}}();var k=function(){var b=null,d=null,g=null,c=function(a){d=a;if(null===b){b=e('<ul class="composer-mentionable-selector"></ul>').hide().appendTo(e("body"));g=e('<li class="loading">...</li>');var f=0,c=["<strong>&bull;</strong>&bull;&bull;","&bull;<strong>&bull;</strong>&bull;","&bull;&bull;<strong>&bull;</strong>"];setInterval(function(){f+=1;3===f&&(f=0);g.get(0).innerHTML=c[f]},175);b.delegate("li","click",function(a){null!==d&&(b.find("li.highlight").removeClass("highlight"),e(this).addClass("highlight"),d.trigger(r.selectedEventName))})}},a=function(){if(null!==d){var a=d.offset(),f=e(d);b.css({width:f.outerWidth()-2,top:a.top+f.outerHeight()-1,left:a.left})}},r={selectedEventName:"MENTIONABLE_SELECTED",show:function(d,f,g){c(d);a();b.hide().empty();var l=RegExp(e.telligent.evolution.regex.encode(e.telligent.evolution.html.encode(g)),"i");e.each(f,function(a,f){var c=f.name.match(l),c=null!==c?e("<li>"+f.name.replace(l,"<strong>"+c[0]+"</strong>")+"</li>"):e("<li>"+f.name+"</li>");c.data("mentionableData",f);b.append(c)});b.show()},hide:function(){null!==b&&b.hide().empty()},loading:function(d){c(d);a();b.hide().empty().append(g).show()},moveHighlightUp:function(){var a=b.find("li");if(0!==a.length){var f=a.length;e.each(a,function(a,c){e(c).hasClass("highlight")&&(f=a,e(c).removeClass("highlight"))});0>f-1&&(f=a.length);e(a.get(f-1)).addClass("highlight")}},moveHighlightDown:function(){var a=b.find("li");if(0!==a.length){var f=-1;e.each(a,function(a,c){e(c).hasClass("highlight")&&(f=a,e(c).removeClass("highlight"))});f+1>=a.length&&(f=-1);e(a.get(f+1)).addClass("highlight")}},selection:function(){var a=b.find("li");if(0===a.length)return null;var f=a.filter("li.highlight");return null!==f&&0<f.length?f.data("mentionableData"):e(a.get(0)).data("mentionableData")}};return r}();e.fn.evolutionComposer.plugins.mentions=b;e.fn.evolutionComposer.plugins.mentions.defaults={onListContent:function(b,d){e.telligent.evolution.batch(function(){e.each(b,function(d,c){e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/genericcontent/{contentId}/{contentTypeId}.json",data:{contentId:c.contentId,contentTypeId:c.contentTypeId}}).then(function(a){c.name=a.Content.HtmlName})})}).then(function(){d(b)})},onMentionableList:function(b,d){e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/mentionables.json?IncludeFields=Token,PreviewHtml",data:{QueryText:b,PageSize:20},cache:!1,dataType:"json",success:function(b){b.Mentionables&&0<b.Mentionables.length?(b=e.map(b.Mentionables,function(c){return{name:c.PreviewHtml,token:c.Token}}),d(b)):d(null)}})}};return{}},jQuery,window);t("composer.urlhighlight",["plugin.evolutionComposer"],function(b,e,h,m){var k=/(\b(http):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;b=function(){var b={init:function(d){d.highlighClassName=d.highlighClassName||b.defaults.highlighClassName},onTransform:function(d){var b;b=(d.val()||"").match(k);b=null!==b&&0<b.length?b[0]:null;if(null!==b){var c;c=d.data("_composer_urlpreview_data");if(null===c||"undefined"===typeof c)c={},d.data("_composer_urlpreview_data",c);var a=d.val().indexOf(b);if(0<=a&&"undefined"===typeof c.lastRange||c.lastRange.start!==a||c.lastRange.stop!==a+b.length)c.lastRange={start:a,stop:a+b.length},d.clearHighlights(d.highlighClassName),d.addHighlight({start:a,stop:a+b.length,className:d.highlighClassName}),d.renderHighlights()}else d.clearHighlights(d.highlighClassName)},shouldActivate:function(d){return!1},val:function(d,b){return d},onkeydown:function(d,b){return!0},oninput:function(d,b){return!0},defaults:{highlighClassName:"composer-url-highlight",loadingText:"..."}};return b}();e.fn.evolutionComposer.plugins.urlhighlight=b;return{}},jQuery,window);t("events","events.gestures events.hashchange events.notifications events.pointers events.scroll events.textinput events.resized".split(" "),function(){return{}});t("events.gestures",["events.pointers"],function(b,e,h){function m(a){return(new Date).getTime()-(a||(new Date).getTime())}
function k(a,f,c,d){a=180*Math.atan2(f-d,c-a)/Math.PI;0>a&&(a+=360);return a}
function n(a){if(315<a||45>=a)return"right";if(45<a&&135>=a)return"up";if(135<a&&225>=a)return"left";if(225<a&&315>=a)return"down"}
function d(a,f,c){if(a.selector){var d=e(f.originalEvent.target);if(d.is(a.selector)||0<d.closest(a.selector).length)return c.call(this,f)}else return c.call(this,f)}
function g(a,f,c,d){c.target=a.target;d?f.trigger(c):f&&f.triggerHandler(c);return a.cancelBubble==r?!0:a.cancelBubble}
function c(c,b){var l;c.on(s.start+a,function(a){return d(b,a,function(){l&&h.clearTimeout(l.tapHoldDurationout);l={startTime:(new Date).getTime(),startPageX:a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageX:0,startPageY:a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageY:0,held:!1,tapHoldDurationout:null,lastTap:l?l.lastTap:0};l.tapHoldDurationout=h.setTimeout(function(){l.held=!0;g(a,c,{type:p.taphold,pointers:a.pointers,originalEvent:a,duration:m(l.startTime||(new Date).getTime())})},f.tapHoldDuration)})});c.on(s.move+a,function(a){return d(b,a,function(){if(l){var d=Math.abs(Math.sqrt(Math.pow((a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageX:0)-l.startPageX,2)+Math.pow((a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageY:0)-l.startPageY,2)));l.tapHoldDurationout&&d>=f.tapHoldMaxDistance&&h.clearTimeout(l.tapHoldDurationout);if(l.panning||a&&a.pointers&&1===a.pointers.length&&d>f.panMinDistance){var d=k(l.startPageX,l.startPageY,a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageX:0,a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageY:0),b=n(d),d={type:p.panStart,pointers:a?a.pointers:[],originalEvent:a,angle:d,direction:b,pageX:a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageX:0,pageY:a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageY:0};l.panning||(l.panning=!0,g(a,c,d,!0));d.type=p.pan;g(a,c,d,!0)}}})});c.on(s.end+a,function(a){return d(b,a,function(){if(l){h.clearTimeout(l.tapHoldDurationout);var d=m(l.startTime||(new Date).getTime()),b=Math.abs(Math.sqrt(Math.pow((a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageX:0)-l.startPageX,2)+Math.pow((a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageY:0)-l.startPageY,2)));if(!l.held&&d<=f.tapMaxDuration&&b<=f.tapMaxDistance)d={type:p.tap,pointers:a?a.pointers:[],originalEvent:a,duration:d},g(a,c,d),b=(new Date).getTime(),l.lastTap&&b-l.lastTap<=f.doubleTapMaxDuration?(d.type=p.doubleTap,g(a,c,d),l.lastTap=0):l.lastTap=b;else if(l.panning&&g(a,c,{type:p.panEnd,pointers:a?a.pointers:[],originalEvent:a,pageX:a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageX:0,pageY:a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageY:0},!0),a&&a.pointers&&1===a.pointers.length&&b/d>=f.swipeMinVelocity){var e=k(l.startPageX,l.startPageY,a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageX:0,a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageY:0),b=n(e),d={type:p.swipe,pointers:a?a.pointers:[],originalEvent:a,duration:d,angle:e,direction:b,pageX:a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageX:0,pageY:a&&a.pointers&&1<=a.pointers.length?a.pointers[0].pageY:0};g(a,c,d,!0);d.type+=b;g(a,c,d,!0)}else l={}}})})}
var a="._gesture_events_namespace",r,p={tap:"tap",taphold:"taphold",doubleTap:"doubletap",swipe:"swipe",swipeUp:"swipeup",swipeDown:"swipedown",swipeRight:"swiperight",swipeLeft:"swipeleft",panStart:"panstart",pan:"pan",panEnd:"panend"},f={tapHoldDuration:400,tapHoldMaxDistance:1,tapMaxDuration:350,tapMaxDistance:10,swipeMinVelocity:0.5,panMinDistance:10,doubleTapMaxDuration:250},s={start:"pointerstart",move:"pointermove",end:"pointerend"};if(e.telligent&&e.telligent.evolution&&e.telligent.evolution._SUPPRESS_GESTURES)return{eventNamespace:a.substring(1)};window.onorientationchange===r&&(e.event.special.orientationchange={setup:function(){var a=e(window),f,c=function(){a.trigger("orientationchange")};window.addEventListener("resize",function(a){h.clearTimeout(f);f=h.setTimeout(c,100)},!1)}});var l={"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"};e.each(p,function(f,d){e.event.special[d]={add:function(a){var f=e(this);d===p.taphold&&f.css(l);f.data("._gesture_events_bound")||(f.data("._gesture_events_bound",!0),c(f,a))},remove:function(f){f=e(this);f.off(a);f.removeData("._gesture_events_bound")}}});e.gestures={defaults:f};return{eventNamespace:a.substring(1)}},jQuery,window);t("events.hashchange",function(b,e){var h="onhashchange"in e&&(void 0===document.documentMode||7<document.documentMode),m=e.location.href,k=b(e),n;h||(b.event.special.hashchange={setup:function(){n||(n=setInterval(function(){e.location.href!==m&&(m=e.location.href,k.trigger("hashchange"))},b.hashChangeSettings.interval))}});b.hashChangeSettings={interval:10};return{}},jQuery,window);t("events.textinput",function(b,e,h){var m=!b.browser.msie&&"oninput"in document.createElement("input")&&"oninput"in document.createElement("textarea");b.event.special.textinput={setup:function(){var e=b(this);if(m)e.bind("input",function(d){e.trigger("textinput",{which:d.which})});else{var h;e.bind({keydown:function(d){h=e.val()},keyup:function(d){var b=e.val();b!==h&&e.trigger("textinput",{which:d.which});h=b}})}}};return{}},jQuery,window);t("events.notifications",["module.messaging"],function(b,e,h){e.telligent.evolution.messaging.subscribe("socket.connected",function(){e.telligent.evolution.sockets.notifications.on("received",function(b){e.telligent.evolution.messaging.publish("notification.raised",b)});e.telligent.evolution.sockets.notifications.on("read",function(b){e.telligent.evolution.messaging.publish("notification.read",b)})});return{}},jQuery,window);t("events.pointers",["lib.util"],function(b,e,h,m){function k(a,f){this.pageX=a;this.pageY=f}
function n(a){return[new k(a.pageX,a.pageY)]}
function d(a){if(!a||!a.length)return[];for(var f=[],c=0;c<a.length;c++)f[f.length]=new k(a[c].pageX,a[c].pageY);return f}
function g(a){return[new k(a.originalEvent.pageX,a.originalEvent.pageY)]}
function c(a,f,c,d){a&&a.length&&a.triggerHandler({type:f,pointers:c,originalEvent:d,target:d.target})}
function a(a,f,c){if(a.selector){var d=e(f.originalEvent.target);if(d.is(a.selector)||0<d.closest(a.selector).length)return c.call(this,f)}else c.call(this,f)}
function r(){var a={pointermove:"tepointermove",pointerstart:"tepointerstart",pointerend:"tepointerend"};e.fn.on=e.fn.bind=p(e.fn.on,a,!0);e.fn.trigger=p(e.fn.trigger,a,!1);e.fn.off=e.fn.unbind=p(e.fn.off,a,!1)}
function p(a,f,c){return function(){var d=Array.prototype.slice.call(arguments,0);if(c&&1===d.length&&e.isPlainObject(d[0])){var b=d[0];e.each(f,function(a,f){b[a]!=m&&(b[f]=b[a],delete b[a])});return a.call(this,b)}
if("string"!=typeof d[0])return a.apply(this,d);eventParts=d[0].split(".",2);if(2==eventParts.length&&"_pointer_events_namespace"==eventParts[1])return a.apply(this,d);f[eventParts[0]]&&(eventParts[0]=f[eventParts[0]],d[0]=eventParts.join("."));return a.apply(this,d)}}
var f={start:"pointerstart",testart:"tepointerstart",move:"pointermove",temove:"tepointermove",end:"pointerend",teend:"tepointerend"},s={pointerMoveThrottle:10};if(e.telligent&&e.telligent.evolution&&e.telligent.evolution._SUPPRESS_POINTERS)return{eventNamespace:"_pointer_events_namespace"};var l=window.PointerEvent?{down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel"}:{down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel"};h=[{test:function(){return"onmspointerdown"in window},add:function(d,e){var q=!1;d.on(l.down+"._pointer_events_namespace",function(b){a(e,b,function(){c(d,f.testart,g(b),b);q=!0})});d.on(l.move+"._pointer_events_namespace",b.throttle(function(b){a(e,b,function(){q&&c(d,f.temove,g(b),b)})},s.pointerMoveThrottle));d.on(l.up+"._pointer_events_namespace",function(b){a(e,b,function(){q=!1;c(d,f.teend,g(b),b)})});d.on(l.cancel+"._pointer_events_namespace",function(b){a(e,b,function(){q=!1;c(d,f.teend,g(b),b)})})},remove:function(a){a.off("._pointer_events_namespace")}},{test:function(){return"ontouchstart"in window},add:function(l,e){var g=!1;l.on("touchstart._pointer_events_namespace",function(b){a(e,b,function(){c(l,f.testart,d(b.originalEvent.touches),b);g=!0})});l.on("touchmove._pointer_events_namespace",b.throttle(function(b){a(e,b,function(){g&&c(l,f.temove,d(b.originalEvent.touches),b)})},s.pointerMoveThrottle));l.on("touchend._pointer_events_namespace",function(b){a(e,b,function(){g=!1;c(l,f.teend,d(b.originalEvent.changedTouches),b)})});l.on("touchcancel._pointer_events_namespace",function(b){a(e,b,function(){g=!1;c(l,f.teend,d(b.originalEvent.changedTouches),b)})})},remove:function(a){a.off("._pointer_events_namespace")}},{test:function(){return"onmousedown"in document},add:function(d,l){var e=!1;d.on("mousedown._pointer_events_namespace",function(b){1===b.which&&a(l,b,function(){c(d,f.testart,n(b),b);e=!0})});d.on("mousemove._pointer_events_namespace",b.throttle(function(b){a(l,b,function(){e&&c(d,f.temove,n(b),b)})},s.pointerMoveThrottle));d.on("mouseup._pointer_events_namespace",function(b){1===b.which&&a(l,b,function(){e=!1;c(d,f.teend,n(b),b)})});d.on("mouseleave._pointer_events_namespace",function(b){a(l,b,function(){e&&c(d,f.teend,n(b),b);e=!1})})},remove:function(a){a.off("._pointer_events_namespace")}}];for(var v,u=0;u<h.length;u++)!v&&h[u].test()&&(v=h[u]);if(v){for(var q in f)e.event.special[f[q]]={add:function(a){var f=e(this);f.data("._pointer_events_bound")||(f.data("._pointer_events_bound",!0),v.add(f,a))},remove:function(a){a=e(this);v.remove(a);a.removeData("._pointer_events_bound")}};e.pointer={defaults:s};r();return{eventNamespace:"_pointer_events_namespace"}}},jQuery,window);t("events.resized",function(b,e,h){b.event.special.resized={setup:function(h){function k(){r=n.width();p=n.height();if(Math.abs(r-c)>g||Math.abs(p-a)>g){var f={oldWidth:c,oldHeight:a,newWidth:r,newHeight:p};c=n.width();a=n.height();n.trigger("resized",f)}}
var n=b(window),d,g=0,c=0,a=0,r,p;(function(){var f=b("<div></div>").css({position:"absolute",width:"100px",height:"100px",overflow:"scroll",left:"-200px"});b("body").append(f);try{var d=f.get(0);g=d.offsetWidth-d.clientWidth}catch(l){g=0}
f.remove();c=n.width();a=n.height()})();n.on("resize",function(){e.clearTimeout(d);d=e.setTimeout(k,b.event.special.resized.defaults.throttle)})}};b.event.special.resized.defaults={throttle:150};return{}},jQuery,window);t("events.scroll",function(b,e){(function(){var e={};b.event.special.scrollend={setup:function(m){e=b.extend({padding:150,delay:250,initialLoadAttempts:10,initialLoadDelay:1E3},m)},add:function(){var m=b(this);if(!m.data("_scrollend_init")){m.data("_scrollend_init",!0);var k=this===document,n=k?b(window):m,d=!1,g=-1,c=0,a=!1,r=function(){return k?b("body").prop("scrollHeight")||n.height()+1:n.prop("scrollHeight")||n.height()+1};n.on("scroll",function(){d=!0});setInterval(function(){if(d){var a;a=k?b(m).height()-b(m).scrollTop()-b(n).height()<=e.padding:m.scrollTop()+m.innerHeight()+e.padding>=m[0].scrollHeight;a?m.trigger("scrollend"):d=!1}},e.delay);setInterval(function(){if(a){var d=n.height();d>g&&(g=d,r()<=g&&(c=0,a=!1))}else g=n.height(),r()<=g+10&&c<e.initialLoadAttempts?(c++,m.trigger("scrollend")):a=!0},e.initialLoadDelay)}}}})();(function(){var e={};b.event.special.scrolltop={setup:function(m){e=b.extend({padding:150,delay:250},m)},add:function(){var m=b(this);if(!m.data("_scrolltop_init")){m.data("_scrolltop_init",!0);var k=!1;(this===document?b(window):m).on("scroll",function(){k=!0});setInterval(function(){k&&(m.scrollTop()<=e.padding&&m.trigger("scrolltop"),k=!1)},e.delay)}}}})();return{}},jQuery,window);t("lib","lib.actionSheet lib.dynamicLinks lib.messageLinks lib.scrollFix lib.sheet lib.sheetProvider lib.util lib.touchEventAdapter lib.globalConfiguration".split(" "),function(){return{}});t("lib.actionSheet",function(b,e,h){function m(e,d){var g=b(document.createElement("li"));g.append(d);e.append(g)}
function k(e,d){var g=b(document.createElement("ul"));g.addClass("action-sheet");for(var c=0;c<d.length;c++)m(g,d[c]);g.on("click","a",function(a){e.sheet.hide()});e.sheet.show(g);e.content=g}
return function(b){b=b||{};b.sheet=b.sheet;return{show:function(d){d=d||{};d.links=d.links||[];k(b,d.links||[])},hide:function(){b.sheet.hide()},content:function(){return b.content}}}},jQuery,window);t("lib.dynamicLinks",["lib.scrollFix","lib.actionSheet"],function(b,e,h,m,k){function n(a){return isNaN(a)?0:a}
function d(a){return a.outerWidth()+n(parseInt(a.css("marginLeft"),10))+n(parseInt(a.css("marginRight"),10))+3}
function g(a){"vertical"==a.direction?(a.parent.empty(),a.listWrapper=h(document.createElement("div")).addClass("container").appendTo(a.parent),a.list=h(document.createElement("ul")).appendTo(a.listWrapper).css(f)):(a.parent.css({overflow:"hidden"}).empty(),a.listWrapper=h(document.createElement("div")).css(p).addClass("container").appendTo(a.parent),a.parentWidth=a.listWrapper.outerWidth(),a.list=h(document.createElement("ul")).appendTo(a.listWrapper).css(f),a.listWrapper.on("pan swipe pointerend",function(a){"left"!=a.direction&&"right"!=a.direction||a.stopPropagation()}),b.preventBounce(a.listWrapper))}
function c(a){a.additionalLinks=[];a.accumulatedWidth=0;a.preScrollTo=0;if("vertical"==a.direction){a.moreLink!=k&&(a.list.append(a.moreLink.element),a.moreLink.element.detach());for(var f=0;f<a.links.length;f++){var c=a.links[f];if(f>a.maxLinks-1)a.additionalLinks.push(c);else{var b=h(document.createElement("li")).append(c.element);b.addClass(c.className).appendTo(a.list)}}}else{a.moreLinkWidth=0;a.moreLink!=k&&(a.moreLink.element.css(s),a.list.append(a.moreLink.element),a.moreLinkWidth=d(a.moreLink.element),a.moreLink.element.detach());for(var l=f=0;f<a.links.length;f++)
if(c=a.links[f],b=h(document.createElement("li")).append(c.element),0!=b.children().length){b.css({display:"inline"}).addClass(c.className);b.appendTo(a.list);c.element.css(s);var e=d(c.element);c.selected&&(a.preScrollTo=a.accumulatedWidth);a.accumulatedWidth+e>a.parentWidth&&l+1<=a.minLinks?a.accumulatedWidth+=e:0<a.additionalLinks.length||(a.accumulatedWidth+e+a.moreLinkWidth>a.parentWidth||l+1>a.maxLinks)&&l+1>a.minLinks?(b.detach(),a.additionalLinks.push(c)):a.accumulatedWidth+=e;l++}}}
function a(a){if("vertical"==a.direction)0<a.additionalLinks.length&&(a.moreLink&&a.onShowMore)&&(h(document.createElement("li")).append(a.moreLink.element).addClass(a.moreLink.className).appendTo(a.list),a.moreLink.element.off(r).on("click"+r,function(f){a.onShowMore(a.additionalLinks,a.cancelLink);return!1})),a.list.css({visibility:"visible"});else{0<a.additionalLinks.length&&(a.moreLink&&a.onShowMore)&&(h(document.createElement("li")).css({display:"inline"}).append(a.moreLink.element).addClass(a.moreLink.className).appendTo(a.list),a.accumulatedWidth+=a.moreLinkWidth,a.moreLink.element.off(r).on("click"+r,function(f){a.onShowMore(a.additionalLinks,a.cancelLink);return!1}));a.list.css({width:a.accumulatedWidth>a.parentWidth?a.accumulatedWidth:a.parentWidth,visibility:"visible"});a.listWrapper.get(0).scrollLeft=a.preScrollTo-a.preScrollOffset;var f=a.list.height();0!=f&&(a.parent.css({height:f}),a.listWrapper.css({height:f+20}))}}
var r="._dynamicLinks",p={overflow:"hidden","overflow-x":"auto"},f={visible:"hidden","list-style":"none",padding:"0px",margin:"0px",overflow:"hidden"},s={"float":"left"},l=function(f){var d=h.extend({},l.defaults,f||{});return{render:function(){g(d);c(d);a(d)},addLink:function(f,b){b!=k?d.links.splice(b,0,f):d.links[d.links.length]=f;g(d);c(d);a(d)},removeLink:function(f){d.links=h.grep(d.links,function(a){return!h(a.element).is(f)});g(d);c(d);a(d)},links:function(a){return a?d.additionalLinks:d.links},cancelLink:function(){return d.cancelLink},moreLink:function(){return d.moreLink}}};l.defaults={preScrollOffset:10,minLinks:0,maxLinks:50,direction:"vertical",parent:null,links:[],moreLink:null,cancelLink:null,onShowMore:function(a,f){}};return l},jQuery,window);t("lib.globalConfiguration",function(){return{baseUrl:"",authorizationCookieName:"AuthorizationCookie",defaultErrorMessage:"An error occured while communicating with the server.",defaultMultiErrorMessagePrefix:"The following errors occured while communicating with the server:\t ",isRemote:!1,remoteUrlEncodePattern:"",accessingUserId:0,accessingUserIsSystemAccount:!0}});t("lib.messageLinks",function(b,e,h){return function(e){e=e||{};var h=b(e.parent);return{handle:function(e){h.on(e||"click","a[data-messagename]",function(d){d.preventDefault();d.stopPropagation();d.stopImmediatePropagation();b.telligent.evolution.messaging.publish(b(this).data("messagename"),{target:this})})}}}},jQuery,window);t("lib.scrollFix",function(b,e,h){function m(b){var e,d=b.get(0);b.on("pointerstart",function(b){e=d.scrollTop;0>=e&&(d.scrollTop=1);e+d.offsetHeight>=d.scrollHeight&&(d.scrollTop=d.scrollHeight-d.offsetHeight-1);originalScrollLeft=d.scrollLeft;0>=originalScrollLeft&&(d.scrollLeft=1);originalScrollLeft+d.offsetWidth>=d.scrollWidth&&(d.scrollLeft=d.scrollWidth-d.offsetWidth-1)})}
return{preventBounce:function(e){e=e||b("body").children().first();m(e)},fix:function(b){b.on("touchmove.scrollfix mousemove.scrollfix mspointermove.scrollfix",function(b){b.originalEvent.preventDefault()})},unfix:function(b){b.off(".scrollfix")}}},jQuery,window);t("lib.sheet",["lib.scrollFix","module.messaging"],function(b,e,h,m,k){function n(a){a.inited||(a.inited=!0,a.backDrop=h(document.createElement("div")).css({backgroundColor:a.backgroundColor,opacity:0.01,zIndex:100,position:"fixed",top:0,left:0,display:"none","-webkit-transform":"translate3d(0,0,0)","-webkit-backface-visibility":"hidden",transform:"translate3d(0,0,0)"}).appendTo(a.parent),a.sheet=h(document.createElement("div")).css({zIndex:101,position:"fixed",left:0,top:0,display:"none","-webkit-transform":"translate3d(0,0,0)","-webkit-backface-visibility":"hidden",transform:"translate3d(0,0,0)"}).appendTo(a.parent).addClass(a.cssClass),a.sheet.on("click","a",function(){var a=h(this);(a=a.attr("href")||a.closest("[href]").attr("href"))&&(1<a.length&&h.telligent&&h.telligent.evolution&&h.telligent.evolution.mobile)&&h.telligent.evolution.mobile.load(a)}),r(a))}
function d(a){a.windowWidth=0<window.innerWidth?window.innerWidth:screen.width;a.windowHeight=0<window.innerHeight?window.innerHeight:screen.height;a.visible?(a.backDrop.css({width:a.windowWidth,height:a.windowHeight}),a.sheet.css({width:a.windowWidth,maxHeight:a.maxHeightPerent*a.windowHeight})):(a.backDrop&&a.backDrop.css({width:a.windowWidth,height:a.windowHeight}),a.sheet&&a.sheet.css({width:a.windowWidth,maxHeight:a.maxHeightPerent*a.windowHeight}))}
function g(a,f,c){c=c||a.animationDuration;a.backDrop.evolutionTransform({opacity:a.backDrop.css("opacity")}).evolutionTransform({opacity:0.01+f*a.backgroundOpacity},{duration:c,easing:a.animationEasing});a.sheet.evolutionTransform({y:a.windowHeight-f*a.sheet.outerHeight(),x:0},{duration:c,easing:a.animationEasing});1<=f?a.onOpened&&(m.clearTimeout(a.openedTimeout),a.openedTimeout=m.setTimeout(function(){a.onOpened.apply(this);m.clearTimeout(a.openedTimeout)},c)):0>=f&&a.onClosed&&(m.clearTimeout(a.closedTimeout),a.closedTimeout=m.setTimeout(function(){a.onClosed.apply(this);m.clearTimeout(a.closedTimeout)},c))}
function c(a,f){a.visible||(h("body").css({height:"100%",overflow:"scroll"}),a.visible=!0,a.onOpening&&a.onOpening.apply(this),n(a),d(a),a.sheet.empty().append(f),a.sheet.evolutionTransform({y:a.windowHeight,x:0}),a.backDrop.get(0).style.display="block",a.sheet.get(0).style.display="block",g(a,1))}
function a(a,f){a.visible&&(h("body").css({height:"100%",overflow:"visible"}),a.visible=!1,f=f||a.animationDuration,a.onClosing&&a.onClosing.apply(this),g(a,0),m.setTimeout(function(){a.visible||(a.visible=!1,a.backDrop.get(0).style.display="none",a.sheet.get(0).style.display="none")},f))}
function r(c){c.backDrop.on("tap",function(){a(c)})}
return function(b){b=b||{};b.maxHeightPerent=b.maxHeightPerent||0.85;b.parent=h(b.parent);b.cssClass=b.cssClass||"sheet";b.backgroundColor=b.backgroundColor||"#333";b.backgroundOpacity=b.backgroundOpacity||0.5;b.animationDuration=b.animationDuration||250;b.animationEasing=b.animationEasing||"cubic-bezier(0.160, 0.060, 0.450, 0.940)";b.visible=!1;h.telligent.evolution.messaging.subscribe("mobile.orientationchange",function(){m.setTimeout(function(){d(b)},300)});return{show:function(a){c(b,a)},hide:function(){a(b)}}}},jQuery,window);t("lib.sheetProvider",function(b,e,h){return{}},jQuery,window);t("lib.touchEventAdapter",["lib.util","events.gestures","events.pointers"],function(b,e,h,m,k,n){function d(a,f){p||(document.createEventObject?(trigger=document.createEventObject(),trigger.synthesized=!0,a.fireEvent("on"+f,trigger)):(trigger=document.createEvent("HTMLEvents"),trigger.initEvent(f,!0,!0),trigger.synthesized=!0,a.dispatchEvent(trigger)))}
function g(){var a=new Date,f=new Date,c;m("body").on("tap",function(b){if(p)return b.preventDefault(),b.stopPropagation(),!1;if("INPUT"==b.target.nodeName||"TEXTAREA"==b.target.nodeName||"SELECT"==b.target.nodeName||"FILE"==b.target.nodeName){if("INPUT"==b.target.nodeName&&"checkbox"==b.target.type.toLowerCase()||"radio"==b.target.type.toLowerCase()){var l=m(b.target);l.is(":checked")?setTimeout(function(){l.prop("checked",!1).trigger("change")},25):setTimeout(function(){l.prop("checked",!0).trigger("change")},25)}else{if("SELECT"==b.target.nodeName)return!0;f=new Date;c=m(b.target);if(c.is(":focus"))return!0;c.focus()}
b.stopPropagation();b.stopImmediatePropagation();b.preventDefault();return!1}
a=new Date;d(b.target,"click");b.stopPropagation();b.stopImmediatePropagation();b.preventDefault()});document.addEventListener("click",function(f){if(p)return f.preventDefault(),f.stopPropagation(),!1;var c=new Date-a;return(f.clientX||f.clientY||f.pageX||f.pageY||f.x||f.y)&&!f.synthesized&&350>c?(f.preventDefault(),f.stopPropagation(),!1):!0},!0);m("body").on("focus focusin","textarea,input",function(a){return 350>new Date-f?(a.preventDefault(),a.stopPropagation(),!1):!0})}
function c(){var f={mouseenter:"taphold",mouseover:"taphold",mouseleave:"pointerend",mousedown:"pointerstart",mouseup:"pointerend"};m.fn.on=m.fn.bind=a(m.fn.on,f,!0);m.fn.trigger=a(m.fn.trigger,f,!1);m.fn.off=m.fn.unbind=a(m.fn.off,f,!1)}
function a(a,f,c){return function(){var d=Array.prototype.slice.call(arguments,0);if(c&&1===d.length&&m.isPlainObject(d[0])){var b=d[0];m.each(f,function(a,f){b[a]!=n&&(b[f]=b[a],delete b[a])});return a.call(this,b)}
if("string"!=typeof d[0])return a.apply(this,d);eventParts=d[0].split(".",2);if(2==eventParts.length&&(eventParts[1]==e.eventNamespace||eventParts[1]==h.eventNamespace))return a.apply(this,d);f[eventParts[0]]&&(eventParts[0]=f[eventParts[0]],d[0]=eventParts.join("."));return a.apply(this,d)}}
function r(){var a={after:function(){p=!0;setTimeout(function(){p=!1},f)}};k.alert=b.wrap(k.alert,a);k.confirm=b.wrap(k.confirm,a)}
var p=!1,f=250,s="ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,l="_evolutionForceTouchRemap"in window,v=m.telligent&&m.telligent.evolution&&m.telligent.evolution._SUPPRESS_TOUCH_MOUSE_EVENTS,u=m.telligent&&m.telligent.evolution&&m.telligent.evolution._SUPPRESS_TOUCH_CLICK_EVENTS,q=k!=k.parent,A=/chrom(e|ium)/.test(navigator.userAgent.toLowerCase()),y=/android/.test(navigator.userAgent.toLowerCase()),x=/windows nt/.test(navigator.userAgent.toLowerCase()),D="MouseEvent"in window&&(!("ontouchstart"in window)||x),J=parseInt((/Chrome\/([0-9]+)/.exec(navigator.userAgent)||["0","0"])[1],10),z=document.querySelector&&document.querySelector('meta[name=viewport][content*="width=device-width"]')!==n,C=document.querySelector&&document.querySelector('meta[name=viewport][content*="user-scalable=no"]')!==n;return{adapt:function(){if(s||l)D||v||c(),u,m(function(){m("body").addClass("touch")})}}},jQuery,window);t("lib.util",function(b){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}
return{throttle:function(e,m){var k,n;return function(){var d=this;attemptAt=(new Date).getTime();args=arguments;k&&k+(m||50)>attemptAt?(b.clearTimeout(n),n=b.setTimeout(function(){k=attemptAt;e.apply(d,args)},m||50)):(k=attemptAt,e.apply(d,args))}},debounce:function(b,e){var k;return function(){var n=this,d=arguments;clearTimeout(k);k=setTimeout(function(){b.apply(n,d)},e||10)}},wrap:function(b,e){return function(){try{e.before&&e.before.apply(this,arguments)}catch(k){}
var n=b.apply(this,arguments);try{e.after&&e.after.apply(this,arguments)}catch(d){}
return n}},guid:function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}},window);t("modules","module.emailDigest module.administrationToolbar module.configuration module.editableGroup module.html module.language module.maxlength module.media module.messaging module.navigationConfirmation module.notifications module.preview module.regex module.sockets module.template module.ui module.url module.tourtips module.rest".split(" "),function(){return{}});t("module.emailDigest",function(b,e,h){b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});var m=function(e,h){0>h||(0<h&&""!=e.subscriptionId&&(""==e.context||"undefined"===e.contextId)?_showMessage(e,e.errorMessage):b.telligent.evolution.post({url:e.emailDigestUrl,data:{subscriptionId:e.subscriptionId,frequency:h,context:e.context,contextId:e.contextId},success:function(d){d=eval("("+d+")");var g=null;"create"==d.action?(e.subscriptionId=d.subscriptionId,e.frequency=h,1==h?g=e.dailyMessage:7==h&&(g=e.weeklyMessage)):"update"==d.action?(e.frequency=h,1==h?g=e.dailyMessage:7==h&&(g=e.weeklyMessage)):"delete"==d.action&&(e.subscriptionId="",e.frequency=0,"group"==e.context&&(g=e.unsubscribeGroupMessage));d.warnings&&0<d.warnings.length?_showMessage(e,d.warnings[0],"warning"):g&&_showMessage(e,g,"success");d={subscriptionId:e.subscriptionId,frequency:e.frequency,context:e.context,contextId:e.contextId,action:d.action};b(document).trigger("emailDigestSubscriptionChange",[d])},error:function(d,b,c){_showMessage(e,e.errorMessage,"error")}}))};_showMessage=function(e,h,d){b.telligent.evolution.notifications.show(h,{type:d,duration:5E3})};b.telligent.evolution.emailDigest={register:function(e){b("#"+e.selectPopupId).glowPopUpPanel({cssClass:"Panel",position:"updown",zIndex:100,hideOnDocumentClick:!0});b("#"+e.rollupWrapperId).click(function(){var h=b(this),d="",g="",c="";1==e.frequency?d="email-digest-selected":7==e.frequency?g="email-digest-selected":c="email-digest-selected";var a=h.outerWidth(),r=h.outerHeight(),h=h.offset(),d="<div class='email-digest-selectWrapper' style=\"min-width: "+(a-2)+'px;"><div frequency="1" class="email-digest-selectable '+e.selectableTag+" "+d+'"><span style="display: block; white-space: nowrap;">'+e.popupDaily+'</span></div><div frequency="7" class="email-digest-selectable '+e.selectableTag+" "+g+'"><span style="display: block; white-space: nowrap;">'+e.popupWeekly+'</span></div><div frequency="0" class="email-digest-selectable '+e.selectableTag+" "+c+'"><span style="display: block; white-space: nowrap;">'+e.popupUnsubscribe+"</span></div></div>";b("#"+e.selectPopupId).glowPopUpPanel("hide").glowPopUpPanel("html",d).glowPopUpPanel("show",h.left+4,h.top+5,a,r-10,!1)});b("."+e.selectableTag).live("click",function(){var h=b(this);h.hasClass("email-digest-selected")||(h=h.attr("frequency"),m(e,h))});b(document).bind("emailDigestSubscriptionChange",function(h,d){if(d.context==e.context&&d.contextId==e.contextId){var g="";"create"==d.action||"update"==d.action?("1"==d.frequency?g=e.rollupDaily:"7"==d.frequency&&(g=e.rollupWeekly),e.subscriptionId=d.subscriptionId):(g=e.rollupUnsubscribed,e.subscriptionId="");e.frequency=d.frequency;b("#"+e.rollupTextId).html(g)}})}};return{}},jQuery,window);t("module.administrationToolbar",function(b,e,h){b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});b.telligent.evolution.administrationToolbar={get:function(){var e;e=b(".admin-bar");0<e.length||(e=b("form"),1<e.length&&(e=b("body")),e.prepend(b('<div class="admin-bar-header"></div><div class="admin-bar site"></div><div class="admin-bar-footer"></div>')),e=b(".admin-bar"));return e}};return{}},jQuery,window);t("module.configuration",["lib.globalConfiguration"],function(b,e,h,m){function k(d,b,c){for(d+="";d.length<b;)d=c+d;return d}
var n=e.fn.filter;e.fn.filter=function(){arguments&&(0<arguments.length&&"string"==typeof arguments[0])&&(arguments[0]=arguments[0].replace(/:\[/g,"["));return n.apply(this,arguments)};document.cookie=".te.dpr="+(Math.round(window.devicePixelRatio||1)||1);m={formatDate:function(d){try{return[k(d.getFullYear(),4,"0"),"-",k(d.getMonth()+1,2,"0"),"-",k(d.getDate(),2,"0"),"T",k(d.getHours(),2,"0"),":",k(d.getMinutes(),2,"0"),":",k(d.getSeconds(),2,"0")].join("")}catch(b){}
return""},parseDate:function(){var d=(new Date).getTimezoneOffset();return function(b){var c,a=new Date;if(null===b||""===b)return a;if(null!=(c=/\/Date\((\d+)(?:-(\d+))?\)\//.exec(b)))return new Date(parseInt(c[1],10));if(null!=(c=/(\d{4,4})\-(\d{2,2})\-(\d{2,2})(?:T(\d{2,2}):(\d{2,2}):(?:(\d{2,2})(?:\.(\d{0,3}))?))([zZ]|([+\-])(((\d\d):(\d\d))|(\d\d\d\d)))?/.exec(b))){b=[a.getFullYear(),a.getMonth()+1,a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()];for(a=1;a<c.length&&8>a;a++)""!=c[a]&&void 0!=c[a]&&(b[a-1]=parseInt(c[a],10));b=new Date(b[0],b[1]-1,b[2],b[3],b[4],b[5],b[6]);if(c[8]){var e,p;"z"==c[8]||"Z"==c[8]?(e=0,p=1):c[9]&&c[12]&&c[13]?(e=60*parseInt(c[12],10)+parseInt(c[13],10),p="+"==c[9]?1:-1):c[9]&&c[10]&&(e=60*parseInt(c[10].substring(0,2),10)+parseInt(c[10].substring(2),10),p="+"==c[9]?1:-1);b=new Date(b.getTime()+-6E4*(p*e+d))}
return b}
throw"Invalid date format";}}(),site:{configure:function(d){e.extend(b,d);e.telligent.evolution.user={accessing:{id:b.accessingUserId,isSystemAccount:b.accessingUserIsSystemAccount}};e.fn.glowDateTimeSelector&&e.extend(e.fn.glowDateTimeSelector.defaults,{monthNames:b.monthNames,dayNames:b.dayNames,calendarButtonImageUrl:e.telligent.evolution.site.getBaseUrl()+"utility/images/glow/DateTimeSelectorCalendar.gif"});e.glowModal&&(e.extend(e.glowModal.defaults,{loadingHtmlUrl:"about:blank",windowCssClasses:["modal"],windowTitleCssClasses:["modal-title","modal-title-2","modal-title-3","modal-title-4"],windowCloseCssClasses:["modal-close"],windowContentCssClasses:["modal-content","modal-content-2"],windowMaskCssClasses:["modal-mask"],windowFooterCssClasses:["modal-footer","modal-footer-2","modal-footer-3"],windowResizeCssClasses:["modal-resize"],zIndex:2E4}),h.Telligent_Modal={GetWindowOpener:function(d,c){return e.glowModal.opener(d,c)},IsShown:function(d){return e.glowModal.visible(d)},Resize:function(d,c,a,b){e.glowModal.resize(d,c,a,b)},MoveTo:function(d,c,a){e.glowModal.moveTo(d,c,a)},Open:function(d,c,a,b,p,f,s,l,v){e.glowModal(d,{width:c,height:a,onClose:b,x:p,y:f,ignoreCloseAndAnimation:s,isManuallyresized:l,openerWindow:v})},Close:function(d,c){e.glowModal.close(d,c)},Refresh:function(d){e.glowModal.refresh(d)}});e.fn.glowDropDownList&&e.extend(e.fn.glowDropDownList.defaults,{buttonImageUrl:e.telligent.evolution.site.getBaseUrl()+"utility/images/glow/DropDownListButton.gif"});e.fn.glowColorSelector&&e.extend(e.fn.glowColorSelector.defaults,{blendImageUrl:e.telligent.evolution.site.getBaseUrl()+"utility/images/glow/ColorSelectorSv.png",hueBlendImageUrl:e.telligent.evolution.site.getBaseUrl()+"utility/images/glow/ColorSelectorHue.png"});e.fn.glowMultiUpload&&e.extend(e.fn.glowMultiUpload.defaults,{swfUrl:e.telligent.evolution.site.getBaseUrl()+"utility/images/glow/plupload.flash.swf",silverlightUrl:b.silverlightFileUploadEnabled?e.telligent.evolution.site.getBaseUrl()+"utility/images/glow/plupload.silverlight.xap":"",runtimes:b.silverlightFileUploadEnabled?"html5,silverlight,flash":"html5,flash"});e.fn.glowUpload&&e.extend(e.fn.glowUpload.defaults,{swfUrl:e.telligent.evolution.site.getBaseUrl()+"utility/images/glow/plupload.flash.swf",silverlightUrl:b.silverlightFileUploadEnabled?e.telligent.evolution.site.getBaseUrl()+"utility/images/glow/plupload.silverlight.xap":"",runtimes:b.silverlightFileUploadEnabled?"html5,silverlight,flash":"html5,flash"})},getBaseUrl:function(d){if(!0===d){d=h.location.href+"";var e=d.indexOf("/",9);if(0<e)return d.substr(0,e)+b.baseUrl}
return b.baseUrl}}};e.telligent=e.telligent||{};e.telligent.evolution=e.telligent.evolution||{};e.extend(e.telligent.evolution,m);return{}},jQuery,window);t("module.editableGroup",function(b,e,h){b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});var m={},k=function(c,a,d){if(c.isSaving)
if(a+1<c.widgets.length){var b=c.widgets[a+1];b.save?(b=b.save(function(){k(c,a+1,d)},function(){n(c,a+1,d)}),!1===b?n(c,a+1,d):!0===b&&k(c,a+1,d)):k(c,a+1,d)}else d.success&&(c.isSaving=!1,d.success())},n=function(c,a,d){c.isSaving&&(c.isSaving=!1,d.error&&d.error())},d=function(c,a,d){if(c.isValidating){c.widgets[a].valid=!0;var e=0;b.each(c.widgets,function(a,c){!0!==c.valid&&e++});0==e&&(c.isValidating=!1,d.success&&d.success())}},g=function(c,a,d){c.isValidating&&(c.widgets[a].valid=!1,c.isValidating=!1,d.error&&d.error())};b.telligent.evolution.editableGroup={register:function(c,a){var d=m[c];d||(d={widgets:[],isSaving:!1,isValidating:!1},m[c]=d);d.widgets[d.widgets.length]=b.extend({},a||{},{valid:!1,saved:!1})},save:function(c,a){b.telligent.evolution.editableGroup.validate(c,{success:function(){var d=m[c];d&&0<d.widgets.length?(d.isSaving=!0,k(d,-1,a)):a&&a.success&&a.success()},error:function(){a.error&&a.error()}})},validate:function(c,a){var e=m[c];e&&0<e.widgets.length?(b.each(e.widgets,function(a,f){f.valid=h}),e.isValidating=!0,b.each(e.widgets,function(c,f){if(f.validate){var b=f.validate(function(){d(e,c,a)},function(){g(e,c,a)});!1===b?g(e,c,a):!0===b&&d(e,c,a)}else d(e,c,a)})):a&&a.success&&a.success()}};return{}},jQuery,window);t("module.html",function(b,e,h){b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});b.telligent.evolution.html={encode:function(e){return e?b("<div/>").text(e).html():e},decode:function(e){if(!e)return e;e=e.replace(/<[^>]*>/g," ");return b("<div/>").html(e).text()}};return{}},jQuery,window);t("module.language",function(b,e,h){var m={},k={};agoLastRefresh=(new Date).getTime();buildCacheKey=function(d,b){return d.toString()+"-"+b};loadFormattedDate=function(d,e,c){var a=m;"agodate"==e&&(6E4<(new Date).getTime()-agoLastRefresh&&(k={},agoLastRefresh=(new Date).getTime()),a=k);var h=a[buildCacheKey(d,e)];"undefined"===typeof h?b.telligent.evolution.get({url:n.defaults.dateEndpoint,data:{date:b.telligent.evolution.formatDate(d),format:e},success:function(b){b&&(c&&"undefined"!==typeof b&&null!==b&&b.formattedDate)&&(a[buildCacheKey(d,e)]=b.formattedDate,c(b.formattedDate))}}):c(h)};var n={formatDate:function(d,b){loadFormattedDate(d,"date",b)},formatDateAndTime:function(d,b){loadFormattedDate(d,"datetime",b)},formatAgoDate:function(d,b){loadFormattedDate(d,"agodate",b)},defaults:{dateEndpoint:""}};b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});b.telligent.evolution.language=n;return{}},jQuery,window);t("module.maxlength",function(b,e,h){return{shim:function(){b("textarea[maxlength]").live("keyup change",function(){var e=b(this),h=e.attr("maxlength"),n=e.val();n.length>h&&e.val(n.substr(0,h))})}}},jQuery,window);t("module.media",function(b,e,h){var m=function(e,d,g){var c=b.extend({},k.defaults,g||{});e={url:e,view:d};c.width&&(e.width=c.width);c.height&&(e.height=c.height);b.telligent.evolution.get({url:c.endpoint,data:e,success:function(a){a&&c.success&&c.success(a)},error:function(a,d,b){c.error&&c.error(a,d,b)}})},k={previewHtml:function(b,d){m(b,"preview",d)},viewHtml:function(b,d){m(b,"view",d)},defaults:{endpoint:""}};b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});b.telligent.evolution.media=k;return{}},jQuery,window);t("module.messaging",function(b,e,h){function m(a){if(!a)throw"subscriptionId is required when unsubscribing a message";if(isNaN(a)){if(a&&c[a]){for(var d=0;d<c[a].length;d++)m(c[a][d]);c[a].length=0}}else k(a)}
function k(a){if("undefined"!==typeof g[String(a)]){var c=g[String(a)],e=-1,f=d[c.message];b.each(f,function(a,f){f===c&&(e=a)});0<=e&&f.splice(e,1);0===f.length&&delete d[c.message];delete g[String(a)]}}
var n=0,d={},g={},c={};e={publish:function(a,c){if(!a)throw"messageName is required when publishing a message";if(null!==a&&0!==a.length){var e=d[a];e&&b.each(e,function(a,d){if(null!==d.handler)try{d.handler.call(this,c)}catch(b){}})}},subscribe:function(a,b,e){if(!a)throw"messageName is required when subscribing to a message";if(null===a||0===a.length)return 0;"undefined"===typeof d[a]&&(d[a]=[]);var f=b;e==h&&(e=b,f="content");b={message:a,handler:e,namespace:f,id:++n};d[a][d[a].length]=b;g[String(b.id)]=b;c[f]||(c[f]=[]);return c[f][c[f].length]=b.id},unsubscribe:m};b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});return b.telligent.evolution.messaging=e},jQuery,window);t("module.navigationConfirmation",function(b,e,h){b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});var m={message:"",enabled:!1,ignoreClick:!1},k=function(){if(!m.ignoreClick)return m.message};b.telligent.evolution.navigationConfirmation={configure:function(e){m=b.extend(m,e)},enable:function(){m.enabled||(window.onbeforeunload=k,m.enabled=!0,b(document).bind("customizepage",function(){m.ignoreClick=!0}))},register:function(e){b(e).click(function(){m.ignoreClick=!0})},ignoreClick:function(){m.ignoreClick=!0}};return{}},jQuery,window);t("module.notifications",["lib.util"],function(b,e,h,m){function k(a,f){var b=e.grep(a.notifications,function(a){return a.id===f.id});if(null!==b&&1===b.length)return b=b[0],d(a,b).then(function(){b.view.remove();b.message=f.message;b.cssClass=f.cssClass;b.duration=f.duration;r(a,b);b.suppressPositionAnimation=!0;n(a);g(a,b);p(a,b)}),b;a.notifications.length===a.limit&&c(a,a.notifications[a.notifications.length-1]);a.notifications.unshift(f);r(a,f);n(a);g(a,f);p(a,f);return f}
function n(a){var f=a.margin;e.each(a.notifications,function(c,b){b.suppressPositionAnimation?(b.view.css({bottom:f+"px",opacity:0}),b.suppressPositionAnimation=!1):b.view.animate({bottom:f+"px"},a.animationDuration);0<b.measuredHeight&&(f+=b.measuredHeight+a.margin)})}
function d(a,f){f.onHide&&f.onHide.apply(f);return e.Deferred(function(c){f.view.fadeOut(a.animationDuration,c.resolve)}).promise()}
function g(a,f){f.onShow&&f.onShow.apply(f);return e.Deferred(function(c){f.view.fadeTo(a.animationDuration,a.opacity,c.resolve)}).promise()}
function c(a,f){f.removing=!0;f.measuredHeight=0;n(a);d(a,f).then(function(){f.view.remove();a.notifications=e.grep(a.notifications,function(a){return a!==f})})}
function a(a,f){h.clearTimeout(f.removeTimeout);h.clearInterval(f.hideSupressedWaitInterval);h.setTimeout(function(){a.removalSuppressed?f.hideSupressedWaitInterval=h.setInterval(function(){a.removalSuppressed||(h.clearInterval(f.hideSupressedWaitInterval),c(a,f))},1E3):c(a,f)},f.duration)}
function r(a,f){f.active=!!f.onClick;f.view=e(a.template(f)).css({position:"fixed",left:a.margin+"px",bottom:a.margin+"px",zIndex:1E4,width:f.width}).hide().appendTo(a.parent);f.measuredHeight=f.view.outerHeight()}
function p(f,b){b.view.find("a.close").on("click",function(a){a.preventDefault();a.stopPropagation();b.onClose?(a=b.onClose.apply(b))?a.then(function(){c(f,b)}):c(f,b):c(f,b)});b.view.on("click",function(){b.onClick&&b.onClick.apply(b)});b.view.on("mouseenter",function(){f.entered=!0;f.removalSuppressed=!0;b.removing&&(b.view.stop(),b.removing=!1,g(f,b),n(f),a(f,b));b.onOver&&b.onOver.apply(b)});b.view.on("mouseleave",function(){f.entered=!1;h.setTimeout(function(){f.entered||(f.removalSuppressed=!1)},500);b.onOut&&b.onOut.apply(b)})}
var f,s={show:function(c,d){if(!f){var g=e.extend({},s.defaults,{},{removalSuppressed:!1,notifications:[]});g.template=e.telligent.evolution.template.compile(g.template);f=g}
g=e.extend({},s.show.defaults,d||{});g.message=c;g.cssClass=g.type||"";g.id||(g.id=b.guid());a(f,k(f,g));return g.id},hide:function(a){if(f&&a)
if(e.isFunction(a))e.each(f.notifications,function(a,b){c(f,b)}),a();else{var b=e.grep(f.notifications,function(f){return f.id===a});b&&0!=b.length&&c(f,b[0])}}};s.show.defaults={duration:5E3,width:200,type:"",id:null,onClick:null,onClose:null,onShow:null,onHide:null,onOver:null,onOut:null};s.defaults={template:'<div class="push-notification <%: cssClass %> <% if(active) { %>active<% } %>">  <a href="#" class="close">x</a>   <%= message %> </div> ',parent:"body",margin:5,animationDuration:250,opacity:0.95,limit:10};e.telligent=e.telligent||{};e.telligent.evolution=e.telligent.evolution||{};e.telligent.evolution.notifications=s;return{}},jQuery,window);t("module.preview",function(b,e,h){var m=function(e,d){var g=b.extend({},k.defaults,d||{});b.telligent.evolution.get({url:g.endpoint,data:{url:e,maxImageWidth:"undefined"!==typeof d.maxImageWidth?d.maxImageWidth:g.maxImageWidth,maxImageHeight:"undefined"!==typeof d.maxImageHeight?d.maxImageHeight:g.maxImageHeight},success:function(c){c&&g.success&&"undefined"!==typeof c&&null!==c?g.success(c):g.error&&g.error(c)},error:function(c,a,b){g.error&&g.error(c,a,b)}})},k={load:function(b,d){m(b,d)},render:function(e,d){if(null!==e&&"undefined"!==typeof e&&"undefined"!==typeof e.url&&0!==e.url.length&&"undefined"!==typeof e.title&&0!==e.title.length){var g=b.extend({},k.defaults,d);return b.telligent.evolution.template.compile(g.template)(e)}},defaults:{endpoint:"",maxImageWidth:90,maxImageHeight:90,template:'<div class="abbreviated-post-header shared-link"></div><div class="abbreviated-post shared-link <% if(imageUrl !== null && imageUrl.length > 0){ %> with-image <% } %>">   <h4 class="post-name"><a href="<%: url %>" <% if(url.indexOf(jQuery.telligent.evolution.site.getBaseUrl(true)) < 0) { %>class="external-link" target="_blank"<% } %> rel="nofollow"><%= title %></a></h4>   <% if(siteName !== null && siteName.length > 0){ %>       <div class="post-application">           <span class="label"></span>           <span class="value"><a href="<%: url %>" <% if(url.indexOf(jQuery.telligent.evolution.site.getBaseUrl(true)) < 0) { %>class="external-link" target="_blank"<% } %> rel="nofollow"><%= siteName %></a></span>       </div>   <% } %>   <% if(imageUrl !== null && imageUrl.length > 0){ %>       <div class="post-thumbnail">           <a href="<%: url %>" <% if(url.indexOf(jQuery.telligent.evolution.site.getBaseUrl(true)) < 0) { %>class="external-link" target="_blank"<% } %> rel="nofollow"><%= resizedImageHtml %></a>       </div>   <% } %>   <% if(excerpt !== null && excerpt.length > 0){ %>       <div class="post-summary">           <%= excerpt %>      </div>   <% } %></div><div class="abbreviated-post-footer shared-link"></div>'}};b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});b.telligent.evolution.preview=k;return{}},jQuery,window);t("module.regex",function(b,e,h){b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});b.telligent.evolution.regex={encode:function(b){return b?b.replace(/[\-\[\]\{\}\(\)\*\+\?\.\,\\\^\$\|\#\s]/g,"\\$&"):b}};return{}},jQuery,window);t("module.rest",["lib.globalConfiguration"],function(b,e,h,m){function k(a){var f;a:{f=b.authorizationCookieName+"=";for(var c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(f)){f=e.substring(f.length,e.length);break a}}
f=null}
null!=f&&(a.setRequestHeader("Authorization-Code",f),a.setRequestHeader("Rest-Authorization-Code",f))}
function n(a){a&&"~/"==a.substr(0,2)&&(a=b.baseUrl+a.substr(2));b.isRemote&&(b.remoteUrlEncodePattern&&a&&-1<a.lastIndexOf("/~/"))&&(a=a.substr(0,a.lastIndexOf("/~/")+3)+a.substr(a.lastIndexOf("/~/")+3).replace(RegExp(b.remoteUrlEncodePattern,"gi"),function(a,f,c){return"_"+a.substr(1)}));return a}
function d(a,f){var c=a,b=f;c&&(f&&"string"!==typeof f)&&(b={},e.each(f,function(a,f){var d=RegExp("{"+a+"}","gim");c.match(d)?c=c.replace(d,h.encodeURIComponent(f)):b[a]=f}));return{url:c,data:b}}
function g(a,f,c){var b=f,d=null;try{var l=e.isPlainObject(a)?a:e.parseJSON(a);if(l&&l.Errors&&e.isArray(l.Errors)&&0<l.Errors.length){var g=[];e.each(l.Errors,function(a,f){var c=f.split(":",2);1===c.length?g.push(c[0].replace(u,"")):0<=e.inArray(c[0],v)&&g.push(c[1].replace(u,""))});1===g.length||1<g.length&&e.telligent.evolution.notifications===m?b=g[0]:1<g.length&&(d=g[0],b=c,b+="<ul>",e.each(g,function(a,f){b+="<li>"+f+"</li>"}),b+="</ul>")}
if(null===b||""===e.trim(b))b=f}catch(q){}
return d||b}
function c(a,c){var l=d(a.url,a.data);a.url=n(l.url);a.data=l.data;var q=a.beforeSend,s=a.error,u=e.extend({},{defaultErrorMessage:b.defaultErrorMessage,defaultMultiErrorMessagePrefix:b.defaultMultiErrorMessagePrefix},a);e.extend(a,{type:"GET"===c?c:"POST",beforeSend:function(a){q!==m&&q(a);k(a);"PUT"!==c&&"DELETE"!==c||a.setRequestHeader("Rest-Method",c)},error:function(a,c,b){if(0!==a.readyState&&0!==a.status)
if(c=g(a.responseText,u.defaultErrorMessage,u.defaultMultiErrorMessagePrefix),s!==m)f(s,this,[a,c,b]);else try{e.telligent.evolution.notifications.show(c,{type:"error"})}catch(d){alert(c)}}});return e.ajax(a)}
function a(){var a=++A;q[a]={dfd:e.Deferred(),reqs:[]};setTimeout(function(){delete q[a]},y);return a}
function r(a,c){var b=q[a];if(b===m)return e.Deferred(function(f){f.reject('Batch "'+a+'" not found')}).promise();if(0===b.reqs.length)return b.dfd.resolve(),b.dfd.promise();var l=e.extend({},D,c),g={Sequential:l.sequential};e.each(b.reqs,function(a,f){var c=f.options.url.replace(/\.xml/i,".json"),c=d(c,f.options.data);"GET"==f.verb?c.url=e.telligent.evolution.url.modify({url:c.url,query:c.data||{}}).split("#")[0]:g["_REQUEST_"+a+"_DATA"]=e.param(c.data||{});g["_REQUEST_"+a+"_URL"]=n(c.url);g["_REQUEST_"+a+"_METHOD"]=f.verb});e.ajax({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/batch.json",type:"POST",data:g,beforeSend:function(a){l.beforeSend&&l.beforeSend(a);k(a)}}).done(function(f,c){p(b,f.BatchResponses,this,c);b.dfd.resolveWith(this,[f]);delete q[a]}).fail(function(c,d,l){0!==c.readyState&&0!==c.status&&(c.responseJSON&&c.responseJSON.BatchResponses?p(b,c.responseJSON.BatchResponses,c,d):e.each(b.reqs,function(a,b){b.options.error&&f(b.options.error,b.options,[c,d,l]);b.dfd.rejectWith(b.options,[c,d,l])}),b.dfd.rejectWith(this,[c,d,l]),delete q[a])});return b.dfd.promise()}
function p(a,c,b,d){e.each(c,function(c,l){var q=a.reqs[c];if(200===l.StatusCode)q.options.success&&f(q.options.success,q.options,[l.BatchResponse,d,b]),q.dfd.resolveWith(q.options,[l.BatchResponse,d,b]);else{var s=g(l.BatchResponse,q.options.defaultErrorMessage,q.options.defaultMultiErrorMessagePrefix);if(q.options.error)f(q.options.error,b,[l,s,d]);else try{e.telligent.evolution.notifications.show(s,{type:"error"})}catch(u){alert(s)}
q.dfd.rejectWith(b,[l,s,d])}
q.options.complete&&f(q.options.complete,q.options,[b,d])})}
function f(a,f,c){if(a)
if(e.isArray(a))
for(var b=0;b<a.length;b++)a[b].apply(f,c);else a.apply(f,c)}
function s(f,d){null!==x&&(f.batch=x);if(f&&f.batch){var l;l=f.batch;q[l]===m&&(l=a());l=q[l];var g={options:e.extend({},{defaultErrorMessage:b.defaultErrorMessage,defaultMultiErrorMessagePrefix:b.defaultMultiErrorMessagePrefix},f),verb:d,dfd:e.Deferred()};l.reqs.push(g);return g.dfd.promise()}
return c(f,d)}
function l(f,c){if(f){if(null!==x)throw"Batched REST requests cannot be nested.";var b=a();x=b;try{f.apply(this)}finally{x=null}
return r(b,c)}}
var v=["RecordNotFound","BadRequest","Conflict","Unauthorized","Unknown"],u=/(?:<|>)/g,q={},A=0,y=6E4,x=null,D={sequential:!1,beforeSend:null};l.create=a;l.process=r;var J={get:function(a){return s(a,"GET")},post:function(a){return s(a,"POST")},put:function(a){return s(a,"PUT")},del:function(a){return s(a,"DELETE")},writeAuthorizationHeader:k,ensureRemoteUrlEncoding:n,batch:l};e.telligent=e.telligent||{};e.telligent.evolution=e.telligent.evolution||{};e.extend(e.telligent.evolution,J);h.TelligentUtility||(h.TelligentUtility={WriteAuthorizationHeader:function(a){e.telligent.evolution.writeAuthorizationHeader(a)}});return J},jQuery,window);t("module.sockets.configurableLongPolling",function(b,e,h){var m={longPollDelay:0};return{configure:function(h){var n=b.extend({},m,h||{}),d=b.signalR,g=b.signalR.events,c=b.signalR.changeState,a=b.signalR.isDisconnecting,r=d.transports._logic;d.transports.longPolling={name:"longPolling",supportsKeepAlive:!1,reconnectDelay:3E3,init:function(c,f){var b=this,d,g=function(f){!1===a(c)&&(c.log("Server ping failed because '"+f+"', re-trying ping."),c._.pingLoopId=e.setTimeout(d,b.reconnectDelay))};c.log("Initializing long polling connection with server.");d=function(){r.pingServer(c).done(f).fail(g)};d()},start:function(p,f,s){var l=this,v=function(){u=v=b.noop;p.log("Longpolling connected.");f();s=null},u=function(){return s?(s(),s=null,p.log("LongPolling failed to connect."),!0):!1},q=p._,h=0,k=function(a){e.clearTimeout(q.reconnectTimeoutId);q.reconnectTimeoutId=null;!0===c(p,d.connectionState.reconnecting,d.connectionState.connected)&&(p.log("Raising the reconnect event."),b(a).triggerHandler(g.onReconnect))};p.pollXhr&&(p.log("Polling xhr requests already exists, aborting."),p.stop());q.reconnectTimeoutId=null;q.pollTimeoutId=null;l.init(p,function(){p.messageId=null;q.pollTimeoutId=e.setTimeout(function(){(function D(f,c){var s=null!==f.messageId,m=r.getUrl(f,l.name,s,!c);!0!==a(f)&&(p.log("Opening long polling request to '"+m+"'."),f.pollXhr=b.ajax(b.extend({},b.signalR.ajaxDefaults,{xhrFields:{withCredentials:p.withCredentials},url:m,type:"GET",dataType:p.ajaxDataType,contentType:p.contentType,success:function(c){var d=0,l,g,s;p.log("Long poll complete.");h=0;try{l=p._parseResponse(c)}catch(m){r.handleParseFailure(f,c,m.message,u);return}
null!==q.reconnectTimeoutId&&k();v();l&&(g=r.maximizePersistentResponse(l));r.processMessages(f,l);n&&0<n.longPollDelay?d=n.longPollDelay:g&&"number"===b.type(g.LongPollDelay)&&(d=g.LongPollDelay);g&&g.Disconnect||!0===a(f)||((s=g&&g.ShouldReconnect)&&r.ensureReconnectingState(f),0<d?q.pollTimeoutId=e.setTimeout(function(){D(f,s)},d):D(f,s))},error:function(a,c){e.clearTimeout(q.reconnectTimeoutId);q.reconnectTimeoutId=null;"abort"===c?p.log("Aborted xhr requst."):u()||(h++,p.state!==d.connectionState.reconnecting&&(p.log("An error occurred using longPolling. Status = "+c+".  Response = "+a.responseText+"."),b(f).triggerHandler(g.onError,[a.responseText])),(p.state!==d.connectionState.connected&&p.state!==d.connectionState.reconnecting||r.verifyLastActive(p))&&r.ensureReconnectingState(f)&&(q.pollTimeoutId=e.setTimeout(function(){l.init(f,function(){D(f,!0)})},l.reconnectDelay)))}})),s&&!0===c&&(q.reconnectTimeoutId=e.setTimeout(function(){k(f)},Math.min(1E3*(Math.pow(2,h)-1),36E5))))})(p);e.setTimeout(function(){v()},250)},250)})},lostConnection:function(a){throw Error("Lost Connection not handled for LongPolling");},send:function(a,f){r.ajaxSend(a,f)},stop:function(a){e.clearTimeout(a._.pollTimeoutId);e.clearTimeout(a._.reconnectTimeoutId);delete a._.pollTimeoutId;delete a._.reconnectTimeoutId;a.pollXhr&&(a.pollXhr.abort(),a.pollXhr=null,delete a.pollXhr)},abort:function(a,f){r.ajaxAbort(a,f)}}}}},jQuery,window);t("module.sockets",["module.sockets.configurableLongPolling"],function(b,e,h,m){function k(){return h.navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&h.navigator.userAgent.match(/AppleWebKit/)}
var n={},d=null,g;g=k()?["longPolling","foreverFrame"]:["serverSentEvents","longPolling","foreverFrame"];var c=0,a=!1,r=0,p=null,f=0,s=function(a){f++;12<f||(clearTimeout(r),r=setTimeout(function(){a.start({transport:g});clearTimeout(r)},5E3))},l=function(a,f,c){if(a=n[a+"|"+f]){var b=c&&0<c.length?e.parseJSON(c):null;e.each(a,function(a,f){try{f(b)}catch(c){}})}},v=function(u){e.connection&&(b.configure({longPollDelay:k()?5E3:0}),e.each(u.sockets,function(a,f){v[f.name]={on:function(a,c){var b=f.fullName+"|"+a;n[b]=n[b]||[];n[b].push(c)},off:function(a){delete n[f.fullName+"|"+a]},send:function(a,b){if(c==e.signalR.connectionState.connected){var l=e.telligent.evolution.url.serializeQuery(e.extend(b,{_s:f.fullName,_m:a}));d.send(l)}}}}),e.ajaxPrefilter(function(a,f,c){0===a.url.indexOf(u.endpoint)&&e.telligent.evolution.writeAuthorizationHeader(c)}),0<u.sockets.length&&(d=e.connection(u.endpoint),d.received(function(a){a=e.telligent.evolution.url.parseQuery(a);l(a._s,a._m,a._d)}),d.error(function(a){c=e.signalR.connectionState.disconnected;d.stop()}),d.stateChanged(function(a){c=a.newState;c==e.signalR.connectionState.disconnected&&s(d)}),d.disconnected(function(){}),d.reconnected(function(){c=e.signalR.connectionState.connected}),d.start({transport:g,callback:function(){a||(a=!0,e.telligent.evolution.messaging.publish("socket.connected"));clearInterval(p);p=setInterval(function(){c==e.signalR.connectionState.connected&&d.send("_KEEP_ALIVE")},6E4);f=0}})))};e.telligent=e.telligent||{};e.telligent.evolution=e.telligent.evolution||{};e.telligent.evolution.sockets=e.telligent.evolution.sockets||v;return{}},jQuery,window);t("module.template",function(b,e,h){var m={},k={open:"<%",close:"%>"},n=function(d,c){var a=b.extend({},k,c||{}),e=RegExp("\\"+a.open+"=([\\s\\S]+?)"+a.close,"g"),p=RegExp("\\"+a.open+":([\\s\\S]+?)"+a.close,"g"),a=RegExp("\\"+a.open+"(.*?)"+a.close,"g"),e=" var source = [];  with(data){with(extraHelpers){with(defaultHelpers){  source.push('"+d.replace(/[\r\n]/g,"").replace(e,"'); source.push(String($1)); source.push('").replace(p,"'); source.push(escape(String($1))); source.push('").replace(a,"'); $1 source.push('")+"');  }}}  return source.join('');",p=new Function("defaultHelpers","extraHelpers","data",e);p.compiledSource="function(defaultHelpers, extraHelpers, data) { "+e+" } ";return p},d={compile:function(b,c,a){var e=m[b];if("undefined"===typeof e){var p=null!==document.getElementById(b)?document.getElementById(b).innerHTML:b,f=n(p,a);m[b]=e=function(a){return f.call(this,d.helpers||{},c||{},a||{})};e.source={raw:p,compiled:f.compiledSource}}
return e},helpers:{foreach:function(b,c){if(b&&0<b.length&&c)
for(var a=0;a<b.length;a++)c(b[a],a)},escape:function(b){var c=/&/g,a=/</g,d=/>/g,e=/\"/g;return function(f){return f.replace(c,"&amp;").replace(a,"&lt;").replace(d,"&gt;").replace(e,"&quot;")}}()}};b.telligent=b.telligent||{};b.telligent.evolution=b.telligent.evolution||{};b.telligent.evolution.template=d;return{}},jQuery,window);t("module.tourtips",["module.configuration"],function(b,e,h,m){function k(){function a(f){return e.telligent.evolution.user.accessing.id+":"+f}
function f(a){return"tourtip_:"+a}
var c=e.telligent.evolution.user.accessing.isSystemAccount?h.sessionStorage:h.localStorage;return{get:function(b){if(c)return JSON.parse(c.getItem(f(a(b))))},set:function(b,d){c&&c.setItem(f(a(b)),JSON.stringify(d))},remove:function(b){c&&c.removeItem(f(a(b)))}}}
function n(){f&&(h.clearTimeout(a),a=h.setTimeout(n,p));var b=[],l=[];e.each(c,function(a,f){var c=s.get(f.key);c&&!c.read?b.push(f):c||l.push(f)});c.length=0;if(0<l.length)
if(e.telligent.evolution.user.accessing.isSystemAccount)e.each(l,function(a,f){b.push(f)}),d(b);else{var q={},r=[];e.each(l,function(a,f){r.push(f.key);q[f.key]=f});f=!0;g.list(r).then(function(a){f=!1;e.each(a.TourTips,function(a,f){s.set(f.Key,{read:f.Read});if(!f.Read){var c=q[f.Key];c&&b.push(c)}});d(b)})}else d(b)}
function d(a){s=s||k();var f=s.get(l);f&&0<f&&f>(new Date).getTime()||(a=a.sort(function(a,f){return a.index-f.index}),e.telligent.evolution.messaging.publish("ui.tourtips",{tips:a}))}
var g={mark:function(a,f){return(f?e.telligent.evolution.post:e.telligent.evolution.del)({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/tourtips/{key}.json?IncludeFields=Key,Read",data:{key:a}})},list:function(a){return e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/tourtips.json?IncludeFields=Key,Read",data:{Keys:a.join(",")}})}},c=[],a,r=0,p=1E3,f=!1,s,l="suppressUntil";e.telligent=e.telligent||{};e.telligent.evolution=e.telligent.evolution||{};e.telligent.evolution.tourTips={register:function(f){s=s||k();f&&(f.index==m&&(f.index=r++),c.push(f),h.clearTimeout(a),a=h.setTimeout(n,p))},mark:function(a,f){s.set(a,{read:f});return e.telligent.evolution.user.accessing.isSystemAccount?e.Deferred(function(a){a.resolve()}).promise():g.mark(a,f)},suppress:function(a){s=s||k();a&&0<a?s.set(l,(new Date).getTime()+a):s.remove(l)}};return{}},jQuery,window);t("module.ui",["lib.util"],function(b,e,h,m){var k={};parseData=function(b){b=b.get(0);for(var d={},g=0;g<b.attributes.length;g++){var c=b.attributes[g];if(0===c.name.indexOf("data-")){var a=c.name.substring(5);d[a]="configuration"===a?e.telligent.evolution.url.parseQuery(c.value):c.value}}
return d};api={components:{},render:function(b){b=e(b||document);for(var d in api.components){var g=api.components[d],c=e(".ui-"+d,b);b.hasClass(".ui-"+d)&&c.add(b);c&&(0<c.length&&"undefined"!==typeof g.setup&&!k[d])&&(g.setup.call(this),k[d]=!0);c&&(0<c.length&&"undefined"!==typeof g.add)&&c.each(function(){var a=e(this);a.data("_telligent_evolution_ui_render_add."+d)||(g.add.call(a,a,api.data(a)),a.data("_telligent_evolution_ui_render_add."+d,!0))})}},data:function(b){if(!b)return{};b=e(b);var d=b.data("_telligent_evolution_ui_data");if(null===d||"undefined"===typeof d)d=parseData(b),b.data("_telligent_evolution_ui_data",d);return d}};e.telligent||(e.telligent={});e.telligent.evolution||(e.telligent.evolution={});e.telligent.evolution.ui=api;e.each(["html","append","prepend"],function(h,d){e.fn[d]=b.wrap(e.fn[d],{after:function(){e.telligent.evolution.ui.render(this)}})});e.each(["after","before"],function(h,d){e.fn[d]=b.wrap(e.fn[d],{after:function(){e.telligent.evolution.ui.render(this.parent())}})});return api},jQuery,window);t("module.url",function(b,e,h){var m=null,k=function(b,c,a,d,e){if(!b)return b;var f=/(?:\.config|\.ascx|\.asax|\.cs|\.vb)$/i.test(b);return b.replace(c,function(c,l,h){if(" "==c)return a;if("."!=c||f||h==b.length-1||"."==b.substr(h+1,1)){l=[];l[l.length]=e;for(h=0;h<c.length;h++){var u=c.charCodeAt(h).toString(16)+"",q=u.length;4==q?(l.push(u.substr(2,2).toUpperCase()),l.push(u.substr(0,2).toUpperCase())):3==q?(l.push(u.substr(1,2).toUpperCase()),l.push("0"),l.push(u.substr(0,1).toUpperCase())):2==q&&(l.push(u.toUpperCase()),l.push("00"))}
l[l.length]=e;return l.join("")}
return d})},n=function(b,c,a,d){return b?b.replace(c,function(c,f,b){if(1==c.length){if(c==a)return" ";if(c==d)return"."}else{c=c.substr(1,c.length-2);if(0!=c.length%4)return"";f=[];for(b=0;b<c.length;b+=4)f[f.length]=String.fromCharCode(parseInt(c.substr(b+2,2)+c.substr(b,2),16));return f.join("")}}):b},d={parseQuery:function(d){var c=d.split("?"),a={};d=(1<c.length?c[1]:d).split("#")[0].split("&");b.each(d,function(c,b){b=b.split("=");2===b.length&&(a[b[0]]=decodeURIComponent(b[1].replace(/\+/gi," ")))});return a},serializeQuery:function(d){d=d||{};var c=[];b.each(d,function(a,b){c[c.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)});return c.join("&")},modify:function(g){g=b.extend({url:e.location.href,query:null,hash:e.location.hash,protocol:e.location.protocol},g);var c=[g.url.split("?")[0].split("#")[0]],a;"string"===typeof g.query&&(g.query=d.parseQuery(g.query));(a=d.serializeQuery(b.extend(d.parseQuery(g.url),g.query)))&&0<a.length&&(c[c.length]="?"+a);g.hash&&0<g.hash.length&&(c[c.length]=(0!==g.hash.indexOf("#")?"#":"")+g.hash);return c.join("")},hashData:function(g,c){var a=!1,h="";b.isPlainObject(c)?(a=c.overrideCurrent,h=c.prefix||""):a=c;if(h){var p={},f;for(f in g)p[h+f]=g[f];g=p}
if("undefined"===typeof g){g={};var a=e.location.href.split("#"),s="";2<a.length&&(b.each(a,function(a,f){0<a&&(1<a&&(s+="#"),s+=f)}),a=[a[0],s]);2===a.length&&(g=d.parseQuery(a[1]));return g}
a||(g=b.extend(d.hashData(),g));e.location.href=e.location.href.split("#")[0]+"#"+d.serializeQuery(g)},encode:function(b){return encodeURIComponent(b)},decode:function(b){return decodeURIComponent(b)},encodePathComponent:function(b){return k(b,/([^A-Za-z0-9 \.]+|\.| )/g,"+","-","_")},decodePathComponent:function(b){return n(b,/((?:_(?:[0-9a-f][0-9a-f][0-9a-f][0-9a-f])+_)|\-|\+)/ig,"+","-")},encodeFileComponent:function(b){return k(b,/([^A-Za-z0-9 \.]+|\.| )/g,"-",".","_")},decodeFileComponent:function(b){return n(b,/((?:_(?:[0-9a-f][0-9a-f][0-9a-f][0-9a-f])+_)|_|\-)/ig,"-",".")},navigateTo:function(d){var c=b("base");if(0<c.length){m||(m=b("<a></a>").css({position:"absolute",left:"-1000px"}),b("body").append(m));var a=m.attr({href:d})[0];try{e.document.createEvent?a.dispatchEvent(function(a){a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);return a}(document.createEvent("MouseEvents"))):a.dispatchEvent(new MouseEvent("click",{view:e,bubbles:!0,cancelable:!0}))}catch(h){(c=c.attr("target"))?e.open(d,c):e.document.location=d}}else e.document.location=d}};b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});b.telligent.evolution.url=d;return{}},jQuery,window);t("plugins","plugin.evolutionBookmark plugin.evolutionComposer plugin.evolutionHighlight plugin.evolutionInlineTagEditor plugin.evolutionLike plugin.evolutionModerate plugin.evolutionPager plugin.evolutionResize plugin.evolutionStarRating plugin.evolutionTagTextBox plugin.evolutionTheater plugin.evolutionToggleLink plugin.evolutionTransform plugin.evolutionUserFileTextBox plugin.validation plugin.evolutionTextEditor plugin.evolutionScrollSlider plugin.evolutionMasonry plugin.evolutionTip plugin.evolutionTokenTextBox".split(" "),function(){return{}});t("plugin.evolutionBookmark",function(b,e,h){var m=function(c){c.toggle=b("<a></a>").attr({href:"#"});c.element.append(c.toggle);c.toggle.evolutionToggleLink({onHtml:"<span></span>"+b.telligent.evolution.html.encode(k(c,c.settings.deleteBookmarkText)),offHtml:"<span></span>"+b.telligent.evolution.html.encode(k(c,c.settings.addBookmarkText)),processingHtml:"<span></span>"+b.telligent.evolution.html.encode(k(c,c.settings.processingText)),changeState:function(a){d(a,c)},onTitle:k(c,c.settings.deleteBookmarkText),offTitle:k(c,c.settings.addBookmarkText),processingTitle:k(c,c.settings.processingText),onCssClass:c.settings.deleteBookmarkCssClass,offCssClass:c.settings.addBookmarkCssClass,processingCssClass:c.settings.processingCssClass,val:c.settings.initialState})},k=function(b,a){return a.replace(/\{content_type_name\}/gi,b.settings.contentTypeName)},n=function(c,a){b.telligent.evolution.messaging.publish("ui.bookmark",{contentId:c.settings.contentId,contentTypeId:c.settings.contentTypeId,typeId:c.settings.typeId,bookmarked:a})},d=function(b,a){if(b)a.settings.onBookmark(a.settings.contentId,a.settings.contentTypeId,a.settings.typeId,function(){n(a,!0)});else a.settings.onUnbookmark(a.settings.contentId,a.settings.contentTypeId,a.settings.typeId,function(){n(a,!1)})},g=function(c){b.telligent.evolution.messaging.subscribe("ui.bookmark",function(a){a.contentId===c.settings.contentId&&a.contentTypeId===c.settings.contentTypeId&&a.typeId===c.settings.typeId&&c.toggle&&c.toggle.evolutionToggleLink("val",a.bookmarked)})};b.fn.evolutionBookmark=function(c){var a=b.extend({},b.fn.evolutionBookmark.defaults,c||{});return this.each(function(){var c={element:b(this),toggle:null,settings:a};m(c);g(c)})};b.fn.evolutionBookmark.defaults={contentId:"",contentTypeId:"",typeId:"",initialState:!1,contentTypeName:"",onBookmark:function(b,a,d,e){},onUnbookmark:function(b,a,d,e){},deleteBookmarkText:"Unbookmark {content_type_name}",addBookmarkText:"Bookmark this {content_type_name}",processingText:"...",addBookmarkCssClass:"internal-link favorite-off",deleteBookmarkCssClass:"internal-link favorite-on",processingCssClass:"internal-link processing"};return{}},jQuery,window);t("plugin.evolutionComposer",["events.textinput"],function(b,e,h,m){var k=function(a,f){a=e(a);var b=a.data("__COMPOSER_CONTEXT");!b&&f&&(b=n(a,f),a.data("__COMPOSER_CONTEXT",b));return b},n=function(a,f){var b=e.extend({},e.fn.evolutionComposer.defaults,f||{}),b={input:a,settings:b,plugins:e.map(b.plugins,function(a){return"string"==typeof a?e.fn.evolutionComposer.plugins[a]:a}),ranges:[],activePlugin:!1};b.pluginContext=d(b);b.input.evolutionHighlight();g(b);return b},d=function(a){return{settings:a.settings,input:a.input,data:function(f,b){return"undefined"!==typeof b?a.input.data(f,b):a.input.data(f)},val:function(f){return"undefined"!==typeof f?a.input.val(f):a.input.val()},release:function(){a.activePlugin.onDeactivate&&a.activePlugin.onDeactivate.call(a.input,a.pluginContext);a.activePlugin=!1},caretPosition:function(){return s(a.input)},currentWord:function(b){b=e.extend({allowedWhiteSpaceBeforeCaret:0,allowedWhiteSpaceAfterCaret:0},b||{});var c=b.caretPosition||s(a.input),d="",l=e(a.input).val(),g="",h=0,v=c,r=0;if(c<l.length&&"\n"!==l[c]&&"\t"!==l[c]){g=l.substring(c);h=p(g);0>h&&(h=g.indexOf("\n"));0>h&&(h=g.indexOf("\t"));0>h&&(h=g.length);for(r=0;r<b.allowedWhiteSpaceAfterCaret;r++)
if(0<h){var k=l.substring(c+h+1);nextWhiteSpaceIndex=p(k);nextWhiteSpaceIndex=-1===nextWhiteSpaceIndex?k.length:nextWhiteSpaceIndex;if(0<nextWhiteSpaceIndex)h+=nextWhiteSpaceIndex+1;else break}
0<h&&(v=0,d+=g.substring(0,h))}
if(0<c&&"\n"!==l[c-1]&&"\t"!==l[c-1]){g=l.substring(0,c);h=f(g);for(r=0;r<b.allowedWhiteSpaceBeforeCaret;r++)
if(0<h)
if(c=f(l.substring(0,h)),c!==h)h=c;else break;h===g.length&&(h=g.lastIndexOf("\n"));h===g.length&&(h=g.lastIndexOf("\t"));h===g.length&&(h=g.length-1);h<g.length-1&&(v=h+1,d=g.substring(v)+d)}
if(b.additionalWhiteSpaceSymbols)
for(r=0;r<d.length;r++)
if(-1==e.inArray(d[r],b.additionalWhiteSpaceSymbols)){d=d.substring(r);v+=r;break}
return{value:d,start:v,stop:v+d.length}},replace:function(f,b,c){var d=a.input.val();a.input.val(d.substring(0,f)+c+d.substring(b))},clearHighlights:function(f){var b=[];e.each(a.ranges,function(a,c){f&&c.className===f||b.push(c)});a.ranges=b;a.input.evolutionHighlight({ranges:a.ranges})},addHighlight:function(f){a.ranges.push(f)},renderHighlights:function(){a.input.evolutionHighlight({ranges:a.ranges})}}},g=function(f){f.input.bind({keypress:function(a){c(f,"onkeypress",a)},keydown:function(a){c(f,"onkeydown",a)},textinput:function(b){a(f,b);c(f,"oninput",b);r(f,!1)}})},c=function(a,f,b){var c=!0;a.activePlugin&&a.activePlugin[f]&&(c=a.activePlugin[f].call(b.target,a.pluginContext,b));c?a[f]&&((c=a[f].call(b.target,b))||b.preventDefault()):b.preventDefault()},a=function(a,f){a.activePlugin||e.each(a.plugins,function(f,b){if(b.shouldActivate&&!0===b.shouldActivate.call(a.input,a.pluginContext))return a.activePlugin=b,b.onActivate&&b.onActivate.call(a.input,a.pluginContext),!1})},r=function(a,f){e.each(a.plugins,function(b,c){c.onTransform&&c.onTransform.call(a.input,a.pluginContext,f)})},p=function(a){var f=[];e.each([" ","\t","\n"],function(b,c){var d=a.indexOf(c);0<=d&&f.push(d)});f.sort();return 0<f.length?f[0]:-1},f=function(a){var f=[];e.each([" ","\t","\n"],function(b,c){var d=a.lastIndexOf(c);0<=d&&f.push(d)});f.sort();return 0<f.length?f[f.length-1]:-1},s=function(a){a=a.get(0);if(a.selectionStart)return a.selectionStart;if(document.selection){var f=document.selection.createRange();if(null===f)return 0;a=a.createTextRange();var b=a.duplicate();a.moveToBookmark(f.getBookmark());b.setEndPoint("EndToStart",a);return b.text.length}
return 0},l=function(a){"undefined"!==typeof e.fn.evolutionResize&&a.input.evolutionResize().bind("evolutionResize",function(){a.input.evolutionHighlight("resize",a.input.width(),a.input.height())})},v={init:function(a){return this.filter("textarea").each(function(){var f=e(this),b=k(f,a);l(b);b.input.evolutionHighlight("resize",b.input.width(),b.input.height());if(null!==b){e.each(b.plugins,function(a,c){c.init&&c.init.call(f,b.pluginContext)});b.settings.focus&&setTimeout(function(){f.focus()},10);var c=e.trim(b.input.val());0<c.length&&v.val.call(b.input,c)}})},val:function(a){if("undefined"!==typeof a){var f=k(this);f&&(f.input.val(a),r(f,!0),f.input.trigger("input"))}else{var f=k(this),b="";f&&(b=f.input.val(),e.each(f.plugins,function(a,c){c.val&&(b=c.val.call(f.input,b,f.pluginContext))}));return b}
return this},onkeydown:function(a){var f=k(this);f&&(f.onkeydown=a);return this},oninput:function(a){var f=k(this);f&&(f.oninput=a);return this},resize:function(a,f){var b=k(this);b&&b.input.evolutionHighlight("resize",a,f);return this}};e.fn.evolutionComposer=function(a){if(v[a])return v[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)e.error("Method "+a+" does not exist on jQuery.evolutionComposer");else return v.init.apply(this,arguments)};e.fn.evolutionComposer.defaults={plugins:[],focus:!0};e.fn.evolutionComposer.plugins={};return{}},jQuery,window);t("plugin.evolutionHighlight",function(b,e,h){var m=function(a,c){var d=a.data("_HIGHLIGHTER_CONTEXT");if("undefined"===typeof d||null===d)d={selection:a.filter("textarea"),settings:b.extend({},b.fn.evolutionHighlight.defaults,c||{})},k(d),a.data("_HIGHLIGHTER_CONTEXT",d);return d},k=function(a){a.wrapper=b("<div></div>");a.mirror=b("<div></div>");var c={position:"relative",width:a.selection.outerWidth(),height:a.selection.outerHeight()};b.each(["margin-left","margin-right","margin-top","margin-bottom"],function(f,b){c[b]=a.selection.css(b);a.selection.css(b,0)});var d={position:"absolute",top:"0px",left:"0px",zIndex:"0",borderTopColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",borderRightColor:"transparent",backgroundColor:a.selection.css("backgroundColor"),color:"transparent",width:a.selection.width(),height:a.selection.height(),overflow:"hidden",whiteSpace:"normal"};b.each(a.settings.styles,function(f,b){d[b]=a.selection.css(b)});var f={position:"absolute",top:"0px",left:"0px",zIndex:"1",backgroundColor:"transparent",width:a.selection.width(),height:a.selection.height()};a.wrapper.css(c).addClass("highlighter");a.mirror.css(d);a.selection.css(f);a.mirror.css("color",a.mirror.css("background-color"));a.selection.before(a.wrapper);a.wrapper.append(a.selection);a.wrapper.append(a.mirror)},n=/\s\s/gi,d=/\n/gi,g=function(a){var c={};b.each(a.settings.ranges,function(a,f){c[f.start]=c[f.start]||[];c[f.start].push(b.extend({},f,{index:a}));c[f.stop]=c[f.stop]||[];c[f.stop].push(f)});var e=b.telligent.evolution.html.encode(a.selection.val());newValue=[];for(var f=spanDepth=0;f<e.length;f++)"undefined"!==typeof c[f]&&b.each(c[f],function(a,b){b.start===f?(newValue[newValue.length]='<span class="'+b.className+'" style="white-space:normal;" data-index="'+b.index+'">',spanDepth++):(newValue[newValue.length]="</span>",spanDepth--)}),newValue[newValue.length]=e.charAt(f);0<spanDepth&&(newValue[newValue.length]="</span>");var e=newValue.join("").replace(d,"<br />").replace(n,"&nbsp; "),g=document.createElement("span");g.innerHTML=e;a.mirror.empty().get(0).appendChild(g);a.selection.off("click").on("click",function(f){b("span",a.mirror).each(function(){var c=b(this),d=c.data("index");if(d!==h){var e=c.offset();e.top<=f.pageY&&(e.top+c.height()>=f.pageY&&e.left<=f.pageX&&e.left+c.width()>=f.pageX)&&a.selection.trigger("evolutionRangeClick",a.settings.ranges[d])}})})},c={init:function(a){var c=m(this,a);c.settings=b.extend({},b.fn.evolutionHighlight.defaults,a||{});g(c);return this},clear:function(){var a=m(this,null);if(null!==a)return a.mirror.html(""),this},resize:function(a,b){var c=m(this,null);if(null!==c){var f={width:a,height:b};c.mirror.css(f);c.selection.css(f);c.wrapper.css({width:c.selection.outerWidth(),height:c.selection.outerHeight()});return this}},css:function(a){var b=m(this,null);if(null!==b)return b.wrapper.css(a),this}};b.fn.evolutionHighlight=function(a){if(c[a])return c[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)b.error("Method "+a+" does not exist on jQuery.evolutionHighlight");else return c.init.apply(this,arguments)};b.fn.evolutionHighlight.defaults={ranges:[],styles:"border-top-width border-top-style border-bottom-width border-bottom-style border-right-width border-right-width-value border-right-style border-right-style-value border-left-width border-left-width-value border-left-style border-left-style-value font-family font-size font-size-adjust font-stretch font-style font-variant font-weight padding-bottom padding-left padding-right padding-top letter-spacing line-height text-align text-indent word-spacing".split(" ")};return{}},jQuery,window);t("plugin.evolutionInlineTagEditor",function(b,e,h){var m={},k=function(d,c){if(d.internal.isInitialized){for(var a=c.split(/[,;]/g),e=[],h=0;h<a.length;h++){var f=b.trim(a[h]);f&&(e[e.length]=f)}
d.settings.onSave(e,function(){d.settings.currentTags=e})}},n=function(e){return this.each(function(){var c={settings:b.extend({},b.fn.evolutionInlineTagEditor.defaults,e||{}),internal:{state:b(this)}};b(this).data("evolutionTagInlineEditor_context",c);b(this).html()||b(this).text(c.settings.editButtonText);d(c)})},d=function(d){var c=b("<div></div>").addClass(d.settings.editorCssClass).attr("style","display: none;"),a=b('<label for="tag-area"></label>').hide(),e=b('<textarea id="tag-area"></textarea>').attr("cols","40").attr("rows","2");if(d.settings.allTags&&0<d.settings.allTags.length)var h=b('<input type="button" />').val(d.settings.selectTagsText);var f=b('<input type="button" />').val(d.settings.saveTagsText),s=b('<input type="button" />').val(d.settings.cancelText),l=b('<div style="white-space: nowrap; padding-top: 4px;"><table width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><td align="left"></td><td align="right"></td></tr></tbody></table></div>');l.find("td:eq(1)").append(f);l.find("td:eq(1)").append(s);h&&l.find("td:first").append(h);c.append(a);c.append(e);c.append(l);e.evolutionTagTextBox({allTags:d.settings.allTags});c.glowPopUpPanel({cssClass:d.settings.editorCssClass,position:"updown",zIndex:500,hideOnDocumentClick:!1});b(d.internal.state).bind("click.evolutionInlineTagEditor",function(a){c.glowPopUpPanel("hide").glowPopUpPanel("show",b(this));e.val(0<d.settings.currentTags.length?d.settings.currentTags.join(", "):"");return!1});f.bind("click.evolutionInlineTagEditor",function(a){k(d,e.attr("value"));c.glowPopUpPanel("hide");return!1});s.bind("click.evolutionInlineTagEditor",function(a){c.glowPopUpPanel("hide");return!1});h&&h.bind("click.evolutionInlineTagEditor",function(a){e.evolutionTagTextBox("openTagSelector");return!1});d.internal.state.after(c);d.internal.isInitialized=!0};b.fn.evolutionInlineTagEditor=function(d){if(d in m)return m[d].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof d&&d)b.error("Method "+d+" does not exist on jQuery.fn.evolutionInlineTagEditor");else return n.apply(this,arguments)};b.extend(b.fn.evolutionInlineTagEditor,{defaults:{allTags:[""],currentTags:[""],editorCssClass:"tags-editor",editButtonText:"Edit",selectTagsText:"Select Tags",saveTagsText:"Save",cancelText:"Cancel",onSave:function(b,c){}}});return{}},jQuery,window);t("plugin.evolutionLike",function(b,e,h){var m=!1,k=function(b){var a=b.settings.format;b.hasCount&&(a=a.replace(/\{count\}/gi,'<span class="like-count who-likes"></span>'));b.hasToggle&&(a=a.replace(/\{toggle\}/gi,'<span class="like-toggle"><a href="#" class="internal-link"></a></span>'));b.hasMessage&&(a=a.replace(/\{message\}/gi,'<span class="like-message"></span>'));b.element.html(a);b.hasCount&&(b.countWrapper=b.element.find("span.like-count"),b.countWrapper.html(b.settings.initialCount),b.countWrapper.attr("data-count",b.settings.initialCount));b.hasToggle&&(b.toggleLink=b.element.find("span.like-toggle a"),b.toggleLink.evolutionToggleLink({onHtml:"<span></span>"+b.settings.unlikeText,offHtml:"<span></span>"+b.settings.likeText,onTitle:"",offTitle:"",processingHtml:"<span></span>...",changeState:function(a){d(a,b)},onCssClass:"internal-link like-on",offCssClass:"internal-link like-off",processingCssClass:"internal-link processing",val:"true"===b.settings.initialState}));b.hasMessage&&(b.messageWrapper=b.element.find("span.like-message"),b.messageWrapper.html(b.settings.initialMessage))},n=function(c,a,d){var e="";if(0<a.count){var f=0;d?1===a.count?e=c.settings.whoLikesAccessingText:2===a.count?(e=c.settings.whoLikesAccessingTwoText,f=-1):2<a.count&&(e=c.settings.whoLikesAccessingMultipleText,f=-1):1===a.count?e=c.settings.whoLikesOtherText:2===a.count?(f=-1,e=c.settings.whoLikesOtherTwoText):2<a.count&&(f=-1,e=c.settings.whoLikesOtherMultipleText);e=e.replace(/\{count\}/gi,a.count+f);e=e.replace(/\{user_profile_url\}/gi,a.latestLike.User.ProfileUrl);e=e.replace(/\{user_display_name\}/gi,a.latestLike.User.DisplayName)}
b.telligent.evolution.messaging.publish("ui.like",{contentId:c.settings.contentId,contentTypeId:c.settings.contentTypeId,typeId:c.settings.typeId,count:a.count,liked:d,message:e})},d=function(b,a){if(b)a.settings.onLike(a.settings.contentId,a.settings.contentTypeId,a.settings.typeId,function(b){n(a,b,!0)});else a.settings.onUnlike(a.settings.contentId,a.settings.contentTypeId,a.settings.typeId,function(b){n(a,b,!1)})},g=function(c){b.telligent.evolution.messaging.subscribe("ui.like",function(a){a.contentId===c.settings.contentId&&(a.contentTypeId===c.settings.contentTypeId&&a.typeId===c.settings.typeId)&&(c.hasToggle&&c.toggleLink.evolutionToggleLink("val",a.liked),c.hasCount&&(c.countWrapper.html(a.count),c.countWrapper.attr("data-count",a.count)),c.hasMessage&&c.messageWrapper.html(a.message))})};b.fn.evolutionLike=function(c){var a=b.extend({},b.fn.evolutionLike.defaults,c||{});return this.each(function(){var c={element:b(this),settings:a,hasCount:0<=a.format.indexOf("{count}"),hasToggle:0<=a.format.indexOf("{toggle}"),hasMessage:0<=a.format.indexOf("{message}")};k(c);g(c)})};b.fn.evolutionLike.delegatePopups=function(c){if(!m){m=!0;var a=b.extend({},b.fn.evolutionLike.defaults,c||{}),d=b.telligent.evolution.template.compile(a.likersTemplate),e=b.telligent.evolution.template.compile(a.likersPopupTemplate),f=function(f,b,c){a.onList(f.contentId,f.contentTypeId,f.typeId,function(a){c(a)},f.pageSize,b)},g=function(c,g){var s=0,q=b(d(c)),h=b(e({likers:q,hasMorePages:c.hasMorePages,showMoreText:a.modalShowMoreText})),k=h.find("ul"),n=h.find(".show-more"),m=a.onOptions(b(g).closest(a.delegatedSelector));k.html(q);n.on("click",function(a){a.preventDefault();s++;f(m,s,function(a){k.append(d(a));a.hasMorePages?n.show():n.hide();k.scrollTop(k[0].scrollHeight)})});b.glowModal({title:a.modalTitleText,html:h,width:450,height:"100%"})};(function(){b(a.containerSelector).on("click",a.delegatedSelector+" .who-likes",function(c){var d=b(this);c=a.onOptions(b(d).closest(a.delegatedSelector));f(c,0,function(a){g(a,d)})})})()}};b.fn.evolutionLike.defaults={contentId:"",contentTypeId:"",typeId:"",initialState:!1,initialMessage:"",initialCount:0,format:"",onLike:function(b,a,d,e){},onUnlike:function(b,a,d,e){},likeText:"Like",unlikeText:"Unlike",whoLikesOtherText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> likes this',whoLikesOtherTwoText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> <span class="who-likes">and 1 other</span> like this.',whoLikesOtherMultipleText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> and <span class="who-likes">{count} others</span> like this.',whoLikesAccessingText:"You like this",whoLikesAccessingTwoText:'You and <span class="who-likes">1 other</span> like this',whoLikesAccessingMultipleText:'You and <span class="who-likes">{count} others</span> like this',modalTitleText:"People who like this",modalShowMoreText:"Show more",onList:function(b,a,d,e){},onOptions:function(b){},containerSelector:"",delegatedSelector:"",delay:500,likersTemplate:' <% foreach(likers, function(liker) { %>      <li class="content-item">          <div class="full-post-header"></div>          <div class="full-post">              <span class="avatar">                  <a href="<%: liker.profileUrl %>"  class="internal-link view-user-profile">                      <% if(liker.avatarHtml) { %>                          <%= liker.avatarHtml %>                      <% } else { %>                          <img src="<%: liker.avatarUrl %>" alt="" border="0" width="32" height="32" style="width:32px;height:32px" />                      <% } %>                  </a>              </span>              <span class="user-name">                  <a href="<%: liker.profileUrl %>" class="internal-link view-user-profile"><%= liker.displayName %></a>              </span>          </div>          <div class="full-post-footer"></div>      </li>  <% }); %> ',likersPopupTemplate:' <div class="who-likes-list">      <div class="content-list-header"></div>      <ul class="content-list"><%= likers %></ul>      <div class="content-list-footer"></div>      <% if(hasMorePages) { %>          <a href="#" class="show-more"><%= showMoreText %></a>     <% } %>  </div> '};return{}},jQuery,window);t("plugin.evolutionMasonry",["lib.util"],function(b,e,h,m){function k(a){function f(c){a.length<=c?b.resolve():a[c]().done(function(){f(c+1)}).fail(function(){b.reject()})}
var b;b=e.Deferred();f(0);return b.promise()}
function n(a){return e(document.createElement("div")).html("&nbsp;").addClass(a.columnClass).css({"float":"left",minHeight:"1px",overflow:"hidden"})}
function d(a){for(var f=0;f<a.columns.length;f++)e(a.columns[f]).empty()}
function g(a){for(var f=null,b=null,c=0;c<a.columns.length;c++)
if(null===f||null===b)f=a.columns[c],b=a.columns[c].height();else{var d=a.columns[c].height();d<b&&(f=a.columns[c],b=d)}
return f}
function c(a,f){var b;f?b=f:(b=a.children,d(a));k(e.map(b,function(f){return function(){return e.Deferred(function(b){var c=g(a);if(c){var d=c.height();a.animate?e(f).appendTo(c).css({opacity:0.01}).evolutionTransform({opacity:0.99},{duration:a.animationDuration}):c.append(f);var l=setInterval(function(){c.height()-d>a.threshold&&(clearInterval(l),clearTimeout(h),b.resolve())},5),h=setTimeout(function(){clearInterval(l);clearTimeout(h);b.resolve()},500)}else b.reject()}).promise()}}))}
function a(a,f){f&&a.children.detach();a.container.empty();a.columns=[];var b=0,d=0,e=n(a),g=!1;e.height(1200).appendTo(a.container);d=a.container.width();e.height(0).remove();for(var h=50;b<d&&0<h;){h--;var p=n(a);g?e.before(p):p.appendTo(a.container);b+=p.outerWidth(!0);b<=d?a.columns.push(p):p.remove();g||(e.appendTo(a.container),g=!0)}
g&&e.remove();c(a)}
function r(f){return this.each(function(){var b=e.extend({},e.fn.evolutionMasonry.defaults,f||{});b.container=e(this);b.children=b.container.children().detach();a(b);e(window).on("resized",function(){a(b,!0)});b.container.data(p,b)})}
var p="_evolutionMasonry_context",f={append:function(a){if(a&&0!=a.length){var f=e(a).filter("div");return this.each(function(){var a=e(this).data(p);a&&(a.children=a.children.add(f),c(a,f))})}}};e.fn.evolutionMasonry=function(a){if(a in f)return f[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)e.error("Method "+a+" does not exist on jQuery.fn.evolutionMasonry");else return r.apply(this,arguments)};e.fn.evolutionMasonry.defaults={columnClass:"masonry-column",animate:!0,animationDuration:150,threshold:35};return{}},jQuery,window);t("plugin.evolutionModerate",function(b,e,h){var m=b.telligent.evolution,k=function(b){b.settings.onReport(b.settings.contentId,b.settings.contentTypeId,function(e){m.messaging.publish("ui.reportabuse",{contentId:b.settings.contentId,contentTypeId:b.settings.contentTypeId});showNotification(b,e.Report)})},n=function(b){b.hideTimer&&(clearTimeout(b.hideTimer),b.hideTimer=null)};buildModerationLink=function(d){d.moderationLink=b(m.template.compile(d.settings.moderationLinkTemplate)({linkClassName:d.settings.linkClassName,resources:{moderateLinkText:d.settings.moderateLinkText}})).appendTo(d.element)};buildModerationPopup=function(d){d.popup=b("<div></div>").glowPopUpPanel({cssClass:"content-moderation",position:"downleft",zIndex:1E3,hideOnDocumentClick:!0});d.popup.bind({glowPopUpPanelShown:function(b){d.moderationLink.addClass("open")},glowPopUpPanelHidden:function(b){d.moderationLink.removeClass("open")}})};buildModerationMenuContent=function(d,e){d.settings.onGetAdditionalLinks(function(c){var a=[],a=d.settings.supportsAbuse?d.settings.initialState?c.concat([{href:"#",className:"evolutionModerateFlagged",text:d.settings.reportedLinkText}]):c.concat([{href:"#",className:"evolutionModerateFlag",text:d.settings.reportLinkText}]):c;c=b(m.template.compile(d.settings.moderationMenuTemplate)({links:a}));c.bind("mouseleave",function(a){hideMenu(d)});c.bind("mouseenter",function(a){n(d)});c.delegate("a","click",function(a){var c=b(a.target);c.hasClass("evolutionModerateFlag")?(a.preventDefault(),k(d)):c.hasClass("evolutionModerateFlagged")?a.preventDefault():("#"===c.attr("href")&&a.preventDefault(),d.element.trigger("evolutionModerateLinkClicked",a.target))});e(c)})};showMenu=function(b){b.popup||buildModerationPopup(b);buildModerationMenuContent(b,function(e){n(b);b.popup.glowPopUpPanel("html",e).glowPopUpPanel("show",b.moderationLink)})};hideMenu=function(b){b.hideTimer||(b.hideTimer=setTimeout(function(){b.popup.glowPopUpPanel("hide");b.hideTimer=null},200))};formatNotificationMessage=function(b,e){return b.settings.reportedNotificationMessageText.replace(/\{NAME\}/gi,e&&e.AuthorUser&&e.AuthorUser.DisplayName?e.AuthorUser.DisplayName:"")};showNotification=function(b,e){var c=m.template.compile(b.settings.notificationTemplate)({resources:{reportedNotificationMessageText:formatNotificationMessage(b,e),undoLinkText:b.settings.undoLinkText},contextId:b.contextId});m.notifications.show(c,{type:"moderation",duration:b.settings.notificationDuration,cssClass:""})};handleFlagMessages=function(b){m.messaging.subscribe("ui.reportabuse",function(e){b.settings.contentId===e.contentId&&b.settings.contentTypeId===e.contentTypeId&&(b.settings.initialState=!0)})};init=function(d){buildModerationLink(d);d.moderationLink.bind({click:function(b){b.preventDefault();d.popup&&d.popup.glowPopUpPanel("isShown")?hideMenu(d):showMenu(d);n(d)},mouseleave:function(e){b(e.relatedTarget).is(".content-moderation")||0!==b(e.relatedTarget).closest(".content-moderation").length||hideMenu(d)}});handleFlagMessages(d)};b.fn.evolutionModerate=function(d){var e=b.extend({},b.fn.evolutionModerate.defaults,d||{});return this.each(function(){var c={element:b(this),settings:e};init(c)})};b.fn.evolutionModerate.defaults={contentId:"",contentTypeId:"",initialState:!1,linkClassName:"",onReport:function(b,e,c){},onGetAdditionalLinks:function(b){b([])},notificationDuration:5E3,moderateLinkText:"moderate",supportsAbuse:!0,reportLinkText:"Flag as spam/abuse",reportedLinkText:"Flagged as spam/abuse",reportedNotificationMessageText:"{NAME}'s post has been flagged. <strong>Thank you for your feedback.</strong>",undoLinkText:"Undo",moderationLinkTemplate:'<a href="#" class="<%: linkClassName %>"><span></span><%= resources.moderateLinkText %></a>',moderationMenuTemplate:'<ul class="navigation-list">   <% foreach(links, function(link){ %>       <li class="navigation-item">           <a href="<%: (link.href || "#") %>" class="<%: (link.className || "") %>"><%= link.text %></a>       </li>   <% }); %></ul>',notificationTemplate:"<p><%= resources.reportedNotificationMessageText %></p>"};return{}},jQuery,window);t("plugin.evolutionPager",function(b,e,h){var m={},k={},n={},d=function(a){var f=[],c=a.settings,d=function(a){var f={};f[c.pageKey]=a;a={url:c.baseUrl,query:f};c.hash&&0<c.hash.length&&(a[c.hash]=c.hash);return b.telligent.evolution.url.modify(a)};0===c.totalItems||0===c.pageSize?a=0:(a=Math.floor(c.totalItems/c.pageSize),0<c.totalItems%c.pageSize&&(a+=1));if(1<a){c.showFirst&&3<=c.currentPage&&a>c.numberOfPagesToDisplay&&(f[f.length]={type:"first",selected:!1,page:1,url:d(1)});c.showPrevious&&0<c.currentPage&&(f[f.length]={type:"previous",selected:!1,page:c.currentPage,url:d(c.currentPage)});if(c.showIndividualPages){var e;e=a<c.numberOfPagesToDisplay||0>c.currentPage-Math.floor(c.numberOfPagesToDisplay/2)?0:c.currentPage+Math.floor(c.numberOfPagesToDisplay/2)>=a?a-c.numberOfPagesToDisplay:c.currentPage-Math.floor(c.numberOfPagesToDisplay/2);var g;g=Math.floor(c.numberOfPagesToDisplay/2);0===c.numberOfPagesToDisplay%2&&(g-=1);for(g=a<c.numberOfPagesToDisplay||c.currentPage+g>=a?a-1:0>c.currentPage-Math.floor(c.numberOfPagesToDisplay/2)?c.numberOfPagesToDisplay-1:c.currentPage+g;e<=g;e++)f[f.length]={type:"page",selected:c.currentPage===e,page:e+1,url:d(e+1)}}
c.showNext&&c.currentPage+1<a&&(f[f.length]={type:"next",selected:!1,page:c.currentPage+2,url:d(c.currentPage+2)});c.showLast&&c.currentPage+3<a&&a>c.numberOfPagesToDisplay&&(f[f.length]={type:"last",selected:!1,page:a,url:d(a)})}
return f},g=function(a){var f=a.template({links:a.links});a.selection.html(f)},c=function(a){if(!a.settings.refreshOnAnyHashChange)return null;var f=b.telligent.evolution.url.hashData(),c=null,d;for(d in f)0==d.indexOf(a.settings.pageKey)&&(c=c||{},c[d.substr(a.settings.pageKey.length)]=f[d]);return c},a=function(a){var f=parseInt(b.telligent.evolution.url.hashData()[a.settings.pageKey],10),d=c(a);d&&(f=f||1);isNaN(f)||f===a.settings.currentPage||n[a.settings.pageKey]||(n[a.settings.pageKey]=!0,a.settings.onPage(f,function(b){a.currentPageIndex=f;s(a,f,0,b,!1)},d||{}))},r=function(a){b(a.selection).delegate("a","click",function(f){f.preventDefault();f=b(this);var c={};c[a.settings.pageKey]=f.data("page");b.telligent.evolution.url.hashData(c)})},p=function(a){m[a.settings.pageKey]||(m[a.settings.pageKey]=!0,a.currentPageIndex=parseInt(b.telligent.evolution.url.hashData()[a.settings.pageKey],10),isNaN(a.currentPageIndex)&&(a.currentPageIndex=a.settings.currentPage),b(window).bind("hashchange",function(f){f=parseInt(b.telligent.evolution.url.hashData()[a.settings.pageKey],10);if(c(a)||!isNaN(f)&&a.currentPageIndex!=f){a.newPageIndex=f;var d={currentPage:a.currentPageIndex||1,newPage:a.newPageIndex||1,container:a.settings.pagedContentContainer};b.telligent.evolution.messaging.publish(a.settings.pagedContentPagingEvent,d);a.selection.trigger("evolutionPagerPaging",d);a.currentPageIndex=f}}))},f=function(a){k[a.settings.pagedContentPagingEvent]&&(a.currentPageIndex=parseInt(b.telligent.evolution.url.hashData()[a.settings.pageKey],10),b.telligent.evolution.messaging.unsubscribe(k[a.settings.pagedContentPagingEvent]));k[a.settings.pagedContentPagingEvent]=b.telligent.evolution.messaging.subscribe(a.settings.pagedContentPagingEvent,function(f){n[a.settings.pageKey]||(n[a.settings.pageKey]=!0,a.settings.onPage(f.newPage,function(b){a.currentPageIndex=f.newPage;s(a,f.newPage,f.currentPage,b,!0)},c(a)||{}))})},s=function(a,f,c,e,s){var h=function(){var c={page:f,container:a.settings.pagedContentContainer};b.telligent.evolution.messaging.publish(a.settings.pagedContentPagedEvent,c);a.selection.trigger("evolutionPagerPaged",c)};!s||"slide"!==a.settings.transition&&"fade"!==a.settings.transition?(b(a.settings.pagedContentContainer).html(e),h(),n[a.settings.pageKey]=!1):(s="fade","slide"===a.settings.transition&&(s=f<c?"slideRight":"slideLeft"),c=b(a.settings.pagedContentContainer),e=b("<div></div>").attr("id",c.attr("id")).html(e).hide().insertAfter(a.settings.pagedContentContainer),c.glowTransition(e,{type:s,duration:a.settings.transitionDuration,complete:function(){b(a.settings.pagedContentContainer).css({width:"",height:"",overflow:"hidden"});h();n[a.settings.pageKey]=!1}}));a.settings.currentPage=f-1;a.links=d(a);g(a)};b.fn.evolutionPager=function(c){c=b.extend({},b.fn.evolutionPager.defaults,c||{});var e={selection:this,settings:c,template:b.telligent.evolution.template.compile(c.template)};e.links=d(e);g(e);c.onPage&&(c.pagedContentContainer&&0<c.pagedContentContainer.length)&&(f(e),p(e),r(e),a(e));return this};b.fn.evolutionPager.defaults={currentPage:0,pageSize:10,totalItems:0,showPrevious:!1,showNext:!1,showFirst:!0,showLast:!0,showIndividualPages:!0,numberOfPagesToDisplay:5,pageKey:"pi",hash:"",baseUrl:window.location.href,onPage:function(a,f){},pagedContentContainer:"",pagedContentPagingEvent:"ui.page.paging",pagedContentPagedEvent:"ui.page.paged",transition:null,transitionDuration:250,refreshOnAnyHashChange:!1,template:' <% foreach(links, function(link, i) { %>      <% if(link.type === "first") { %>          <a href="<%: link.url %>" class="first" data-type="first" data-page="<%= link.page %>" data-selected="false"><span>&#171;</span></a>      <% } else if(link.type === "previous") { %>          <a href="<%: link.url %>" class="previous" data-type="previous" data-page="<%= link.page %>" data-selected="false"><span>&#60;</span></a>     <% } else if(link.type === "page") { %>          <a href="<%: link.url %>" class="page<%= link.selected ? " selected" : "" %>" data-type="page" data-page="<%= link.page %>" data-selected="<%= link.selected ? "true" : "false" %>"><span><%= link.page %></span></a>      <% } else if(link.type === "next") { %>          <a href="<%: link.url %>" class="next" data-type="next" data-page="<%= link.page %>" data-selected="false"><span>&#62;</span></a>     <% } else if(link.type === "last") { %>          <a href="<%: link.url %>" class="last" data-type="last" data-page="<%= link.page %>" data-selected="false"><span>&#187;</span></a>      <% } %>      <% if(i < (links.length - 1)) { %>          <span class="separator"></span>      <% } %>  <% }); %> '};return{}},jQuery,window);t("plugin.evolutionResize",function(b,e,h){function m(){if(!n){n=!0;var c=b("<textarea>test</textarea>").css({overflow:"hidden",resize:"none",visible:"none"}).appendTo("body");1>=Math.abs(c.prop("scrollHeight")-c.height())&&(k=0);c.remove()}}
var k=null,n=!1,d=function(b){b.area.css({height:"auto"}).css({height:b.area.prop("scrollHeight")-(null===k?b.offset:k)});var a=b.area.outerHeight();a!==b.oldHeight&&(a>=b.maxHeight?b.area.css({overflow:"visible"}):b.area.css({overflow:"hidden"}),b.area.trigger("evolutionResize",{newHeight:a,oldHeight:b.oldHeight}),b.oldHeight=a)},g=function(b){return parseInt(b.replace("px",""),10)};b.fn.evolutionResize=function(){m();return this.filter("textarea").each(function(){var c=b(this).css({resize:"none",overflow:"hidden"}),a={area:c,oldHeight:c.height(),maxHeight:g(c.css("max-height")),offset:c.innerHeight()!==c.height()?g(c.css("padding-top"))+g(c.css("padding-bottom")):0};c.bind("input keydown keyup",function(){d(a)});d(a)})};return{}},jQuery,window);t("plugin.evolutionScrollSlider",function(b,e,h){var m=!1,k=function(b){var e=b.window.height()>=b.document.height(),c=function(){var a=b.document.height(),c=b.window.height(),e=b.window.scrollTop();return(a-e-c)/a};b.window.bind("scroll.evolutionScrollSlider",function(){e=!0});setInterval(function(){e&&(e=!1,!m&&1-c()>=b.revealAt?(m=!0,b.document.trigger("evolutionScrollSliderShow")):m&&1-c()<b.revealAt&&(m=!1,b.document.trigger("evolutionScrollSliderHide")))},b.bounceDelay)},n=function(d){var e=b("<div></div>").hide().addClass(d.className).css({width:d.width,minHeight:d.height,maxHeight:0.7*d.window.height(),position:"fixed",bottom:d.offsetBottom,right:"0px"}).appendTo("body"),c=function(){d.load(function(a){a&&(e.html(a),b.fn.evolutionTransform.accelerated()?e.hide().evolutionTransform({left:e.width()+d.offsetRight,opacity:0},{duration:0}).show().evolutionTransform({left:-1*d.offsetRight,opacity:1},{duration:200}):e.css({right:-e.width()}).show().animate({right:d.offsetRight},{duration:d.animationDuration}))})},a=function(){b.fn.evolutionTransform.accelerated()?e.evolutionTransform({opacity:0},{duration:100}):e.animate({right:-e.width()},{duration:d.animationDuration,complete:function(){e.hide()}})};d.document.on("evolutionScrollSliderShow.evolutionScrollSlider",function(){c()}).on("evolutionScrollSliderHide.evolutionScrollSlider",function(){a()})};b.evolutionScrollSlider=function(d){d=b.extend({},b.evolutionScrollSlider.defaults,d||{},{window:b(window),document:b(document)});d.document.unbind(".evolutionScrollSlider");d.window.unbind(".evolutionScrollSlider");k(d);n(d)};b.evolutionScrollSlider.hide=function(){b(document).trigger("evolutionScrollSliderHide")};b.evolutionScrollSlider.defaults={load:function(b){b(null)},width:400,height:75,className:"slider-content",animationDuration:250,offsetBottom:25,offsetRight:25,bounceDelay:150,revealAt:0.8};return{}},jQuery,window);t("plugin.evolutionStarRating",function(b,e,h){var m=[],k=/MSIE 6/i.test(navigator.userAgent)?"gif":"png",n=function(b,a){return 1==a%2?b.settings.imagesPathUrl+"star-right-on."+k:b.settings.imagesPathUrl+"star-left-on."+k},d=function(b,a){return 1==a%2?b.settings.imagesPathUrl+"star-right-off."+k:b.settings.imagesPathUrl+"star-left-off."+k};_cacheImages=function(b){var a,e,g;for(g=0;2>g;g++)e=n(b,g),_isImageCached(e)||(a=new Image,a.src=e,m[m.length]=a),e=d(b,g),_isImageCached(e)||(a=new Image,a.src=e,m[m.length]=a)};_isImageCached=function(b,a){var d;for(d=0;d<m.length;d++)
if(m[d].src==a)return!0;return!1};_getItemTitle=function(b,a,d){return"object"==typeof b.settings.titles?b.settings.titles[a].replace("{0}",d):b.settings.titles?b.settings.titles.replace("{0}",d):d};_getValue=function(b){return"undefined"!==typeof b.internal.value?b.internal.value:b.settings.value};_setValue=function(b,a){b.internal.isInitialized&&!b.settings.isReadOnly&&(b.internal.value=a,b.settings.allowMultipleSelections||(b.settings.isReadOnly=!0),b.internal.savingValue=!0,b.settings.onRate(a))};_showValue=function(c,a){var e,g=2*c.settings.maxRating;a=2*a-1;var f="img"==c.settings.starElement;for(e=0;e<g;e++)e<=a?f?b(c.internal.state.find("img").get(e)).attr("src",n(c,e)).removeClass().addClass("star-on-"+(0==e%2?"left":"right")):b(c.internal.state.find("span").get(e)).removeClass().addClass("star-on-"+(0==e%2?"left":"right")):f?b(c.internal.state.find("img").get(e)).attr("src",d(c,e)).removeClass().addClass("star-off-"+(0==e%2?"left":"right")):b(c.internal.state.find("span").get(e)).removeClass().addClass("star-off-"+(0==e%2?"left":"right"))};_mouseOver=function(b,a){b.internal.isInitialized&&!b.settings.isReadOnly&&(b.internal.state.addClass(b.settings.overClass),_showValue(b,a))};_mouseOut=function(b,a){b.internal.isInitialized&&!b.settings.isReadOnly&&(b.internal.state.removeClass(b.settings.overClass),_showValue(b,a))};_init=function(c){return this.each(function(){var a={settings:b.extend({},b.fn.evolutionStarRating.defaults,c||{}),internal:{state:b(this)}};a.settings.imagesPathUrl||(a.settings.imagesPathUrl=b.telligent.evolution.site.getBaseUrl()+"utility/images/");_cacheImages(a);b(this).data("evolutionStarRating_context",a);_initialize(a)})};_initialize=function(c){c.internal.state.addClass(c.settings.starClass).css("white-space","nowrap").find("a").unbind(".evolutionStarRating").empty().end().bind("mouseleave",function(){_showValue(c,_getValue(c))});c.settings.isReadOnly&&c.internal.state.addClass(c.settings.readOnlyClass);var a,e=2*c.settings.maxRating,g="undefined"===typeof c.settings.ratingCount,f="img"==c.settings.starElement;for(a=0;a<e;a++)(function(){var e,l;l=f?b("<img />").css({borderLeftWidth:"0px",borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px"}):b("<span></span>");c.settings.isReadOnly||(e=b('<a href="#" />').css({textDecoration:"none"}).append(l));var h=(a+1)/2;h<=c.settings.value?f?l.attr("src",n(c,a)).addClass("star-on-"+(0==a%2?"left":"right")):l.addClass("star-on-"+(0==a%2?"left":"right")):f?l.attr("src",d(c,a)).addClass("star-off-"+(0==a%2?"left":"right")):l.addClass("star-off-"+(0==a%2?"left":"right"));if(!c.settings.isReadOnly){if(c.settings.useHalfStars)u=_getItemTitle(c,a,h);else var h=Math.ceil(h),u=_getItemTitle(c,h,h);g&&e.attr("title",u);f&&l.attr("alt",u);e.data("rating-value",h).bind("click.evolutionStarRating",function(a){_setValue(c,e.data("rating-value"));return!1}).bind("focus.evolutionStarRating",function(a){_mouseOver(c,e.data("rating-value"))}).bind("mouseover.evolutionStarRating",function(a){_mouseOver(c,e.data("rating-value"))}).bind("blur.evolutionStarRating",function(a){_mouseOut(c,e.data("rating-value"))}).bind("mouseout.evolutionStarRating",function(a){_mouseOut(c,e.data("rating-value"))})}
f&&l.attr("align","absmiddle").attr("border",0);e?c.internal.state.append(e):c.internal.state.append(l)})();_setMessage(c);c.internal.isInitialized=!0};_setMessage=function(b){!b.settings.ratingMessageFormat||(isNaN(parseInt(b.settings.ratingCount))||isNaN(parseInt(b.settings.value)))||b.internal.state.attr("title",b.settings.ratingMessageFormat.replace(/\{rating\}/gi,Math.round(10*b.settings.value)/10).replace(/\{count\}/gi,b.settings.ratingCount))};var g={val:function(b){var a=this.data("evolutionStarRating_context");return null!==a?"undefined"!==typeof b?(a.internal.value=b,_showValue(a,b),b):_getValue(a):0},readOnly:function(b){var a=this.data("evolutionStarRating_context");if(null!==a)
if("undefined"!==typeof b)(a.settings.isReadOnly=b)?a.internal.state.find("a").css({cursor:"default"}):a.internal.state.find("a").css({cursor:"pointer"});else return a.settings.isReadOnly;return!0},option:function(c,a){if("object"===typeof c)return this.each(function(){var a=b(this).data("evolutionStarRating_context");null!=a&&(a.settings=b.extend({},a.settings,c),_init.apply(b(this),[a.settings]))});if("undefined"!==typeof c&&"undefined"!==typeof a)return this.each(function(){var d=b(this).data("evolutionStarRating_context");null!=d&&(d.settings[c]=a,_init.apply(b(this),[d.settings]))});if("undefined"!==typeof c){var d=this.data("evolutionStarRating_context");return null!==d?d.settings[c]:null}}};b.fn.evolutionStarRating=function(c){if(c in g)return g[c].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof c&&c)b.error("Method "+c+" does not exist on jQuery.fn.evolutionStarRating");else return _init.apply(this,arguments)};b.extend(b.fn.evolutionStarRating,{defaults:{value:0,maxRating:5,imagesPathUrl:"",starElement:"img",useHalfStars:!1,starClass:"rating",overClass:"active",readOnlyClass:"readonly",titles:"Terrible Poor Fair Average Good Excellent".split(" "),isReadOnly:!1,allowMultipleSelections:!0,ratingCount:void 0,ratingMessageFormat:"Average rating: {rating} out of {count} ratings.",onRate:function(b){}}});return{}},jQuery,window);t("plugin.evolutionTagTextBox",function(b,e,h){var m={openTagSelector:function(){var a=this.data("evolutionTagTextBox");if(a){window.__tagEditor={SetSelectedTags:function(c){for(var f=[],d=n(a),e=a.settings.allTags,g,h=0;h<d.length;h++){g=!1;for(var q=0;q<e.length;q++)
if(d[h].toUpperCase()==e[q].toUpperCase()){g=!0;break}
g||(f[f.length]=d[h])}
for(h=0;h<c.length;h++)f[f.length]=c[h];b(a.internal.state).val(f.join(", "))},GetAllTagsWithEncoding:function(){for(var c=[],f=a.settings.allTags,d=b("<div></div>"),e=0;e<f.length;e++)d.text(f[e]),c[e]=[f[e],d.html()];return c},GetSelectedTags:function(){return n(a)}};var c=b.telligent.evolution.ensureRemoteUrlEncoding(a.settings.selectTagsModalUrl);"~/"==c.substr(0,2)&&(c=b.telligent.evolution.site.getBaseUrl()+c.substr(2));window.Telligent_Modal?window.Telligent_Modal.Open(c,400,350,null):b.glowModal&&b.glowModal(c,{width:400,height:350})}}},k=function(a){return this.each(function(){var e={settings:b.extend({},b.fn.evolutionTagTextBox.defaults,a||{}),internal:{state:this,suggestionTimeoutHandle:null,previousTags:[],previousValue:"",currentTag:"",currentTagPosition:0}};b(this).data("evolutionTagTextBox",e);c(e);b(this).bind("keyup.evolutionTagTextBox",function(a){return g(e,a)});b(this).bind("keydown.evolutionTagTextBox",function(a){return d(e,a)});b(this).bind("onblur.evolutionTagTextBox",function(a){window.clearTimeout(e.internal.suggestionTimeoutHandle);return!0})})},n=function(a){a=b(a.internal.state).val().split(/;|,/);for(var c=[],d=0;d<a.length;d++)a[d]=a[d].replace(/^\s+|\s+$/g,""),""!=a[d]&&(c[c.length]=a[d]);return c},d=function(a,b){window.clearTimeout(a.internal.suggestionTimeoutHandle);b||(b=window.event);if(b){if(13==b.keyCode){a.internal.state.focus();if(document.selection){var c=window.document.selection.createRange();c.text&&0<c.text.length&&(c.moveStart("character",c.text.length),c.select())}else if(a.internal.state.selectionStart||"0"==a.internal.state.selectionStart)a.internal.state.selectionStart=a.internal.state.selectionEnd;b.cancelBubble=!0;return b.returnValue=!1}
if(8==b.keyCode)
if(a.internal.state.focus(),document.selection){if(c=window.document.selection.createRange())return c.moveStart("character",-1),c.text="",b.cancelBubble=!0,b.returnValue=!1}else if(a.internal.state.selectionStart||"0"==a.internal.state.selectionStart){var c=a.internal.state.selectionStart,f=a.internal.state.selectionEnd;if(c==f)return!0;0<c&&c--;a.internal.state.value=a.internal.state.value.substring(0,c)+a.internal.state.value.substring(f);a.internal.state.selectionStart=c;a.internal.state.selectionEnd=c;b.cancelBubble=!0;return b.returnValue=!1}
return!0}},g=function(a,d){window.clearTimeout(a.internal.suggestionTimeoutHandle);a.internal.suggestionTimeoutHandle=window.setTimeout(function(){if((document.selection||a.internal.state.selectionStart||"0"==a.internal.state.selectionStart)&&b(a.internal.state).val()!=a.internal.previousValue&&(a.internal.previousValue=b(a.internal.state).val(),c(a),""!=a.internal.currentTag)){var d;b:{d=a.internal.currentTag;var f,e,l,g=a.settings.allTags;for(f=0;f<g.length;f++)
if(0==g[f].toLowerCase().indexOf(d)){l=!1;for(e=0;e<a.internal.previousTags.length&&!l;e++)a.internal.previousTags[e]==g[f].toLowerCase()&&(l=!0);if(!l){d=g[f];break b}}
d=null}
if(d&&d.length!=a.internal.currentTag.length)
if(d=d.substr(a.internal.currentTag.length),b(a.internal.state).val(b(a.internal.state).val().substr(0,a.internal.currentTagPosition+a.internal.currentTag.length)+d+b(a.internal.state).val().substr(a.internal.currentTagPosition+a.internal.currentTag.length)),a.internal.state.focus(),document.selection)f=a.internal.state.createTextRange(),f.select(),f.moveStart("character",a.internal.currentTagPosition+a.internal.currentTag.length),f.moveEnd("character",-(b(a.internal.state).val().length-(a.internal.currentTagPosition+a.internal.currentTag.length+d.length))),f.select();else if(a.internal.state.selectionStart||"0"==a.internal.state.selectionStart)a.internal.state.selectionStart=a.internal.currentTagPosition+a.internal.currentTag.length,a.internal.state.selectionEnd=a.internal.currentTagPosition+a.internal.currentTag.length+d.length}},249);return!0},c=function(a){var c=b(a.internal.state).val().toLowerCase().split(/;|,/),d,f,e;a.internal.currentTag="";var l=0,g=!0;for(d=0;d<c.length;d++){f=c[d].replace(/^\s+/g,"");l+=c[d].length-f.length;c[d]=f;e=!1;for(f=0;f<a.internal.previousTags.length&&!e;f++)c[d]==a.internal.previousTags[f]&&(a.internal.previousTags.splice(f,1),e=!0);e||(""!=a.internal.currentTag?g=!1:(a.internal.currentTag=c[d],a.internal.currentTagPosition=l));l+=c[d].length+1}
g||(a.internal.currentTag="");a.internal.previousTags=c};b.fn.evolutionTagTextBox=function(a){if(a in m)return m[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)b.error("Method "+a+" does not exist on jQuery.fn.evolutionTagTextBox");else return k.apply(this,arguments)};b.extend(b.fn.evolutionTagTextBox,{defaults:{allTags:[],selectTagsModalUrl:"~/utility/tagselector?TagEditor=__tagEditor"}});return{}},jQuery,window);t("plugin.evolutionTextEditor",function(b,e,h){var m=function(d){var e="";d.isReadOnly?e=d.readOnlyView.html():b.telligent.evolution.put({url:b.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/html/fromtext.json",data:{text:d.editor.evolutionComposer("val")},dataType:"json",async:!1,success:function(b){e=b.Html}});return e},k=function(d,e){b.telligent.evolution.put({url:b.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/text/fromhtml.json",data:{html:e},dataType:"json",async:!1,success:function(b){b.TextConversion.IsDataLost?(d.isReadOnly||(d.readOnlyView.css("height",d.editor.height()+"px"),d.readOnlyView.css("width",d.editor.width()+"px"),d.isReadOnly=!0,d.readOnlyView.show(),d.editorWrapper.hide()),d.readOnlyView.html(e),d.editor.val("<!html>"+e)):(d.isReadOnly&&(d.isReadOnly=!1,d.readOnlyView.hide(),d.editorWrapper.show()),d.editor.evolutionComposer("val",b.TextConversion.Text),d.editor.trigger("input"))}})},n={init:function(d){return this.each(function(){var e=b(this);if(!e.data("__EVOLUTIONTEXTEDITOR_CONTEXT")){var c=e.innerWidth()-parseInt(e.css("padding-left"),10)-parseInt(e.css("padding-right"),10),a=e.innerHeight()-parseInt(e.css("padding-top"),10)-parseInt(e.css("padding-bottom"),10),h=e.val(),p=b('<div class="text-editor-wrapper"></div>');p.insertAfter(e);p.append(e);var f=b('<div class="text-editor-read-only" style="overflow: auto; padding: 2px; border: 1px solid; box-sizing: border-box"></div>').hide();f.on("click",function(){d.readOnlyMessage&&alert(d.readOnlyMessage)});f.insertAfter(p);e.evolutionComposer({plugins:d.plugins,focus:!1}).data("__EVOLUTIONTEXTEDITOR_CONTEXT",{editorWrapper:p,editor:e,readOnlyView:f,isReadOnly:!1});setTimeout(function(){e.evolutionComposer("resize",c,a)},50);0<b.trim(h).length&&k(b(e).data("__EVOLUTIONTEXTEDITOR_CONTEXT"),h)}})},val:function(d){if("undefined"!==typeof d){var e=b(this).data("__EVOLUTIONTEXTEDITOR_CONTEXT");if(e)return k(e,d)}else return(e=b(this).data("__EVOLUTIONTEXTEDITOR_CONTEXT"))?m(e):"";return this},focus:function(d){(d=b(this).data("__EVOLUTIONTEXTEDITOR_CONTEXT"))&&(d.isReadOnly||d.editor.focus());return this},resize:function(d,e){var c=b(this).data("__EVOLUTIONTEXTEDITOR_CONTEXT");c&&(c.evolutionComposer("resize",d,e),isNaN(parseInt(d,10))||c.readOnlyView.css("width",d+"px"),isNaN(parseInt(e,10))||c.readOnlyView.css("height",e+"px"));return this}};b.fn.evolutionTextEditor=function(d){if(n[d])return n[d].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof d&&d)b.error("Method "+d+" does not exist on jQuery.evolutionTextEditor");else return n.init.apply(this,arguments)};return{}},jQuery,window);t("plugin.evolutionTheater",function(b,e,h){var m={show:function(e){var h=b.extend({},m.defaults,e||{}),d=b('<div class="theater-mask"></div>').hide().appendTo("body"),g=b('<div class="theater-container"></div>').hide().appendTo("body");e=b('<div class="theater-content-container"></div>').appendTo(g);var c=b('<div class="theater-content"></div>').appendTo(e),a=b('<a href="#" class="theater-next">&rarr;</a>').appendTo(g),r=b('<a href="#" class="theater-back">&larr;</a>').appendTo(g),p=b('<a href="#" class="theater-close">X</a>').appendTo(e),f=null,s=null,l=null,v=function(e,u){b("body").css({overflow:"hidden"});f=e;e(function(b){a.hide();r.hide();u?u(c,b):c.hide().html(b);d.is(":visible")||(d.show(),g.show());h.loaded(c);s=h.nextContent(c);l=h.previousContent(c);c.show();s&&null!==s&&a.show();l&&null!==l&&r.show()})},u=function(){b("body").css({overflow:"auto"});a.unbind("_evolution_theater");r.unbind("_evolution_theater");p.unbind("_evolution_theater");g.unbind("_evolution_theater");d.hide().remove();g.hide().remove();b(document).unbind("_evolution_theater")};m.refresh=function(a){v(f,a)};m.hide=function(){u()};a.bind("click._evolution_theater",function(a){a.preventDefault();s&&null!==s&&v(s)});r.bind("click._evolution_theater",function(a){a.preventDefault();l&&null!==l&&v(l)});p.bind("click._evolution_theater",function(a){a.preventDefault();u()});g.bind("click._evolution_theater",function(a){a.target===g.get(0)&&u()});b(document).bind("keydown._evolution_theater",function(f){d.is(":visible")&&(39===f.which?b(f.target).is("input,textarea")||(s&&null!==s&&v(s),a.addClass("pressed")):37===f.which?b(f.target).is("input,textarea")||(l&&null!==l&&v(l),r.addClass("pressed")):27===f.which&&u())});b(document).bind("keyup._evolution_theater",function(b){d.is(":visible")&&(39===b.which?a.removeClass("pressed"):37===b.which&&r.removeClass("pressed"))});v(h.content)},hide:function(){},refresh:function(){},defaults:{content:function(){return null},nextContent:function(){return null},previousContent:function(){return null},loaded:function(){}}};b.evolutionTheater=m;return{}},jQuery,window);t("plugin.evolutionTip",function(b,e,h){function m(){k&&(k.ui.remove(),"title"!=k.attribute&&"alt"!=k.attribute||k.element.attr(k.attribute,k.content))}
var k;b.fn.evolutionTip=function(e){var d=b.extend({},b.fn.evolutionTip.defaults,e||{});d.template=b.telligent.evolution.template.compile(d.template);return this.off("._evolutionTip").on("mouseenter._evolutionTip",function(e){m();e=b(this);for(var c=["data-"+d.attribute,"title","alt"],a,h,p=0;p<c.length;p++){a=c[p];var f=e.attr(a);if(f&&0<b.trim(f).length){h=f;break}}
h&&0!=h.length&&(k={attribute:a,content:h,element:e,ui:b(d.template({content:h})).css({position:"absolute",top:-500,left:-500}).appendTo("body")},"title"!=k.attribute&&"alt"!=k.attribute||k.element.attr(k.attribute,""),c=b(window),h=b(document).scrollTop(),a=e.offset(),targetWidth=e.outerWidth(),targetHeight=e.outerHeight(),windowWidth=c.outerWidth(),windowHeight=c.outerHeight(),tipWidth=k.ui.outerWidth(),tipHeight=k.ui.outerHeight(!0),e="center",c="above",30>=targetHeight+a.top-tipHeight-h&&(c="below"),30>=a.left-tipWidth/2?e="left":30>=windowWidth-(a.left+targetWidth+tipWidth/2)&&(e="right"),h="right"==e?a.left+targetWidth-tipWidth:"left"==e?a.left:a.left+targetWidth/2-tipWidth/2,a="above"==c?a.top-tipHeight:a.top+targetHeight,k.ui.addClass(c).addClass(e).css({left:h,top:a}))}).on("mouseleave._evolutionTip",function(){m()})};b.fn.evolutionTip.hide=function(){m()};b.fn.evolutionTip.defaults={template:'<div class="tip"><%= content %></div>',attribute:"tip"};return{}},jQuery,window);t("plugin.evolutionToggleLink",function(b,e,h){var m={val:function(d){if(void 0===d){var e=this.data("evolutionToggleLink");return e?e.settings.val:!1}
return this.each(function(){var c=b(this).data("evolutionToggleLink");c&&(c.settings.val=d,c.internal.processing=!1,n(c))})}},k=function(d){return this.each(function(){var e={settings:b.extend({},b.fn.evolutionToggleLink.defaults,d||{}),internal:{state:b(this),processing:!1}};e.internal.state.data("evolutionToggleLink",e).click(function(b){!e.internal.processing&&e.settings.changeState&&(e.internal.processing=!0,n(e),e.settings.changeState(!e.settings.val));return!1});n(e)})},n=function(b){b.internal.processing?b.internal.state.attr("class",b.settings.processingCssClass).attr("title",b.settings.processingTitle).html(b.settings.processingHtml):b.settings.val?b.internal.state.attr("class",b.settings.onCssClass).attr("title",b.settings.onTitle).html(b.settings.onHtml):b.internal.state.attr("class",b.settings.offCssClass).attr("title",b.settings.offTitle).html(b.settings.offHtml)};b.fn.evolutionToggleLink=function(d){if(d in m)return m[d].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof d&&d)b.error("Method "+d+" does not exist on jQuery.fn.evolutionToggleLink");else return k.apply(this,arguments)};b.extend(b.fn.evolutionToggleLink,{defaults:{onHtml:"",offHtml:"",processingHtml:"",changeState:null,onCssClass:"",offCssClass:"",processingCssClass:"",onTitle:"",offTitle:"",processingTitle:"",val:!1}});return{}},jQuery,window);t("plugin.evolutionTokenTextBox",function(b,e,h){function m(b){var a=b.internal.textbox.val(),d="",e=0;b.internal.tokens.sort(function(a,b){return a.start-b.start});for(var f=0;f<b.internal.tokens.length;f++){var g=b.internal.tokens[f];g.start>e&&(d+=a.substr(e,g.start-e));d+=g.value;e=g.stop}
e<a.length&&(d+=a.substr(e));b.internal.state.val(d);b.internal.lastLength=b.internal.textbox.val().length;b.internal.textbox.evolutionHighlight({ranges:b.internal.tokens})}
function k(b){var a=b.internal.textbox.get(0);if(a.selectionStart)return a.selectionStart;if(document.selection){b=document.selection.createRange();if(null===b)return 0;var a=a.createTextRange(),d=a.duplicate();a.moveToBookmark(b.getBookmark());d.setEndPoint("EndToStart",a);return d.text.length}
return 0}
function n(b){for(var a=/\$\{token:([0-9a-f]{8,8}-[0-9a-f]{4,4}-[0-9a-f]{4,4}-[0-9a-f]{4,4}-[0-9a-f]{12,12})(?::([^}]*))?\}/gi,e,g=0,f="",s=b.internal.state.val(),l=[],h=0;e=a.exec(s);){var u=e.index;u>g&&(f+=s.substr(g,u-g));g=e[0];u=d[g];!u&&b.settings.previewToken&&(u=b.settings.previewToken(g));u||(u=g);l.push({start:e.index-h,stop:e.index-h+u.length,value:g,text:u,className:b.settings.highlightClassName});h+=g.length-u.length;f+=u;g=a.lastIndex}
g<s.length&&(f+=s.substr(g));b.internal.tokens=l;b.internal.textbox.val(f);m(b)}
var d={},g={init:function(c){return b(this).each(function(){c.tokenPlaceholders&&(d=b.extend({},d,c.tokenPlaceholders),delete c.tokenPlaceholders);var a={settings:b.extend({},b.fn.evolutionTokenTextBox.defaults,c),internal:{state:b(this),textbox:b(this).clone().removeAttr("id").removeAttr("name").css("box-sizing","content-box"),lastLength:b(this).val().length,tokens:[]}};a.internal.state.after(a.internal.textbox).hide().data("_evolutionTokenTextBox",a);a.internal.textbox.on("evolutionRangeClick",function(c,g){e.evolutionInsertEditTokenOptions={dataTypeIds:a.settings.tokenDataTypeIds,token:g.value,save:function(f,c){d[f]=c;var e=a.internal.textbox.val(),e=e.substr(0,g.start)+c+e.substr(g.stop);a.internal.textbox.val(e);var h=g.stop,u=c.length-g.text.length;g.stop=g.start+c.length;g.value=f;g.text=c;b.each(a.internal.tokens,function(){this.start>=h&&(this.start+=u,this.stop+=u)});m(a)},del:function(){var f=a.internal.textbox.val(),f=f.substr(0,g.start)+f.substr(g.stop),c=g.stop-g.start,d=g.start;a.internal.textbox.val(f);a.internal.tokens=b.grep(a.internal.tokens,function(a){return a.start!=d});b.each(a.internal.tokens,function(){this.start>=d&&(this.start-=c,this.stop-=c)});m(a)}};b.glowModal(a.settings.insertEditTokenUrl,{width:a.settings.insertEditTokenModalWidth,height:a.settings.insertEditTokenModalHeight})});a.internal.textbox.evolutionResize().on("evolutionResize",function(){a.internal.textbox.evolutionHighlight("resize",a.internal.textbox.outerWidth(),a.internal.textbox.outerHeight())});a.internal.textbox.on("keydown",function(c){var d=k(a),f=!1,e=null;(37>c.which||40<c.which)&&b.each(a.internal.tokens,function(){(this.start<d||this.start==d&&46==c.which)&&(this.stop>d||this.stop==d&&8==c.which)&&(f=!0,e=this)});if(f){if(8==c.which||46==c.which){var l=a.internal.textbox.val(),l=l.substr(0,e.start)+l.substr(e.stop),g=e.stop-e.start,h=e.start;a.internal.textbox.val(l);a.internal.tokens=b.grep(a.internal.tokens,function(a){return a.start!=h});b.each(a.internal.tokens,function(){this.start>=h&&(this.start-=g,this.stop-=g)});m(a);l=a.internal.textbox.get(0);l.createTextRange?(l=l.createTextRange(),l.move("character",d>h?d-g:d),l.select()):l.selectionStart&&(l.focus(),l.setSelectionRange(d>h?d-g:d,d>h?d-g:d))}
c.preventDefault();c.stopPropagation();return!1}});a.internal.textbox.on("keyup",function(){var c=a.internal.textbox.val().length;if(c!=a.internal.lastLength){var d=c-a.internal.lastLength;a.internal.lastLength=c;var f=k(a);b.each(a.internal.tokens,function(){this.start>=f-1&&(this.start+=d,this.stop+=d)});m(a)}});n(a)})},val:function(c){if(c===h){var a=b(this).data("_evolutionTokenTextBox");return a?a.internal.state.val():""}
return b(this).each(function(){var a=b(this).data("_evolutionTokenTextBox");a&&(a.internal.state.val(c),n(a))})},insertToken:function(){return b(this).each(function(){var c=b(this).data("_evolutionTokenTextBox");c&&(e.evolutionInsertEditTokenOptions={dataTypeIds:c.settings.tokenDataTypeIds,token:"",save:function(a,e){d[a]=e;var g=k(c);c.internal.textbox.val(c.internal.textbox.val().substr(0,g)+e+c.internal.textbox.val().substr(g));b.each(c.internal.tokens,function(){this.start>=g&&(this.start+=e.length,this.stop+=e.length)});c.internal.tokens.push({start:g,stop:g+e.length,value:a,text:e,className:c.settings.highlightClassName});m(c)},del:function(){}},b.glowModal(c.settings.insertEditTokenUrl,{width:c.settings.insertEditTokenModalWidth,height:c.settings.insertEditTokenModalHeight}))})},tokenDataTypeIds:function(c){if(c===h){var a=b(this).data("_evolutionTokenTextBox");return a?a.settings.tokenDataTypeIds:[]}
return b(this).each(function(){var a=b(this).data("_evolutionTokenTextBox");a&&(a.settings.tokenDataTypeIds=c||[])})}};b.fn.evolutionTokenTextBox=function(c){if(g[c])return g[c].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof c&&c)b.error("Method "+c+" does not exist on jQuery.evolutionHighlight");else return g.init.apply(this,arguments)};b.fn.evolutionTokenTextBox.defaults={highlightClassName:"token-highlight",insertEditTokenUrl:"",previewToken:function(b){return b},insertEditTokenModalWidth:400,insertEditTokenModalHeight:500,tokenDataTypeIds:[],tokenPlaceholders:null};return{}},jQuery,window);t("plugin.evolutionTransform",function(b,e,h){function m(){var a=(document.body||document.documentElement).style,b="Moz webkit Webkit Khtml O ms".split(" ");if("string"==typeof a.transition)return!0;for(var f=0;f<b.length;f++)
if("string"==typeof a[b[f]+"Transition"])return!0;return!1}
function k(e,A){if(!this||0==this.length)return this;var y=e||{};A=A||{};var x=[],D,J,t=null,C=null,E=null,M=null;e=[];null===v&&(v=m());this.each(function(){if(3!==this.nodeType){var m=b(this);if(!v)return y.x&&(y.left=y.x),y.y&&(y.y=y.y),m.css(y);for(var L in k.defaults)A[L]||(A[L]=k.defaults[L]);for(var w in y)m=y[w],w===n||w===g?(D=m,delete y[w]):w===d||w===c?(J=m,delete y[w]):w===a?(t=m,delete y[w]):w===r?(C=m,delete y[w]):w===p?(E=m,delete y[w]):w===f?(M=m,delete y[w]):(w==s?0===m?y[w]=1E-5:1===m&&(y[w]=0.99999):"number"===typeof m&&0==m%1&&(y[w]=m+"px"),x[x.length]=w);if(D!=h||J!=h)e[e.length]="translate3d("+(D||0)+"px, "+(J||0)+"px, 0px)";t!=h&&(e[e.length]="rotateZ("+t+"deg)");C!=h&&(e[e.length]="rotateX("+C+"deg)");E!=h&&(e[e.length]="rotateY("+E+"deg)");M!=h&&(e[e.length]="scale("+M+")");0<e.length&&(m=u+"transform",mergedTransforms=e.join(" "),x[x.length]=m,y[m]=mergedTransforms,y.transform=mergedTransforms);m=b.fn.evolutionTransform.animationEnabled?A.duration/1E3+"s "+A.easing:"";transition=x.join(" "+m+", ")+" "+m;b.noop(this.offsetHeight);if(E||C)l=l||b("body").get(0),l.style[u+"perspective"]=A.perspective,l.style.perspective=A.perspective;this.style[u+"transition"]=transition;this.style.transition=transition;for(w in y)this.style[w]=y[w]}});return this}
var n="x",d="y",g="left",c="top",a="rotate",r="rotateX",p="rotateY",f="scale",s="opacity",l,v=null,u=function(){if(!("getComputedStyle"in window))return"";var a=window.getComputedStyle(document.documentElement,"");return"-"+(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||""===a.OLink&&["","o"])[1]+"-"}();k.defaults={duration:0,easing:"linear",perspective:250};b.fn.evolutionTransform=k;b.fn.evolutionTransform.animationEnabled=!0;b.fn.evolutionTransform.accelerated=function(){null===v&&(v=m());return v};return{}},jQuery,window);t("plugin.evolutionUserFileTextBox",function(b,e,h){var m={},k=1,n=function(d){return this.each(function(){var e={settings:b.extend({},b.fn.evolutionUserFileTextBox.defaults,d||{}),internal:{state:this,preview:null,select:null,remove:null}};b.telligent.evolution.post({url:e.settings.endpoint,data:{m:"c"},success:function(c){e.internal.contextid=c.uploadContextId;e.internal.uploadurl=c.uploadUrl;c=b("<div></div>").attr("class",e.settings.cssClass);e.internal.preview=b("<div></div>").attr("class",e.settings.previewCssClass);c.append(e.internal.preview);e.internal.select=b('<a href="#" class="upload"></a>').attr("id","userfiletextbox_"+(new Date).getTime()+"_"+k++).html(e.settings.selectText).glowUpload({fileFilter:null,uploadUrl:e.internal.uploadurl,renderMode:"link"}).bind("glowUploadBegun",function(a){e.uploading=!0;e.internal.select.html("0%")}).bind("glowUploadComplete",function(a,c){e.internal.select.html(e.settings.selectText);c&&0<c.name.length&&b.telligent.evolution.post({url:e.settings.endpoint,data:{m:"f",ContextId:e.internal.contextid,FileName:c.name},success:function(a){e.internal.state.value=a.url;e.uploading=!1;e.internal.preview.html(a.previewHtml).slideDown(100);e.internal.remove.show()}})}).bind("glowUploadFileProgress",function(a,b){e.internal.select.html(b.percent+"%")});c.append(e.internal.select);e.internal.remove=b('<a href="#" class="remove" style="margin-left: 1em;"></a>').html(e.settings.removeText).click(function(){e.internal.preview.html("").slideUp(100);e.internal.state.value="";e.internal.remove.hide();return!1}).hide();c.append(e.internal.remove);var a=b(e.internal.state).val();a?(e.internal.remove.show(),b.telligent.evolution.post({url:e.settings.endpoint,data:{m:"p",Url:a},success:function(a){e.internal.preview.html(a.previewHtml).slideDown(100)}})):e.internal.preview.html("").hide();b(e.internal.state).data("evolutionUserFileTextBox",e).before(c).hide()}})})};b.fn.evolutionUserFileTextBox=function(d){if(d in m)return m[d].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof d&&d)b.error("Method "+d+" does not exist on jQuery.fn.evolutionUserFileTextBox");else return n.apply(this,arguments)};b.extend(b.fn.evolutionUserFileTextBox,{defaults:{removeText:"",selectText:"",noFileText:"",initialPreviewHtml:"",cssClass:"user-file-url",previewCssClass:"user-file-url-preview",endpoint:""}});return{}},jQuery,window);t("plugin.validation",function(b,e,h){b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});b.telligent.evolution.validation={registerExtensions:function(a){b.validator&&(b.validator.addMethod("passwordvalid",function(b,c){return this.optional(c)||b.match(a.passwordRegex)},a.passwordInvalidMessage),b.validator.addMethod("email",function(b,c){return this.optional(c)||b.match(RegExp(a.emailRegex))},a.emailInvalidMessage),b.validator.addMethod("url",function(c,d){return this.optional(d)||c.match(a.urlRegex)?!0:("http://"+c).match(a.urlRegex)?(b(d).val("http://"+c),!0):!1},a.urlInvalidMessage),b.validator.addMethod("emails",function(b,c){for(var d=b.split(/[;,]/),e=!0,g=RegExp(a.emailRegex),h=0;h<d.length;h++)jQuery.trim(d[h]).match(g)||(e=!1);return this.optional(c)||e},a.emailsInvalidMessage),b.validator.addMethod("username",function(b,c){return this.optional(c)||b.match(a.usernameRegex)},a.usernameInvalidMessage),b.validator.addMethod("usernameexists",function(a,f,c){if(this.optional(f))return"dependency-mismatch";var d=this.previousValue(f);this.settings.messages[f.name]||(this.settings.messages[f.name]={});d.originalMessage=this.settings.messages[f.name].remote;this.settings.messages[f.name].remote=d.message;c="string"==typeof c&&{url:c}||c;var e=b.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsUsernameAvailable";c.url&&(e=c.url);if(d.old!==a){d.old=a;var g=this;this.startRequest(f);var h='{"username":"'+a+'","elementName":"'+f.name+'"}';b.telligent.evolution.post({url:e,dataType:"json",contentType:"application/json; charset=utf-8",data:h,success:function(c){f=g.findByName(c.d.ElementName)[0];g.settings.messages[f.name].remote=d.originalMessage;var e=!0===c.d.IsValid;if(e){var q=g.formSubmitted;g.prepareElement(f);g.formSubmitted=q;g.successList.push(f);g.showErrors()}else q={},c=d.message=c.d.ErrorMessage||g.defaultMessage(f,"usernameexists"),q[f.name]=b.isFunction(c)?h(a):c,g.showErrors(q);d.valid=e;g.stopRequest(f,e)}});return"pending"}
return this.pending[f.name]?"pending":d.valid},void 0),b.validator.addMethod("emailexists",function(a,f,c){if(this.optional(f))return"dependency-mismatch";var d=this.previousValue(f);this.settings.messages[f.name]||(this.settings.messages[f.name]={});d.originalMessage=this.settings.messages[f.name].remote;this.settings.messages[f.name].remote=d.message;c="string"==typeof c&&{url:c}||c;var e=b.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsEmailAvailable";c.url&&(e=c.url);if(d.old!==a){d.old=a;var g=this;this.startRequest(f);var h='{"email":"'+a+'","elementName":"'+f.name+'"}';b.telligent.evolution.post({url:e,dataType:"json",contentType:"application/json; charset=utf-8",data:h,success:function(c){f=g.findByName(c.d.ElementName)[0];g.settings.messages[f.name].remote=d.originalMessage;var e=!0===c.d.IsValid;if(e){var q=g.formSubmitted;g.prepareElement(f);g.formSubmitted=q;g.successList.push(f);g.showErrors()}else q={},c=d.message=g.customMessage(f.name,"emailexists")||c.d.ErrorMessage||g.defaultMessage(f,"emailexists"),q[f.name]=b.isFunction(c)?h(a):c,g.showErrors(q);d.valid=e;g.stopRequest(f,e)}});return"pending"}
return this.pending[f.name]?"pending":d.valid},void 0),b.validator.addMethod("groupnameexists",function(a,f,c){if(this.optional(f))return"dependency-mismatch";var d=encodeURIComponent(b.trim(a));if(0==d.length)return!0;var e=this.previousValue(f);this.settings.messages[f.name]||(this.settings.messages[f.name]={});e.originalMessage=this.settings.messages[f.name].remote;this.settings.messages[f.name].remote=e.message;c=c.getParentId();d='{"groupName":"'+d+'","parentGroupId":'+c+',"elementName":"'+f.name+'"}';if(e.old!==d){e.old=d;var g=this;this.startRequest(f);c=b.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsGroupNameAvailable";b.telligent.evolution.post({url:c,dataType:"json",contentType:"application/json; charset=utf-8",data:d,success:function(c){f=g.findByName(c.d.ElementName)[0];g.settings.messages[f.name].remote=e.originalMessage;var d=!0===c.d.IsValid;if(d){var h=g.formSubmitted;g.prepareElement(f);g.formSubmitted=h;g.successList.push(f);g.showErrors()}else h={},c=e.message=c.d.ErrorMessage||g.defaultMessage(f,"groupnameexists"),h[f.name]=b.isFunction(c)?message(a):c,g.showErrors(h);e.valid=d;g.stopRequest(f,d)}});return"pending"}
return this.pending[f.name]?"pending":e.valid},void 0),b.validator.addMethod("wikipageexists",function(a,f,c){if(this.optional(f))return"dependency-mismatch";var d=encodeURIComponent(b.trim(a));if(0==d.length)return!0;var e=this.previousValue(f);this.settings.messages[f.name]||(this.settings.messages[f.name]={});e.originalMessage=this.settings.messages[f.name].remote;this.settings.messages[f.name].remote=e.message;c='{"pageName":"'+d+'","wikiId":'+c.wikiId+',"pageId":'+c.pageId+',"parentPageId":'+c.parentPageId()+',"elementName":"'+f.name+'"}';if(e.old!==c){e.old=c;var g=this;this.startRequest(f);d=b.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsWikiPageNameAvailable";b.telligent.evolution.post({url:d,dataType:"json",contentType:"application/json; charset=utf-8",data:c,success:function(c){f=g.findByName(c.d.ElementName)[0];g.settings.messages[f.name].remote=e.originalMessage;var d=!0===c.d.IsValid;if(d){var h=g.formSubmitted;g.prepareElement(f);g.formSubmitted=h;g.successList.push(f);g.showErrors()}else h={},c=e.message=c.d.ErrorMessage||g.defaultMessage(f,"wikipageexists"),h[f.name]=b.isFunction(c)?message(a):c,g.showErrors(h);e.valid=d;g.stopRequest(f,d)}});return"pending"}
return this.pending[f.name]?"pending":e.valid},void 0),b.validator.addMethod("mailinglistnameexists",function(a,f,c){if(""==b.trim(a))return this.optional(f);var d=this.previousValue(f);this.settings.messages[f.name]||(this.settings.messages[f.name]={});d.originalMessage=this.settings.messages[f.name].remote;this.settings.messages[f.name].remote=d.message;c="string"==typeof c&&{url:c}||c;var e=b.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsMailingListNameAvailable";c.url&&(e=c.url);if(d.old!==a){d.old=a;var g=this;this.startRequest(f);var h='{"mailingListName":"'+a+'","elementName":"'+f.name+'"}';b.telligent.evolution.post({url:e,dataType:"json",contentType:"application/json; charset=utf-8",data:h,success:function(c){f=g.findByName(c.d.ElementName)[0];g.settings.messages[f.name].remote=d.originalMessage;var e=!0===c.d.IsValid;if(e){var q=g.formSubmitted;g.prepareElement(f);g.formSubmitted=q;g.successList.push(f);g.showErrors()}else q={},c=d.message=c.d.ErrorMessage||g.defaultMessage(f,"mailinglistnameexists"),q[f.name]=b.isFunction(c)?h(a):c,g.showErrors(q);d.valid=e;g.stopRequest(f,e)}});return"pending"}
return this.pending[f.name]?"pending":d.valid},void 0))}};var m={addField:function(a,c,d,e){var h=this.data("evolutionValidation");if(h&&"undefined"!==typeof h){h.internal.fields[h.internal.fields.length]={selector:a,messageSelector:d,isValid:!0,context:e,initialized:!1};a=b(a);a.data("_evolutionValidation",h).data("_evolutionValidationFieldIndex",h.internal.fields.length-1).data("_evolutionValidationOldValue","$$$$$NULL$$$$$").rules("add",c);try{a.keydown(function(){if(h.internal.hasAttemptedSubmit){window.clearTimeout(h.internal.keyPressValidationHandle);var a=this;h.internal.keyPressValidationHandle=window.setTimeout(function(){g(h,b(a))},499)}})}catch(q){}
a.blur(function(){g(h,b(this))})}
return this},addCustomValidation:function(b,c,d,e,g){var h=this.data("evolutionValidation");if(h&&"undefined"!==typeof h){var k=h.internal.customValidations.length;h.internal.customValidations[k]={id:b,validationFunction:c,message:d,messageSelector:e,isValid:!0,context:g,initialized:!1};return function(){return a(h,k)}}},isValid:function(){var f=this.data("evolutionValidation");if(!f)return this;for(var c=0;c<f.internal.fields.length;c++)f.internal.fields[c].initialized||g(f,b(f.internal.fields[c].selector));for(c=0;c<f.internal.customValidations.length;c++)f.internal.customValidations[c].initialized||a(f,c);return d(f)},validate:function(){var f=this.data("evolutionValidation");if(!f)return this;for(var c=0;c<f.internal.fields.length;c++)g(f,b(f.internal.fields[c].selector));for(c=0;c<f.internal.customValidations.length;c++)a(f,c);return m.isValid.apply(b(f.internal.state),[])},validateField:function(a){try{var c=this.data("evolutionValidation");b(a).data("_evolutionValidationOldValue","$$$$$NULL$$$$$");return g(c,b(a))}catch(d){}},validateCustom:function(b){var c=this.data("evolutionValidation");if(!c)return this;for(var d=0;d<c.internal.customValidations.length;d++)
if(c.internal.customValidations[d].id==b)return a(c,d);return!0},reset:function(){var a=this.data("evolutionValidation");if(!a)return this;for(var c=0;c<a.internal.customValidations.length;c++)b(a.internal.customValidations[c].messageSelector).hide(),a.internal.customValidations[c].isValid=!0,a.internal.customValidations[c].initialized=!1;for(c=0;c<a.internal.fields.length;c++)b(a.internal.fields[c].messageSelector).hide(),a.internal.fields[c].errorMessage=null,a.internal.fields[c].isValid=!0,a.internal.fields[c].initialized=!1,b(a.internal.fields[c].selector).data("_evolutionValidationOldValue","$$$$$NULL$$$$$");a.internal.submitButtonClicked=!1;a.internal.hasAttemptedSubmit=!1;window.clearTimeout(a.internal.initialValidationHandle);a.internal.initialValidationHandle=window.setTimeout(function(){n(a)},249)}},k=function(a){return this.each(function(){var c={settings:b.extend({},b.fn.evolutionValidation.defaults,a||{}),internal:{state:this,submitButtonClicked:!1,hasAttemptedSubmit:!1,fields:[],customValidations:[],initialValidationHandle:null}};b(this).data("evolutionValidation",c);b(this).click(function(a){return r(c,a)});this._isValid=function(){return r(c,{})};window.clearTimeout(c.internal.initialValidationHandle);c.internal.initialValidationHandle=window.setTimeout(function(){n(c)},499)})},n=function(a){window.clearTimeout(a.internal.initialValidationHandle);try{var d=!1;if(!0===a.settings.validateOnLoad)d=!0;else if(!1!==a.settings.validateOnLoad)
for(var e=0;e<a.internal.fields.length;e++){var g=b(a.internal.fields[e].selector),h=g.attr("type");if("checkbox"!=h&&"radio"!=h&&"select"!=h&&"submit"!=h&&"button"!=h&&"reset"!=h&&""!=c(a,g)){d=!0;break}}
if(d){a.internal.hasAttemptedSubmit=!0;var q=m.validate.apply(b(a.internal.state));p(a);if(a.settings.onValidated)a.settings.onValidated(q,!1,null)}else if(!a.internal.hasAttemptedSubmit&&a.settings.onValidated)a.settings.onValidated(!0,!1,null)}catch(k){a.internal.initialValidationHandle=window.setTimeout(function(){n(a)},499)}},d=function(a){for(var b=0;b<a.internal.fields.length;b++)
if(!a.internal.fields[b].isValid)return!1;for(b=0;b<a.internal.customValidations.length;b++)
if(!a.internal.customValidations[b].isValid)return!1;return!0},g=function(a,b){var d=c(a,b);if(d!=b.data("_evolutionValidationOldValue"))return b.data("_evolutionValidationOldValue",d),b.valid();d=b.data("_evolutionValidationFieldIndex");return 0>d||d>=a.internal.fields.length?!1:a.internal.fields[d].isValid},c=function(a,b){return"checkbox"==b.attr("type")||"radio"==b.attr("type")?b.get(0).checked?b.val():"":b.val()},a=function(a,c){if(0>c||c>=a.internal.customValidations.length)return!0;var e=a.internal.customValidations[c].validationFunction();a.internal.customValidations[c].initialized=!0;if(!0===e){a.internal.customValidations[c].isValid=!0;b(a.internal.customValidations[c].messageSelector).hide();if(d(a)&&a.internal.hasAttemptedSubmit&&a.settings.onValidated)a.settings.onValidated(!0,a.internal.submitButtonClicked,a.internal.customValidations[c].context);return!0}
e=d(a);a.internal.customValidations[c].isValid=!1;a.internal.hasAttemptedSubmit&&b(a.internal.customValidations[c].messageSelector).html(a.internal.customValidations[c].message).show();if((a.internal.submitButtonClicked||e)&&a.internal.hasAttemptedSubmit&&a.settings.onValidated)a.settings.onValidated(!1,a.internal.submitButtonClicked,a.internal.customValidations[c].context);return!1},r=function(a,c){var d=!a.internal.hasAttemptedSubmit;a.internal.hasAttemptedSubmit=!0;a.internal.submitButtonClicked=!0;m.validate.apply(b(a.internal.state),[]);var e=m.isValid.apply(b(a.internal.state),[]);d&&!e&&p(a);d=!0;e&&a.settings.onSuccessfulClick&&(d=a.settings.onSuccessfulClick(c));a.internal.submitButtonClicked=!1;!e&&c&&(c.cancelBubble=!0,c.returnValue=!1);return e&&!1!==d},p=function(a){for(var c=0;c<a.internal.fields.length;c++)a.internal.fields[c].isValid||null==a.internal.fields[c].errorMessage||(b(a.internal.fields[c].messageSelector).html(a.internal.fields[c].errorMessage).show(),a.internal.fields[c].errorMessage=null);for(c=0;c<a.internal.customValidations.length;c++)a.internal.customValidations[c].isValid||b(a.internal.customValidations[c].messageSelector).html(a.internal.customValidations[c].message).show()};b.fn.evolutionValidation=function(a){if(a in m)return m[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)b.error("Method "+a+" does not exist on jQuery.fn.evolutionValidation");else return k.apply(this,arguments)};b.extend(b.fn.evolutionValidation,{defaults:{validateOnLoad:null,onValidated:null,onSuccessfulClick:null},init:function(){b.fn.validate&&b("form").validate({errorPlacement:function(a,c){var d=b(c).data("_evolutionValidation");if(d){var e=parseInt(b(c).data("_evolutionValidationFieldIndex"),10);0>e||e>=d.internal.fields.length||(d.internal.hasAttemptedSubmit?b(d.internal.fields[e].messageSelector).html(a).show():d.internal.fields[e].errorMessage=a)}},highlight:function(a,c,e){if(c=b(a).data("_evolutionValidation"))
if(e=d(c),a=b(a).data("_evolutionValidationFieldIndex"),!(0>a||a>=c.internal.fields.length)&&(c.internal.fields[a].isValid=!1,c.internal.fields[a].initialized=!0,(c.internal.submitButtonClicked||e)&&c.internal.hasAttemptedSubmit&&c.settings.onValidated))c.settings.onValidated(!1,c.internal.submitButtonClicked,c.internal.fields[a].context)},unhighlight:function(a,c,e){if(c=b(a).data("_evolutionValidation"))
if(a=b(a).data("_evolutionValidationFieldIndex"),!(0>a||a>=c.internal.fields.length)&&(c.internal.fields[a].isValid=!0,c.internal.fields[a].initialized=!0,d(c)&&c.internal.hasAttemptedSubmit&&c.settings.onValidated))c.settings.onValidated(!0,c.internal.submitButtonClicked,c.internal.fields[a].context)},onsubmit:!1,onkeyup:!1,onfocusout:!1})}});e.Telligent_Validation=function(a,c){this._jq=b(a);c.onValidatedFunction&&(c.onValidated=c.onValidatedFunction);c.onSuccessfulClickFunction&&(c.onSuccessfulClick=c.onSuccessfulClickFunction);this._jq.evolutionValidation(c)};Telligent_Validation.prototype.AddField=function(a,b,c,d){this._jq.evolutionValidation("addField",a,b,c,d)};Telligent_Validation.prototype.AddCustomValidation=function(a,b,c,d,e){return this._jq.evolutionValidation("addCustomValidation",a,b,c,d,e)};Telligent_Validation.prototype.IsValid=function(){return this._jq.evolutionValidation("isValid")};Telligent_Validation.prototype.Validate=function(){return this._jq.evolutionValidation("validate")};Telligent_Validation.prototype.ValidateField=function(a){return this._jq.evolutionValidation("validateField",a)};Telligent_Validation.prototype.ValidateCustom=function(a){return this._jq.evolutionValidation("validateCustom",a)};return{}},jQuery,window);"object"!==typeof JSON&&(JSON={});(function(){function b(a){return 10>a?"0"+a:a}
function e(a){k.lastIndex=0;return k.test(a)?'"'+a.replace(k,function(a){var b=g[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}
function h(a,b){var g,f,s,l,k=n,u,q=b[a];q&&("object"===typeof q&&"function"===typeof q.toJSON)&&(q=q.toJSON(a));"function"===typeof c&&(q=c.call(b,a,q));switch(typeof q){case"string":return e(q);case"number":return isFinite(q)?String(q):"null";case"boolean":case"null":return String(q);case"object":if(!q)return"null";n+=d;u=[];if("[object Array]"===Object.prototype.toString.apply(q)){l=q.length;for(g=0;g<l;g+=1)u[g]=h(g,q)||"null";s=0===u.length?"[]":n?"[\n"+n+u.join(",\n"+n)+"\n"+k+"]":"["+u.join(",")+"]";n=k;return s}
if(c&&"object"===typeof c)
for(l=c.length,g=0;g<l;g+=1)"string"===typeof c[g]&&(f=c[g],(s=h(f,q))&&u.push(e(f)+(n?": ":":")+s));else
for(f in q)Object.prototype.hasOwnProperty.call(q,f)&&(s=h(f,q))&&u.push(e(f)+(n?": ":":")+s);s=0===u.length?"{}":n?"{\n"+n+u.join(",\n"+n)+"\n"+k+"}":"{"+u.join(",")+"}";n=k;return s}}
"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var m=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,d,g={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},c;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,e){var f;d=n="";if("number"===typeof e)
for(f=0;f<e;f+=1)d+=" ";else"string"===typeof e&&(d=e);if((c=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return h("",{"":a})});"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,f){var d,e,g=a[f];if(g&&"object"===typeof g)
for(d in g)Object.prototype.hasOwnProperty.call(g,d)&&(e=c(g,d),void 0!==e?g[d]=e:delete g[d]);return b.call(a,f,g)}
var f;a=String(a);m.lastIndex=0;m.test(a)&&(a=a.replace(m,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+a+")"),"function"===typeof b?c({"":f},""):f;throw new SyntaxError("JSON.parse");})})();(function(){function b(){this.returnValue=!1}
function e(){this.cancelBubble=!0}
var h=0,m=[],k={},n={},d={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},g=/[<>&\"\']/g,c=window.setTimeout,a={},r;(function(a){a=a.split(/,/);var b,c,d;for(b=0;b<a.length;b+=2)
for(d=a[b+1].split(/ /),c=0;c<d.length;c++)n[d[c]]=a[b]})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");var p={VERSION:"@@version@@",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:n,ua:function(){var a=navigator,b=a.userAgent,c=a.vendor,d,e;e=(d=/WebKit/.test(b))&&-1!==c.indexOf("Apple");c=window.opera&&window.opera.buildNumber;return{windows:-1!==navigator.platform.indexOf("Win"),android:/Android/.test(b),ie:!d&&!c&&/MSIE/gi.test(b)&&/Explorer/gi.test(a.appName),webkit:d,gecko:!d&&/Gecko/.test(b),safari:e,opera:!!c}}(),typeOf:function(a){return{}.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(a){p.each(arguments,function(b,c){0<c&&p.each(b,function(b,c){a[c]=b})});return a},cleanName:function(a){var b,c;c=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(b=0;b<c.length;b+=2)a=a.replace(c[b],c[b+1]);a=a.replace(/\s+/g,"_");return a=a.replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(a,b){b.name=a;m[a]=b;m.push(b);return b},guid:function(){var a=(new Date).getTime().toString(32),b;for(b=0;5>b;b++)a+=Math.floor(65535*Math.random()).toString(32);return(p.guidPrefix||"p")+a+(h++).toString(32)},buildUrl:function(a,b){var c="";p.each(b,function(a,b){c+=(c?"&":"")+encodeURIComponent(b)+"="+encodeURIComponent(a)});c&&(a+=(0<a.indexOf("?")?"&":"?")+c);return a},each:function(a,b){var c,d;if(a)
if(c=a.length,void 0===c)
for(d in a){if(a.hasOwnProperty(d)&&!1===b(a[d],d))break}else
for(d=0;d<c&&!1!==b(a[d],d);d++);},formatSize:function(a){return void 0===a||/\D/.test(a)?p.translate("N/A"):1073741824<a?Math.round(a/1073741824,1)+" GB":1048576<a?Math.round(a/1048576,1)+" MB":1024<a?Math.round(a/1024,1)+" KB":a+" b"},getPos:function(a,b){function c(a){var b,f=0;b=0;a&&(b=a.getBoundingClientRect(),a="CSS1Compat"===h.compatMode?h.documentElement:h.body,f=b.left+a.scrollLeft,b=b.top+a.scrollTop);return{x:f,y:b}}
var d=0,e=0,g,h=document;b=b||h.body;if(a&&a.getBoundingClientRect&&p.ua.ie&&(!h.documentMode||8>h.documentMode))return d=c(a),e=c(b),{x:d.x-e.x,y:d.y-e.y};for(g=a;g&&g!=b&&g.nodeType;)d+=g.offsetLeft||0,e+=g.offsetTop||0,g=g.offsetParent;for(g=a.parentNode;g&&g!=b&&g.nodeType;)d-=g.scrollLeft||0,e-=g.scrollTop||0,g=g.parentNode;return{x:d,y:e}},getSize:function(a){return{w:a.offsetWidth||a.clientWidth,h:a.offsetHeight||a.clientHeight}},parseSize:function(a){var b;"string"==typeof a&&(a=/^([0-9]+)([mgk]?)$/.exec(a.toLowerCase().replace(/[^0-9mkg]/g,"")),b=a[2],a=+a[1],"g"==b&&(a*=1073741824),"m"==b&&(a*=1048576),"k"==b&&(a*=1024));return a},xmlEncode:function(a){return a?(""+a).replace(g,function(a){return d[a]?"&"+d[a]+";":a}):a},toArray:function(a){var b,c=[];for(b=0;b<a.length;b++)c[b]=a[b];return c},inArray:function(a,b){if(b){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(b,a);for(var c=0,d=b.length;c<d;c++)
if(b[c]===a)return c}
return-1},addI18n:function(a){return p.extend(k,a)},translate:function(a){return k[a]||a},isEmptyObj:function(a){if(void 0===a)return!0;for(var b in a)return!1;return!0},hasClass:function(a,b){return""==a.className?!1:RegExp("(^|\\s+)"+b+"(\\s+|$)").test(a.className)},addClass:function(a,b){p.hasClass(a,b)||(a.className=""==a.className?b:a.className.replace(/\s+$/,"")+" "+b)},removeClass:function(a,b){a.className=a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),function(a,b,c){return" "===b&&" "===c?" ":""})},getStyle:function(a,b){if(a.currentStyle)return a.currentStyle[b];if(window.getComputedStyle)return window.getComputedStyle(a,null)[b]},addEvent:function(c,d,g,h){var k;d=d.toLowerCase();void 0===r&&(r="Plupload_"+p.guid());c.addEventListener?(k=g,c.addEventListener(d,k,!1)):c.attachEvent&&(k=function(){var a=window.event;a.target||(a.target=a.srcElement);a.preventDefault=b;a.stopPropagation=e;g(a)},c.attachEvent("on"+d,k));void 0===c[r]&&(c[r]=p.guid());a.hasOwnProperty(c[r])||(a[c[r]]={});c=a[c[r]];c.hasOwnProperty(d)||(c[d]=[]);c[d].push({func:k,orig:g,key:h})},removeEvent:function(b,c,d){var e,g;"function"==typeof d?e=d:g=d;c=c.toLowerCase();if(b[r]&&a[b[r]]&&a[b[r]][c]){d=a[b[r]][c];for(var h=d.length-1;0<=h;h--)
if(d[h].key===g||d[h].orig===e)
if(b.removeEventListener?b.removeEventListener(c,d[h].func,!1):b.detachEvent&&b.detachEvent("on"+c,d[h].func),d[h].orig=null,d[h].func=null,d.splice(h,1),void 0!==e)break;d.length||delete a[b[r]][c];if(p.isEmptyObj(a[b[r]])){delete a[b[r]];try{delete b[r]}catch(k){b[r]=void 0}}}},removeAllEvents:function(b,c){void 0!==b[r]&&b[r]&&p.each(a[b[r]],function(a,d){p.removeEvent(b,d,c)})},Uploader:function(a){function b(){var a,c=0,d;if(this.state==p.STARTED){for(d=0;d<h.length;d++)a||h[d].status!=p.QUEUED?c++:(a=h[d],a.status=p.UPLOADING,this.trigger("BeforeUpload",a)&&this.trigger("UploadFile",a));c==h.length&&(this.stop(),this.trigger("UploadComplete",h))}}
function d(){var a,b;g.reset();for(a=0;a<h.length;a++)b=h[a],void 0!==b.size?(g.size+=b.size,g.loaded+=b.loaded):g.size=void 0,b.status==p.DONE?g.uploaded++:b.status==p.FAILED?g.failed++:g.queued++;void 0===g.size?g.percent=0<h.length?Math.ceil(100*(g.uploaded/h.length)):0:(g.bytesPerSec=Math.ceil(g.loaded/((+new Date-k||1)/1E3)),g.percent=0<g.size?Math.ceil(100*(g.loaded/g.size)):0)}
var e={},g,h=[],k,n=!1;g=new p.QueueProgress;a=p.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},a);p.extend(this,{state:p.STOPPED,runtime:"",features:{},files:h,settings:a,total:g,id:p.guid(),init:function(){function e(){var a=u[v++],b,c,d;if(a){b=a.getFeatures();if(c=g.settings.required_features)
for(c=c.split(","),d=0;d<c.length;d++)
if(!b[c[d]]){e();return}
a.init(g,function(c){c&&c.success?(g.features=b,g.runtime=a.name,g.trigger("Init",{runtime:a.name}),g.trigger("PostInit"),g.refresh()):e()})}else g.trigger("Error",{code:p.INIT_ERROR,message:p.translate("Init error.")})}
var g=this,n,u,v=0,r;"function"==typeof a.preinit?a.preinit(g):p.each(a.preinit,function(a,b){g.bind(b,a)});a.page_url=a.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");/^(\w+:\/\/|\/)/.test(a.url)||(a.url=a.page_url+a.url);a.chunk_size=p.parseSize(a.chunk_size);a.max_file_size=p.parseSize(a.max_file_size);g.bind("FilesAdded",function(b,d){var e,l,k=0,m;(e=a.filters)&&e.length&&(m=[],p.each(e,function(a){p.each(a.extensions.split(/,/),function(a){/^\s*\*\s*$/.test(a)?m.push("\\.*"):m.push("\\."+a.replace(RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),m=RegExp(m.join("|")+"$","i"));for(e=0;e<d.length;e++)l=d[e],l.loaded=0,l.percent=0,l.status=p.QUEUED,m&&!m.test(l.name)?b.trigger("Error",{code:p.FILE_EXTENSION_ERROR,message:p.translate("File extension error."),file:l}):void 0!==l.size&&l.size>a.max_file_size?b.trigger("Error",{code:p.FILE_SIZE_ERROR,message:p.translate("File size error."),file:l}):(h.push(l),k++);if(k)c(function(){g.trigger("QueueChanged");g.refresh()},1);else return!1});a.unique_names&&g.bind("UploadFile",function(a,b){var c=b.name.match(/\.([^.]+)$/),d="tmp";c&&(d=c[1]);b.target_name=b.id+"."+d});g.bind("UploadProgress",function(a,b){b.percent=0<b.size?Math.ceil(100*(b.loaded/b.size)):100;d()});g.bind("StateChanged",function(a){if(a.state==p.STARTED)k=+new Date;else if(a.state==p.STOPPED)
for(n=a.files.length-1;0<=n;n--)a.files[n].status==p.UPLOADING&&(a.files[n].status=p.QUEUED,d())});g.bind("QueueChanged",d);g.bind("Error",function(a,e){e.file&&(e.file.status=p.FAILED,d(),a.state==p.STARTED&&c(function(){b.call(g)},1))});g.bind("FileUploaded",function(a,d){d.status=p.DONE;d.loaded=d.size;a.trigger("UploadProgress",d);c(function(){b.call(g)},1)});if(a.runtimes)
for(u=[],r=a.runtimes.split(/\s?,\s?/),n=0;n<r.length;n++)m[r[n]]&&u.push(m[r[n]]);else u=m;e();"function"==typeof a.init?a.init(g):p.each(a.init,function(a,b){g.bind(b,a)})},refresh:function(){this.trigger("Refresh")},start:function(){h.length&&this.state!=p.STARTED&&(this.state=p.STARTED,this.trigger("StateChanged"),b.call(this))},stop:function(){this.state!=p.STOPPED&&(this.state=p.STOPPED,this.trigger("CancelUpload"),this.trigger("StateChanged"))},disableBrowse:function(a){n=void 0!==a?a:!0;this.trigger("DisableBrowse",n)},getFile:function(a){var b;for(b=h.length-1;0<=b;b--)
if(h[b].id===a)return h[b]},removeFile:function(a){var b;for(b=h.length-1;0<=b;b--)
if(h[b].id===a.id)return this.splice(b,1)[0]},splice:function(a,b){var c;c=h.splice(void 0===a?0:a,void 0===b?h.length:b);this.trigger("FilesRemoved",c);this.trigger("QueueChanged");return c},trigger:function(a){var b=e[a.toLowerCase()],c,d;if(b)
for(d=Array.prototype.slice.call(arguments),d[0]=this,c=0;c<b.length;c++)
if(!1===b[c].func.apply(b[c].scope,d))return!1;return!0},hasEventListener:function(a){return!!e[a.toLowerCase()]},bind:function(a,b,c){var d;a=a.toLowerCase();d=e[a]||[];d.push({func:b,scope:c||this});e[a]=d},unbind:function(a,b){a=a.toLowerCase();var c=e[a],d;if(c){if(void 0!==b)
for(d=c.length-1;0<=d;d--){if(c[d].func===b){c.splice(d,1);break}}else c=[];c.length||delete e[a]}},unbindAll:function(){var a=this;p.each(e,function(b,c){a.unbind(c)})},destroy:function(){this.stop();this.trigger("Destroy");this.unbindAll()}})},File:function(a,b,c){this.id=a;this.name=b;this.size=c;this.status=this.percent=this.loaded=0},Runtime:function(){this.getFeatures=function(){};this.init=function(a,b){}},QueueProgress:function(){var a=this;a.size=0;a.loaded=0;a.uploaded=0;a.failed=0;a.queued=0;a.percent=0;a.bytesPerSec=0;a.reset=function(){a.size=a.loaded=a.uploaded=a.failed=a.queued=a.percent=a.bytesPerSec=0}},runtimes:{}};window.plupload=p})();(function(b,e,h,m){function k(){var b;try{b=navigator.plugins["Shockwave Flash"],b=b.description}catch(c){try{b=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(a){b="0.0"}}
b=b.match(/\d+/g);return parseFloat(b[0]+"."+b[1])}
var n={},d={};h.flash={trigger:function(b,c,a){setTimeout(function(){var d=n[b];d&&d.trigger("Flash:"+c,a)},0)}};h.runtimes.Flash=h.addRuntime("flash",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,maxWidth:8091,maxHeight:8091,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(b,c){function a(){return e.getElementById(b.id+"_flash")}
function m(){5E3<f++?c({success:!1}):!1===d[b.id]&&setTimeout(m,1)}
var p,f=0,s=e.body;10>k()?c({success:!1}):(d[b.id]=!1,n[b.id]=b,e.getElementById(b.settings.browse_button),p=e.createElement("div"),p.id=b.id+"_flash_container",h.extend(p.style,{position:"absolute",top:"0px",background:b.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",height:"100%"}),p.className="plupload flash",b.settings.container&&(s=e.getElementById(b.settings.container),"static"===h.getStyle(s,"position")&&(s.style.position="relative")),s.appendChild(p),function(){var a,c;a='<object id="'+b.id+'_flash" type="application/x-shockwave-flash" data="'+b.settings.flash_swf_url+'" ';h.ua.ie&&(a+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ');a+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+b.settings.flash_swf_url+'" /><param name="flashvars" value="id='+escape(b.id)+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';h.ua.ie?(c=e.createElement("div"),p.appendChild(c),c.outerHTML=a):p.innerHTML=a}(),m(),p=null,b.bind("Destroy",function(a){h.removeAllEvents(e.body,a.id);delete d[a.id];delete n[a.id];(a=e.getElementById(a.id+"_flash_container"))&&a.parentNode.removeChild(a)}),b.bind("Flash:Init",function(){var f={};try{a().setFileFilters(b.settings.filters,b.settings.multi_selection)}catch(k){c({success:!1});return}
d[b.id]||(d[b.id]=!0,b.bind("UploadFile",function(c,d){var e=c.settings,k=b.settings.resize||{};a().uploadFile(f[d.id],e.url,{name:d.target_name||d.name,mime:h.mimeTypes[d.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:e.chunk_size,width:k.width,height:k.height,quality:k.quality,multipart:e.multipart,multipart_params:e.multipart_params||{},file_data_name:e.file_data_name,format:/\.(jpg|jpeg)$/i.test(d.name)?"jpg":"png",headers:e.headers,urlstream_upload:e.urlstream_upload})}),b.bind("CancelUpload",function(){a().cancelUpload()}),b.bind("Flash:UploadProcess",function(a,b){var c=a.getFile(f[b.id]);c.status!=h.FAILED&&(c.loaded=b.loaded,c.size=b.size,a.trigger("UploadProgress",c))}),b.bind("Flash:UploadChunkComplete",function(b,c){var d=b.getFile(f[c.id]);b.trigger("ChunkUploaded",d,{chunk:c.chunk,chunks:c.chunks,response:c.text});d.status!==h.FAILED&&b.state!==h.STOPPED&&a().uploadNextChunk();c.chunk==c.chunks-1&&(d.status=h.DONE,b.trigger("FileUploaded",d,{response:c.text}))}),b.bind("Flash:SelectFiles",function(a,c){var d,e,k=[],m;for(e=0;e<c.length;e++)d=c[e],m=h.guid(),f[m]=d.id,f[d.id]=m,k.push(new h.File(m,d.name,d.size));k.length&&b.trigger("FilesAdded",k)}),b.bind("Flash:SecurityError",function(a,c){b.trigger("Error",{code:h.SECURITY_ERROR,message:h.translate("Security error."),details:c.message,file:b.getFile(f[c.id])})}),b.bind("Flash:GenericError",function(a,c){b.trigger("Error",{code:h.GENERIC_ERROR,message:h.translate("Generic error."),details:c.message,file:b.getFile(f[c.id])})}),b.bind("Flash:IOError",function(a,c){b.trigger("Error",{code:h.IO_ERROR,message:h.translate("IO error."),details:c.message,file:b.getFile(f[c.id])})}),b.bind("Flash:ImageError",function(a,c){b.trigger("Error",{code:parseInt(c.code,10),message:h.translate("Image error."),file:b.getFile(f[c.id])})}),b.bind("Flash:StageEvent:rollOver",function(a){var c;c=e.getElementById(b.settings.browse_button);a=a.settings.browse_button_hover;c&&a&&h.addClass(c,a)}),b.bind("Flash:StageEvent:rollOut",function(a){var c;c=e.getElementById(b.settings.browse_button);a=a.settings.browse_button_hover;c&&a&&h.removeClass(c,a)}),b.bind("Flash:StageEvent:mouseDown",function(a){var c,d;c=e.getElementById(b.settings.browse_button);d=a.settings.browse_button_active;c&&d&&(h.addClass(c,d),h.addEvent(e.body,"mouseup",function(){h.removeClass(c,d)},a.id))}),b.bind("Flash:StageEvent:mouseUp",function(a){var c;c=e.getElementById(b.settings.browse_button);a=a.settings.browse_button_active;c&&a&&h.removeClass(c,a)}),b.bind("Flash:ExifData",function(a,c){b.trigger("ExifData",b.getFile(f[c.id]),c.data)}),b.bind("Flash:GpsData",function(a,c){b.trigger("GpsData",b.getFile(f[c.id]),c.data)}),b.bind("QueueChanged",function(a){b.refresh()}),b.bind("FilesRemoved",function(b,c){var d;for(d=0;d<c.length;d++)a().removeFile(f[c[d].id])}),b.bind("StateChanged",function(a){b.refresh()}),b.bind("Refresh",function(c){var d,f;a().setFileFilters(b.settings.filters,b.settings.multi_selection);if(d=e.getElementById(c.settings.browse_button))f=h.getPos(d,e.getElementById(c.settings.container)),d=h.getSize(d),h.extend(e.getElementById(c.id+"_flash_container").style,{top:f.y+"px",left:f.x+"px",width:d.w+"px",height:d.h+"px"})}),b.bind("DisableBrowse",function(b,c){a().disableBrowse(c)}),c({success:!0}))}))}})})(window,document,plupload);(function(b,e,h,m){function k(a,c){var d;if("FileReader"in b)d=new FileReader,d.readAsDataURL(a),d.onload=function(){c(d.result)};else return c(a.getAsDataURL())}
function n(a,c){var d;if("FileReader"in b)d=new FileReader,d.readAsBinaryString(a),d.onload=function(){c(d.result)};else return c(a.getAsBinary())}
function d(b,d,g,h){var m,q,n,p=this;k(r[b.id],function(k){m=e.createElement("canvas");m.style.display="none";e.body.appendChild(m);q=new Image;q.onerror=q.onabort=function(){h({success:!1})};q.onload=function(){var r,t,z,C;d.width||(d.width=q.width);d.height||(d.height=q.height);n=Math.min(d.width/q.width,d.height/q.height);if(1>n)r=Math.round(q.width*n),t=Math.round(q.height*n);else if(d.quality&&"image/jpeg"===g)r=q.width,t=q.height;else{h({success:!1});return}
m.width=r;m.height=t;C=q.naturalWidth;var E=q.naturalHeight,M=r,O=t,L=m.getContext("2d");L.save();var w;w=q.naturalWidth;if(1048576<w*q.naturalHeight){var K=e.createElement("canvas");K.width=K.height=1;K=K.getContext("2d");K.drawImage(q,-w+1,0);w=0===K.getImageData(0,0,1,1).data[3]}else w=!1;w&&(C/=2,E/=2);w=e.createElement("canvas");w.width=w.height=1024;var K=w.getContext("2d"),I;I=E;var B=e.createElement("canvas");B.width=1;B.height=I;B=B.getContext("2d");B.drawImage(q,0,0);for(var B=B.getImageData(0,0,1,I).data,H=0,F=I,G=I;G>H;)0===B[4*(G-1)+3]?F=G:H=G,G=F+H>>1;I=G/I;I=0===I?1:I;for(B=0;B<E;){H=B+1024>E?E-B:1024;for(F=0;F<C;){G=F+1024>C?C-F:1024;K.clearRect(0,0,1024,1024);K.drawImage(q,-F,-B);var P=F*M/C<<0,Q=Math.ceil(G*M/C),R=B*O/E/I<<0,S=Math.ceil(H*O/E/I);L.drawImage(w,0,0,G,H,P,R,Q,S);F+=1024}
B+=1024}
L.restore();"image/jpeg"===g&&(z=new c(atob(k.substring(k.indexOf("base64,")+7))),z.headers&&z.headers.length&&(C=new a,C.init(z.get("exif")[0])&&(C.setExif("PixelXDimension",r),C.setExif("PixelYDimension",t),z.set("exif",C.getBinary()),p.hasEventListener("ExifData")&&p.trigger("ExifData",b,C.EXIF()),p.hasEventListener("GpsData")&&p.trigger("GpsData",b,C.GPS()))));if(d.quality&&"image/jpeg"===g)try{k=m.toDataURL(g,d.quality/100)}catch(T){k=m.toDataURL(g)}else k=m.toDataURL(g);k=k.substring(k.indexOf("base64,")+7);k=atob(k);z&&(z.headers&&z.headers.length)&&(k=z.restore(k),z.purge());m.parentNode.removeChild(m);h({success:!0,data:k})};q.src=k})}
function g(){function a(b,e){var f=c?0:-8*(e-1),g=0,h;for(h=0;h<e;h++)g|=d.charCodeAt(b+h)<<Math.abs(f+8*h);return g}
function b(a,c,e){e=3===arguments.length?e:d.length-c-1;d=d.substr(0,c)+a+d.substr(e+c)}
var c=!1,d;return{II:function(a){if(a===m)return c;c=a},init:function(a){c=!1;d=a},SEGMENT:function(a,c,e){switch(arguments.length){case 1:return d.substr(a,d.length-a-1);case 2:return d.substr(a,c);case 3:b(e,a,c);break;default:return d}},BYTE:function(b){return a(b,1)},SHORT:function(b){return a(b,2)},LONG:function(d,e){if(e===m)return a(d,4);var g="",h=c?0:-24,k;for(k=0;4>k;k++)g+=String.fromCharCode(e>>Math.abs(h+8*k)&255);b(g,d,4)},SLONG:function(b){b=a(b,4);return 2147483647<b?b-4294967296:b},STRING:function(b,c){var d="";for(c+=b;b<c;b++)d+=String.fromCharCode(a(b,1));return d}}}
function c(a){var b={65505:{app:"EXIF",name:"APP1",signature:"Exif\x00"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\x00"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\x00"}},d=[],e,h,k=m,n=0;e=new g;e.init(a);if(65496===e.SHORT(0)){h=2;for(a=Math.min(1048576,a.length);h<=a;)
if(k=e.SHORT(h),65488<=k&&65495>=k)h+=2;else{if(65498===k||65497===k)break;n=e.SHORT(h+2)+2;b[k]&&e.STRING(h+4,b[k].signature.length)===b[k].signature&&d.push({hex:k,app:b[k].app.toUpperCase(),name:b[k].name.toUpperCase(),start:h,length:n,segment:e.SEGMENT(h,n)});h+=n}
e.init(null);return{headers:d,restore:function(a){e.init(a);var b=new c(a);if(!b.headers)return!1;for(a=b.headers.length;0<a;a--){var f=b.headers[a-1];e.SEGMENT(f.start,f.length,"")}
b.purge();h=65504==e.SHORT(2)?4+e.SHORT(4):2;a=0;for(b=d.length;a<b;a++)e.SEGMENT(h,0,d[a].segment),h+=d[a].length;return e.SEGMENT()},get:function(a){for(var b=[],c=0,e=d.length;c<e;c++)d[c].app===a.toUpperCase()&&b.push(d[c].segment);return b},set:function(a,b){var c=[];"string"===typeof b?c.push(b):c=b;for(var e=ii=0,f=d.length;e<f&&!(d[e].app===a.toUpperCase()&&(d[e].segment=c[ii],d[e].length=c[ii].length,ii++),ii>=c.length);e++);},purge:function(){d=[];e.init(null)}}}}
function a(){function a(c,f){var g=b.SHORT(c),h,k,l,n,p,r=[],t={};for(h=0;h<g;h++)
if(p=c+12*h+2,l=f[b.SHORT(p)],l!==m){k=b.SHORT(p+=2);n=b.LONG(p+=2);p+=4;r=[];switch(k){case 1:case 7:4<n&&(p=b.LONG(p)+d.tiffHeader);for(k=0;k<n;k++)r[k]=b.BYTE(p+k);break;case 2:4<n&&(p=b.LONG(p)+d.tiffHeader);t[l]=b.STRING(p,n-1);continue;case 3:2<n&&(p=b.LONG(p)+d.tiffHeader);for(k=0;k<n;k++)r[k]=b.SHORT(p+2*k);break;case 4:1<n&&(p=b.LONG(p)+d.tiffHeader);for(k=0;k<n;k++)r[k]=b.LONG(p+4*k);break;case 5:p=b.LONG(p)+d.tiffHeader;for(k=0;k<n;k++)r[k]=b.LONG(p+4*k)/b.LONG(p+4*k+4);break;case 9:p=b.LONG(p)+d.tiffHeader;for(k=0;k<n;k++)r[k]=b.SLONG(p+4*k);break;case 10:p=b.LONG(p)+d.tiffHeader;for(k=0;k<n;k++)r[k]=b.SLONG(p+4*k)/b.SLONG(p+4*k+4);break;default:continue}
n=1==n?r[0]:r;e.hasOwnProperty(l)&&"object"!=typeof n?t[l]=e[l][n]:t[l]=n}
return t}
var b,c,d={},e;b=new g;c={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}};e={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}};return{init:function(e){d={tiffHeader:10};if(e===m||!e.length)return!1;b.init(e);return 65505===b.SHORT(0)&&"EXIF\x00"===b.STRING(4,5).toUpperCase()?(e=m,e=d.tiffHeader,b.II(18761==b.SHORT(e)),42!==b.SHORT(e+=2)?e=!1:(d.IFD0=d.tiffHeader+b.LONG(e+2),e=a(d.IFD0,c.tiff),d.exifIFD="ExifIFDPointer"in e?d.tiffHeader+e.ExifIFDPointer:m,d.gpsIFD="GPSInfoIFDPointer"in e?d.tiffHeader+e.GPSInfoIFDPointer:m,e=!0),e):!1},EXIF:function(){var b;b=a(d.exifIFD,c.exif);if(b.ExifVersion&&"array"===h.typeOf(b.ExifVersion)){for(var e=0,g="";e<b.ExifVersion.length;e++)g+=String.fromCharCode(b.ExifVersion[e]);b.ExifVersion=g}
return b},GPS:function(){var b;b=a(d.gpsIFD,c.gps);b.GPSVersionID&&(b.GPSVersionID=b.GPSVersionID.join("."));return b},setExif:function(a,e){if("PixelXDimension"!==a&&"PixelYDimension"!==a)return!1;var f;f=a;var g,h,k,m=0;if("string"===typeof f)
for(hex in g=c.exif,g)
if(g[hex]===f){f=hex;break}
g=d.exifIFD;h=b.SHORT(g);for(i=0;i<h;i++)
if(k=g+12*i+2,b.SHORT(k)==f){m=k+8;break}
m?(b.LONG(m,e),f=!0):f=!1;return f},getBinary:function(){return b.SEGMENT()}}}
var r={},p;h.runtimes.Html5=h.addRuntime("html5",{getFeatures:function(){var a,c,d,g,k,m;c=d=k=m=!1;b.XMLHttpRequest&&(a=new XMLHttpRequest,d=!!a.upload,c=!(!a.sendAsBinary&&!a.upload));c&&(g=!!(a.sendAsBinary||b.Uint8Array&&b.ArrayBuffer),k=!(!File||!File.prototype.getAsDataURL&&!b.FileReader||!g),m=!(!File||!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)));p=h.ua.safari&&h.ua.windows;a=c;c=e.createElement("div");return{html5:a,dragdrop:"draggable"in c||"ondragstart"in c&&"ondrop"in c,jpgresize:k,pngresize:k,multipart:k||!!b.FileReader||!!b.FormData,canSendBinary:g,cantSendBlobInFormData:!(!h.ua.gecko||!b.FormData||!b.FileReader||FileReader.prototype.readAsArrayBuffer)||h.ua.android,progress:d,chunks:m,multi_selection:!(h.ua.safari&&h.ua.windows),triggerDialog:h.ua.gecko&&b.FormData||h.ua.webkit}},init:function(a,c){function g(b){var c,d,e=[],k,l={};for(d=0;d<b.length;d++)c=b[d],l[c.name]&&h.ua.safari&&h.ua.windows||(l[c.name]=!0,k=h.guid(),r[k]=c,e.push(new h.File(k,c.fileName||c.name,c.fileSize||c.size)));e.length&&a.trigger("FilesAdded",e)}
var k,m;k=this.getFeatures();k.html5?(a.bind("Init",function(b){var c,d,k=[],m,n,p=b.settings.filters,r,s;m=e.body;c=e.createElement("div");c.id=b.id+"_html5_container";h.extend(c.style,{position:"absolute",background:a.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:a.settings.shim_bgcolor?"":0});c.className="plupload html5";a.settings.container&&(m=e.getElementById(a.settings.container),"static"===h.getStyle(m,"position")&&(m.style.position="relative"));m.appendChild(c);m=0;a:for(;m<p.length;m++)
for(r=p[m].extensions.split(/,/),n=0;n<r.length;n++){if("*"===r[n]){k=[];break a}(s=h.mimeTypes[r[n]])&&-1===h.inArray(s,k)&&k.push(s)}
c.innerHTML='<input id="'+a.id+'_html5"  style="font-size:999px" type="file" accept="'+k.join(",")+'" '+(a.settings.multi_selection&&a.features.multi_selection?'multiple="multiple"':"")+" />";c.scrollTop=100;k=e.getElementById(a.id+"_html5");b.features.triggerDialog?h.extend(k.style,{position:"absolute",width:"100%",height:"100%"}):h.extend(k.style,{cssFloat:"right",styleFloat:"right"});k.onchange=function w(){g(this.files);if(h.ua.ie){var a=this.cloneNode(!0);this.parentNode.replaceChild(a,this);a.onchange=w}else this.value=""};if(d=e.getElementById(b.settings.browse_button)){var u=b.settings.browse_button_hover,t=b.settings.browse_button_active;c=b.features.triggerDialog?d:c;u&&(h.addEvent(c,"mouseover",function(){h.addClass(d,u)},b.id),h.addEvent(c,"mouseout",function(){h.removeClass(d,u)},b.id));t&&(h.addEvent(c,"mousedown",function(){h.addClass(d,t)},b.id),h.addEvent(e.body,"mouseup",function(){h.removeClass(d,t)},b.id));b.features.triggerDialog&&h.addEvent(d,"click",function(a){var c=e.getElementById(b.id+"_html5");c&&!c.disabled&&c.click();a.preventDefault()},b.id)}}),a.bind("PostInit",function(){var b=e.getElementById(a.settings.drop_element);b&&(p?h.addEvent(b,"dragenter",function(c){var d;d=e.getElementById(a.id+"_drop");d||(d=e.createElement("input"),d.setAttribute("type","file"),d.setAttribute("id",a.id+"_drop"),d.setAttribute("multiple","multiple"),h.addEvent(d,"change",function(){g(this.files);h.removeEvent(d,"change",a.id);d.parentNode.removeChild(d)},a.id),h.addEvent(d,"dragover",function(a){a.stopPropagation()},a.id),b.appendChild(d));h.getPos(b,e.getElementById(a.settings.container));c=h.getSize(b);"static"===h.getStyle(b,"position")&&h.extend(b.style,{position:"relative"});h.extend(d.style,{position:"absolute",display:"block",top:0,left:0,width:c.w+"px",height:c.h+"px",opacity:0})},a.id):(h.addEvent(b,"dragover",function(a){a.preventDefault()},a.id),h.addEvent(b,"drop",function(a){var b=a.dataTransfer;b&&b.files&&g(b.files);a.preventDefault()},a.id)))}),a.bind("Refresh",function(b){var c,d,g;if(c=e.getElementById(a.settings.browse_button))d=h.getPos(c,e.getElementById(b.settings.container)),g=h.getSize(c),b=e.getElementById(a.id+"_html5_container"),h.extend(b.style,{top:d.y+"px",left:d.x+"px",width:g.w+"px",height:g.h+"px"}),a.features.triggerDialog&&("static"===h.getStyle(c,"position")&&h.extend(c.style,{position:"relative"}),d=parseInt(h.getStyle(c,"zIndex"),10),isNaN(d)&&(d=0),h.extend(c.style,{zIndex:d}),h.extend(b.style,{zIndex:d-1}))}),a.bind("DisableBrowse",function(a,b){var c=e.getElementById(a.id+"_html5");c&&(c.disabled=b)}),a.bind("CancelUpload",function(){m&&m.abort&&m.abort()}),a.bind("UploadFile",function(a,c){function e(a,b,c){var d;if(File.prototype.slice)try{return a.slice(),a.slice(b,c)}catch(f){return a.slice(b,c-b)}else return(d=File.prototype.webkitSlice||File.prototype.mozSlice)?d.call(a,b,c):null}
function f(d){function l(){function f(b){if(m.sendAsBinary)m.sendAsBinary(b);else if(a.features.canSendBinary){for(var c=new Uint8Array(b.length),d=0;d<b.length;d++)c[d]=b.charCodeAt(d)&255;m.send(c.buffer)}}
function r(d){var e=0,g="----pluploadboundary"+h.guid(),y,z="";m=new XMLHttpRequest;m.upload&&(m.upload.onprogress=function(b){c.loaded=Math.min(c.size,p+b.loaded-e);a.trigger("UploadProgress",c)});m.onreadystatechange=function(){var b,e;if(4==m.readyState&&a.state!==h.STOPPED){try{b=m.status}catch(f){b=0}
if(400<=b)a.trigger("Error",{code:h.HTTP_ERROR,message:h.translate("HTTP Error."),file:c,status:b,response:m.responseText});else{if(t){e={chunk:n,chunks:t,response:m.responseText,status:b};a.trigger("ChunkUploaded",c,e);p+=H;if(e.cancelled){c.status=h.FAILED;return}
c.loaded=Math.min(c.size,(n+1)*B)}else c.loaded=c.size;a.trigger("UploadProgress",c);d=s=y=z=null;!t||++n>=t?(c.status=h.DONE,a.trigger("FileUploaded",c,{response:m.responseText,status:b})):l()}}};if(a.settings.multipart&&k.multipart){x.name=c.target_name||c.name;m.open("post",G,!0);h.each(a.settings.headers,function(a,b){m.setRequestHeader(b,a)});if("string"!==typeof d&&b.FormData){y=new FormData;h.each(h.extend(x,a.settings.multipart_params),function(a,b){y.append(b,a)});y.append(a.settings.file_data_name,d);m.send(y);return}
if("string"===typeof d){m.setRequestHeader("Content-Type","multipart/form-data; boundary="+g);h.each(h.extend(x,a.settings.multipart_params),function(a,b){z+="--"+g+'\r\nContent-Disposition: form-data; name="'+b+'"\r\n\r\n';z+=unescape(encodeURIComponent(a))+"\r\n"});F=h.mimeTypes[c.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream";z+="--"+g+'\r\nContent-Disposition: form-data; name="'+a.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(c.name))+'"\r\nContent-Type: '+F+"\r\n\r\n"+d+"\r\n--"+g+"--\r\n";e=z.length-d.length;d=z;f(d);return}}
G=h.buildUrl(a.settings.url,h.extend(x,a.settings.multipart_params));m.open("post",G,!0);m.setRequestHeader("Content-Type","application/octet-stream");h.each(a.settings.headers,function(a,b){m.setRequestHeader(b,a)});"string"===typeof d?f(d):m.send(d)}
var s,t=1,x,B,H,F,G=a.settings.url;c.status!=h.DONE&&(c.status!=h.FAILED&&a.state!=h.STOPPED)&&(x={name:c.target_name||c.name},g.chunk_size&&c.size>g.chunk_size&&(k.chunks||"string"==typeof d)?(B=g.chunk_size,t=Math.ceil(c.size/B),H=Math.min(B,c.size-n*B),s="string"==typeof d?d.substring(n*B,n*B+H):e(d,n*B,n*B+H)):(H=c.size,s=d),g.chunk_size&&k.chunks&&(x.chunk=n,x.chunks=t),a.settings.multipart&&k.multipart&&"string"!==typeof s&&b.FileReader&&k.cantSendBlobInFormData&&k.chunks&&a.settings.chunk_size?function(){var a=new FileReader;a.onload=function(){r(a.result);a=null};a.readAsBinaryString(s)}():r(s))}
var n=0,p=0;l()}
var g=a.settings,l;l=r[c.id];k.jpgresize&&a.settings.resize&&/\.(png|jpg|jpeg)$/i.test(c.name)?d.call(a,c,a.settings.resize,/\.png$/i.test(c.name)?"image/png":"image/jpeg",function(a){a.success?(c.size=a.data.length,f(a.data)):k.chunks?f(l):n(l,f)}):!k.chunks&&k.jpgresize?n(l,f):f(l)}),a.bind("Destroy",function(a){var b,c,d=e.body,f={inputContainer:a.id+"_html5_container",inputFile:a.id+"_html5",browseButton:a.settings.browse_button,dropElm:a.settings.drop_element};for(b in f)(c=e.getElementById(f[b]))&&h.removeAllEvents(c,a.id);h.removeAllEvents(e.body,a.id);a.settings.container&&(d=e.getElementById(a.settings.container));d.removeChild(e.getElementById(f.inputContainer))}),c({success:!0})):c({success:!1})}})})(window,document,plupload);$.telligent=$.telligent||{};$.telligent.evolution=$.telligent.evolution||{};N("components composers events lib modules plugins lib.messageLinks lib.sheetProvider lib.sheet lib.actionSheet module.maxlength lib.touchEventAdapter".split(" "),function(b,e,h,m,k,n,d,g,c,a,r,p,f,s){f(document).ready(function(){p.adapt();g.sheet=new c({parent:f("body"),enablePan:!0,maxHeightPerent:0.8,cssClass:"sheet",backgroundColor:"#333",backgroundOpacity:0.75,animationDuration:250,onOpening:function(){f.telligent.evolution.messaging.publish("sheet.opening")},onClosing:function(){f.telligent.evolution.messaging.publish("sheet.closing")},onOpened:function(){f.telligent.evolution.messaging.publish("sheet.opened")},onClosed:function(){f.telligent.evolution.messaging.publish("sheet.closed")}});g.actionSheet=new a({sheet:g.sheet});(new d({parent:"body"})).handle("click");f.telligent.evolution.ui.render();r.shim();f.fn.evolutionValidation.init()})},jQuery,window)})();